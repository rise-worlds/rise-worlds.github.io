<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.157.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Rise的自留地"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="Rise,ZhangTuohui,技术,C++,Unity3D,Lua,NodeJS,C#,JavaScript,游戏开发,机器学习,深度学习,AI,编程,编程语言,编程技术,编程开发,游戏引擎,游戏设计,游戏制作,游戏开发者,游戏开发者博客,游戏开发者网站,游戏开发者工具,游戏开发者教程,游戏开发者学习,游戏开发者交流,游戏开发者分享,游戏开发者经验,游戏开发者心得,游戏开发者技巧,游戏开发者方法,游戏开发者思路,游戏开发者理念,游戏开发者文化,游戏开发者精神,游戏开发者信仰"><meta property="og:type" content="website"><meta property="og:title" content="Rise的自留地"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1772265587"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class="hvr-icon-pulse menu-item-active" rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>679</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>679</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>35</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>118</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2423147></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5207></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2026-02-28 15:59:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/networking-with-directplay-part-4/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectPlay进行网络互联（4）"><meta itemprop=description content="客户端的处理客户端并不像服务器端那么复杂，它通常只使用两种消息，即接收数据和终止会话消息，以及需要连接和保持单一连接（服务器端）。另外最主要的就是客户端应用程序必须指定其玩家的位置，以便主机能够检索它们。设置玩家的信息是通过首先将相关数据填入一个DPN_PLAYER_INFO结构体，然后再调用IDirectPlay8Client:: SetClientInfo函数来实现。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/networking-with-directplay-part-4/ itemprop=url class=post-title-link>使用DirectPlay进行网络互联（4）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月13日 22:36:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-13 22:36:00 +0800 +0800">2007年08月13日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:14:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:14:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/networking-with-directplay-part-4/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#2d6a24>客户端的处理</span><br><br>客户端并不像服务器端那么复杂，它通常只使用两种消息，即接收数据和终止会话消息，以及需要连接和保持单一连接（服务器端）。另外最主要的就是客户端应用程序必须指定其玩家的位置，以便主机能够检索它们。设置玩家的信息是通过首先将相关数据填入一个DPN_PLAYER_INFO结构体，然后再调用IDirectPlay8Client:: SetClientInfo函数来实现。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/networking-with-directplay-part-4/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/networking-with-directplay-part-3/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectPlay进行网络互联（3）"><meta itemprop=description content="销毁玩家当玩家断开连接时，服务器端会收到消息 DPN_MSGID_DESTROY_PLAYER，这时需要将消息缓冲区转换为DPNMSG_DESTROY_PLAYER类型。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/networking-with-directplay-part-3/ itemprop=url class=post-title-link>使用DirectPlay进行网络互联（3）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月13日 20:05:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-13 20:05:00 +0800 +0800">2007年08月13日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:14:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:14:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/networking-with-directplay-part-3/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#2d704a>销毁玩家</span><br><br>当玩家断开连接时，服务器端会收到消息 DPN_MSGID_DESTROY_PLAYER，这时需要将消息缓冲区转换为DPNMSG_DESTROY_PLAYER类型。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/networking-with-directplay-part-3/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/networking-with-directplay-part-2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectPlay进行网络互联（2）"><meta itemprop=description content="本篇是使用DirectPlay进行网络互联（1）的续篇。使用地址一个网络使用IP地址和端口来传送数据，在DirectPlay中，使用DirectPlay专用对象IDirectPlay8Address来构造地址。常用的 IDirectPlay8Address方法有三个："></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/networking-with-directplay-part-2/ itemprop=url class=post-title-link>使用DirectPlay进行网络互联（2）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月13日 19:11:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-13 19:11:00 +0800 +0800">2007年08月13日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:15:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:15:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/networking-with-directplay-part-2/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>本篇是<a class=postTitle2 id=viewpost1_TitleUrl href=http://www.cppblog.com/lovedday/archive/2007/08/06/29446.html><font color=#1b1b1b>使用DirectPlay进行网络互联（1）</font></a>的续篇。<br><br><span style=font-weight:700;color:#622b1e><span style=color:#146c3a>使用地址</span><br><br></span>一个网络使用IP地址和端口来传送数据，在DirectPlay中，使用DirectPlay专用对象IDirectPlay8Address来构造地址。常用的 IDirectPlay8Address方法有三个：<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/networking-with-directplay-part-2/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/programmer-oil-poetry/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="经典推荐--程序员之打油诗"><meta itemprop=description content="写字楼里写字间，写字间里程序员；程序人员写程序，又拿程序换酒钱。酒醒只在网上坐，酒醉还来网下眠；酒醉酒醒日复日，网上网下年复年。……宁愿老死程序间，只要老板多发钱；小车大房不去想，撰个2&nbsp; k好过年。若要见识新世面，公务员比程序员；一个在天一在地，而且还比我们闲。别人看我穿白领，我看别人穿名牌；天生我才写程序，臀大近视肩周炎。
年复一年春光度，度得他人做老板；老板扣我薄酒钱，没有酒钱怎过年。春光逝去皱纹起，作起程序也委靡；来到水源把水灌，打死不做程序员。别人笑我忒疯癫，我笑他人命太贱；状元三百六十行，偏偏来做程序员！！
但愿老死电脑间，不愿鞠躬老板前；奔驰宝马贵者趣，公交自行程序员。若将程员比妓女，一在平地一在天；若将程员比车马，他得驱驰我无闲。别人笑我忒疯癫，我笑自己命太贱；不见满街漂亮妹，哪个归得程序员。
不想只挣打工钱，那个老板愿发钱；小车大房咱要想，任我享用多悠闲。比尔能搞个微软，我咋不能捞点钱；一个在天一在地，定有一日乾坤翻。我在天来他在地，纵横天下山水间；傲视武林豪杰墓，一樽还垒风月山。
电脑面前眼发直，眼镜下面泪茫茫；做梦发财好几亿，从此不用手指忙。哪知梦醒手空空，老板看到把我训；待到老时眼发花，走路不知哪是家。
各位在此穷抱怨，可知小弟更可怜；俺学编程两年半，至今没赚一分钱。听说三十是末日，二十三岁在眼前；发誓立志傍微软，渺渺前程对谁言？
&nbsp;
小农村里小民房，小民房里小民工；小民工人写程序，又拿代码讨赏钱。钱空只在代码中，钱醉仍在代码间；有钱无钱日复日，码上码下年复年。但愿老死代码间，不愿鞠躬奥迪前，奥迪奔驰贵者趣，程序代码贫者缘。若将贫贱比贫者，一在平地一在天；若将贫贱比车马，他得驱驰我得闲。别人笑我忒疯癫，我笑他人看不穿；不见盖茨两手间，财权富贵世人鉴。
（参考：**&nbsp; 桃花庵歌**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ——唐寅）
桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花换酒钱。酒醒只在花间坐，酒醉还来花下眠；半醒半醉日复日，花开花落年复年。但愿老死花酒间，不愿鞠躬车马前；车尘马足贵者趣，酒盏花枝贫者缘。若将贫贱比贫者，一在平地一在天；若将贫贱比车马，他得驱驰我得闲。别人笑我忒疯癫，我笑他人看不穿；不见五陵豪杰墓，无花无酒锄作田。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/programmer-oil-poetry/ itemprop=url class=post-title-link>经典推荐--程序员之打油诗</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月07日 13:30:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-07 13:30:00 +0800 +0800">2007年08月07日
</time></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/programmer-oil-poetry/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>写字楼里写字间，写字间里程序员；程序人员写程序，又拿程序换酒钱。<br>酒醒只在网上坐，酒醉还来网下眠；酒醉酒醒日复日，网上网下年复年。<br>……<br>宁愿老死程序间，只要老板多发钱；小车大房不去想，撰个2&nbsp; k好过年。<br>若要见识新世面，公务员比程序员；一个在天一在地，而且还比我们闲。<br>别人看我穿白领，我看别人穿名牌；天生我才写程序，臀大近视肩周炎。</p><p>年复一年春光度，度得他人做老板；老板扣我薄酒钱，没有酒钱怎过年。<br>春光逝去皱纹起，作起程序也委靡；来到水源把水灌，打死不做程序员。<br>别人笑我忒疯癫，我笑他人命太贱；状元三百六十行，偏偏来做程序员！！</p><p>但愿老死电脑间，不愿鞠躬老板前；奔驰宝马贵者趣，公交自行程序员。<br>若将程员比妓女，一在平地一在天；若将程员比车马，他得驱驰我无闲。<br>别人笑我忒疯癫，我笑自己命太贱；不见满街漂亮妹，哪个归得程序员。</p><p>不想只挣打工钱，那个老板愿发钱；小车大房咱要想，任我享用多悠闲。<br>比尔能搞个微软，我咋不能捞点钱；一个在天一在地，定有一日乾坤翻。<br>我在天来他在地，纵横天下山水间；傲视武林豪杰墓，一樽还垒风月山。</p><p><br>电脑面前眼发直，眼镜下面泪茫茫；做梦发财好几亿，从此不用手指忙。<br>哪知梦醒手空空，老板看到把我训；待到老时眼发花，走路不知哪是家。</p><p>各位在此穷抱怨，可知小弟更可怜；俺学编程两年半，至今没赚一分钱。<br>听说三十是末日，二十三岁在眼前；发誓立志傍微软，渺渺前程对谁言？</p><p>&nbsp;</p><p>小农村里小民房，小民房里小民工；小民工人写程序，又拿代码讨赏钱。<br>钱空只在代码中，钱醉仍在代码间；有钱无钱日复日，码上码下年复年。<br>但愿老死代码间，不愿鞠躬奥迪前，奥迪奔驰贵者趣，程序代码贫者缘。<br>若将贫贱比贫者，一在平地一在天；若将贫贱比车马，他得驱驰我得闲。<br>别人笑我忒疯癫，我笑他人看不穿；不见盖茨两手间，财权富贵世人鉴。</p><p><br>（参考：**&nbsp; 桃花庵歌**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ——唐寅）</p><p>桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花换酒钱。<br>酒醒只在花间坐，酒醉还来花下眠；半醒半醉日复日，花开花落年复年。<br>但愿老死花酒间，不愿鞠躬车马前；车尘马足贵者趣，酒盏花枝贫者缘。<br>若将贫贱比贫者，一在平地一在天；若将贫贱比车马，他得驱驰我得闲。<br>别人笑我忒疯癫，我笑他人看不穿；不见五陵豪杰墓，无花无酒锄作田。</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/programmer-oil-poetry/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/networking-with-directplay-part-1/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectPlay进行网络互联（1）"><meta itemprop=description content="了解网络互联网络是指多台计算机互联以进行数据传输及通信的系统。除了两个或更多的计算机之外，网路还需要有网络互联软件（或一个网路操作系统）、网络适配器以及电缆。网络适配器有各种形状和大小，但是一般都采用调制解调器的形状。实际上，调制解调器就是一个网路适配器，它能够将一台计算机通过世界上最大的网络&mdash;互联网连接到数百万台计算机上。网路模型网络互联模型有三种基本类型：服务器端、客户端以及点对点。使用服务器端模型，可以建立一个中央网络互联系统。其他计算机使用客户端模型连接到服务器端后，就可以向服务器端发送数据以及从服务器端接收数据。客户端没有其他客户端的信息，不直接与它们连接，客户端都只知道服务器端的信息，而服务器端则拥有所有客户端的信息以及适合这些客户端之间的路由信息。服务器端和客户端常常成对进行描述，即服务器端/客户端（C/S）模型，但是在使用DirectPlay时，将二者分开是有必要的，因为服务器端和客户端是由两个独立的组件组成的。点对点（peer-to-peer）这种网络互联模型与服务器端模型或客户端模型正好相反，计算机相互之间直接进行连接。每一台新的计算机加入网络会话中，都会建立一个新的连接，所以每台计算机都能直接连接到其他计算机。连接到网络的时段称为会话，一次会话会有与之相关的属性，如密码、最大连接数等。游戏厅可以将游戏厅服务器看作在线玩家的会议大厅，一个游戏厅允许所有玩家登录、通信以及加入他们喜爱的一些游戏。一旦游戏厅服务器连满了玩家，就停止对游戏厅的循环（这样做是为了节省网络带宽）。网络带宽（network bandwidth）指的是一个网络连接能够轻松处理的数据量，高网络带宽连接能比低网路带宽连接更快地处理大量的网络数据。响应时间和延迟带宽引出了两个术语：响应时间和延迟。响应时间是完成一个操作所花的时间（越低越好）的量化。延迟是用来描述网络通信的迟滞的术语，即数据从发送到它被接收到所花的时间。低延迟表示网络数据迅速地被接收。高延迟（最不希望出现的事情）表示网络数据被延迟或者根本没有被发送到。延迟是一个主要问题，特别是使用了互联网时，就必须处理这个问题。通信协议网络可以有各种方式进行相互通信，但是要连接到另一个，两个系统都必须采用相同的协议。目前最流行的协议是TCP/IP协议（传输控制协议/Internet协议），它被广泛应用于互联网。通信协议也被称作服务器提供者，无论服务器提供者是一种诸如IPX、TCP/IP的协议，还是一种诸如调制解调器或者串行电缆的设备，都可以把它看作是网络互联的连接体。TCP/IP协议是一种在网络上传输数据包的方法。它将数据分割成很多小数据包，再加上发送方和接收方的地址以及包的数目，便于重组数据。信息在传输过程中丢失（频繁发生的事情），TCP/IP允许网络重发数据包。当出现延迟时，这些数据包可能以错误的顺序被接收，比如旧的数据包在新的数据包之后到达。好在无需担心，因为TCP/IP会重发丢失的包并且重组无序的包。寻址在TCP/IP协议下，一个系统被分配一个由4个数字（0 -255之间）组成的网络地址（IP地址），数字之间用点分割。一个IP地址就像下面这样：64.120.53.2IP地址对我们来说不好辨认，但是网络却可以根据每一个数值成功地传递数据。稍加运算就会发现，这4个数字的组合总共可以提供4294967296个可能的地址。为了增加地址数量，网络使用附加的称为端口的地址值，数据被传送到其上。 如果将IP地址比喻成一个邮政室（mailroom），那么该邮政室（IP地址）描述了与网络相连的单个计算机系统，并且该计算机系统只被分配了惟一的IP地址。在邮政室中有很多箱柜（端口），邮件被分类到其中。每一个箱柜（端口）属于一个特定的工作人员（一个特定的应用程序）。一些应用程序可以拥有多个端口，数据只能被一个同相应IP地址以及相应端口所匹配的系统接收。一种称为数据路由器（data router）的设备将接收到的网络数据传送到它所知道的系统，或者将数据传送到另一个网络连接。DirectPlay概述要在工程中使用DirectPlay，必须包含DPlay8.h和DPAddr.h，还要链接DPlayX.lib和 DXGuid.lib。网络对象使用DirectPlay，需要使用前面提到的网络模型：客户端、服务器端和点对点。每一种网络模型都有自己的接口对象，如下所示：IDirectPlay8Client：客户端网络对象，连接到一个服务器端。IDirectPlay8Server：服务器端网络对象，连接多个客户端。IDirectPlay8Peer：   点对点网络对象，连接客户端于其他客户端。IDirectPlay8Address：包含（以及构造）网络地址的对象。要连接到远程网络系统（或主持一次会话），需要使用 IDirectPlay8Address构造一个网络地址，IDirectPlay8Address的惟一用途就是构造并包含单个网络地址。会话指的是主持或加入一个可连接网路系统的时段，终止连接时，会话也就终止了。要主持游戏会话或连接到远程系统，首先需要创建网络对象并给它分配地址。要主持游戏会话，只需要等待其他系统（也就是使用这些系统的人）连接上来即可。连接建立之后，系统就可以和远程系统开始相互传输游戏相关的网络消息， DirectPlay把这些远程系统称作玩家。将玩家进行分组在DirectPlay术语中，“玩家”是指通过网络连接到其他计算机的单个连接（通常是一个游戏玩家）。一台计算机可以有多个玩家，但一般只有一个。实际上，服务器端也被标识为玩家，以便于识别。每一个玩家都会接收到一个标识号码（玩家ID），系统使用这个标识号码来将消息传递到每个玩家。这些号码是追踪玩家的惟一可信任方法，所以需要让程序对它们进行相应地处理。对于大型游戏，可能有成千上万已连接的玩家。为了在游戏中更好地处理这些玩家，可以将一些或所有玩家编制到一些组中。采用组的概念可以减少编程的繁琐，主要原因在于可以将一个游戏区域（比如一张地图或某个级别）中的多个玩家划分为一组，并且一次向整个组发送网络数据，而不是单独发送给各个玩家。使用组还有很多其他原因，但这个原因是最主要的。一个组中包含多少玩家以及创建多少个组完全没有限制，组也可以属于其他组。带消息的网络互联消息是分了类的数据包，其中包含简单的结构。每一个消息都有特定的含义，且都有一个与之对应的宏，而且还和所使用的网络模型有关。要接收消息，网络对象必须给自己指定一个回调函数，以便于每次消息到达时进行调用。为了确保得到平滑的数据流，该函数根据数据类型进行分析并尽快地返回。发送消息，需要使用各个网络对象的发送函数。这些函数易于使用，并且提供了许多发送选项，包括保证发送（guaranteed delivery）、安全编码（secure encryption）以及同步或异步发送。同步与异步DirectPlay提供的第一个发送选项是同步或异步发送消息的功能，也就是说系统在发出发送数据指定之后交回控制权（异步），还是直到所有的数据都成功发送之后再交回控制权（同步）。很多时候使用异步方法，因为它不会像同步方法那样阻塞系统。安全性要引起注意的是任何时候都可能有人在截取并记录游戏的网络数据。因此，就需要采用一种安全的方式编码消息数据，使得那些解码的黑客非常难读懂先前的信息。使用安全网络发送的不好之处在于它会稍稍减慢系统的系统，因为必须在数据发送之前先编码信息，然后在接收到之后进行解码。保证发送就像一些快递公司保证送到包裹一样， DirectPlay也能保证送到消息。可以将一组信息标识为保证的，其余确定的就是DirectPlay将一直执行发送操作直到发送成功，以保证将其发送到目标地址（除非断线），使用保证发送是通过在调用函数时指定一个惟一的标志来实现的。保证发送的不好之处在于速度，保证发送在实际的游戏状况下非常慢，游戏采用UDP（用户数据报协议）发送方法，就不用关心数据是否被接收到（和TCP发送方法相反，它保证数据的发送）。节流有时系统会因为试图处理流数据而过载，尽管这样， DirectPlay有一个内置的消息节流器，它丢弃了发送队列中低优先级的信息。使用GUID识别应用程序如何从众多的网络应用程序中区分出自己的网络应用程序呢？解决这个问题的方法就是给自己的应用程序指定一个惟一的号码，并且只允许使用相同号码的应用程序相互进行连接。这个特殊的号码就是 Windows程序员熟悉的GUID（全局惟一标识符）。创建应用程序之前，花一点时间给它设置一个惟一的GUID，并且保证所有通过网络进行连接的该应用程序使用相同的GUID。初始化网络对象无论是服务器端、客户端还是单点对象，使用DirectPlay的第一步都是创建网络对象。要初始化每一个网络模型接口，必须使用CoCreateInstance函数，可能用到的类ID和引用标识符如下所示:"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/networking-with-directplay-part-1/ itemprop=url class=post-title-link>使用DirectPlay进行网络互联（1）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月06日 19:50:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-06 19:50:00 +0800 +0800">2007年08月06日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:15:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:15:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/networking-with-directplay-part-1/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#20562d>了解网络互联</span><br><br>网络是指多台计算机互联以进行数据传输及通信的系统。除了两个或更多的计算机之外，网路还需要有网络互联软件（或一个网路操作系统）、网络适配器以及电缆。网络适配器有各种形状和大小，但是一般都采用调制解调器的形状。实际上，调制解调器就是一个网路适配器，它能够将一台计算机通过世界上最大的网络&mdash;互联网连接到数百万台计算机上。<br><br><span style=font-weight:700>网路模型</span><br><br>网络互联模型有三种基本类型：服务器端、客户端以及点对点。<br><br>使用服务器端模型，可以建立一个中央网络互联系统。其他计算机使用客户端模型连接到服务器端后，就可以向服务器端发送数据以及从服务器端接收数据。客户端没有其他客户端的信息，不直接与它们连接，客户端都只知道服务器端的信息，而服务器端则拥有所有客户端的信息以及适合这些客户端之间的路由信息。服务器端和客户端常常成对进行描述，即服务器端/客户端（C/S）模型，但是在使用DirectPlay时，将二者分开是有必要的，因为服务器端和客户端是由两个独立的组件组成的。<br><br>点对点（peer-to-peer）这种网络互联模型与服务器端模型或客户端模型正好相反，计算机相互之间直接进行连接。每一台新的计算机加入网络会话中，都会建立一个新的连接，所以每台计算机都能直接连接到其他计算机。连接到网络的时段称为会话，一次会话会有与之相关的属性，如密码、最大连接数等。<br><br><span style=font-weight:700>游戏厅</span><br><br>可以将游戏厅服务器看作在线玩家的会议大厅，一个游戏厅允许所有玩家登录、通信以及加入他们喜爱的一些游戏。一旦游戏厅服务器连满了玩家，就停止对游戏厅的循环（这样做是为了节省网络带宽）。网络带宽（network bandwidth）指的是一个网络连接能够轻松处理的数据量，高网络带宽连接能比低网路带宽连接更快地处理大量的网络数据。<br><br><span style=font-weight:700>响应时间和延迟</span><br><br>带宽引出了两个术语：响应时间和延迟。响应时间是完成一个操作所花的时间（越低越好）的量化。延迟是用来描述网络通信的迟滞的术语，即数据从发送到它被接收到所花的时间。<br><br>低延迟表示网络数据迅速地被接收。高延迟（最不希望出现的事情）表示网络数据被延迟或者根本没有被发送到。延迟是一个主要问题，特别是使用了互联网时，就必须处理这个问题。<br><br><span style=font-weight:700>通信协议</span><br><br>网络可以有各种方式进行相互通信，但是要连接到另一个，两个系统都必须采用相同的协议。目前最流行的协议是TCP/IP协议（传输控制协议/Internet协议），它被广泛应用于互联网。通信协议也被称作服务器提供者，无论服务器提供者是一种诸如IPX、TCP/IP的协议，还是一种诸如调制解调器或者串行电缆的设备，都可以把它看作是网络互联的连接体。<br><br>TCP/IP协议是一种在网络上传输数据包的方法。它将数据分割成很多小数据包，再加上发送方和接收方的地址以及包的数目，便于重组数据。信息在传输过程中丢失（频繁发生的事情），TCP/IP允许网络重发数据包。当出现延迟时，这些数据包可能以错误的顺序被接收，比如旧的数据包在新的数据包之后到达。好在无需担心，因为TCP/IP会重发丢失的包并且重组无序的包。<br><br><span style=font-weight:700>寻址</span><br><br>在TCP/IP协议下，一个系统被分配一个由4个数字（0 -255之间）组成的网络地址（IP地址），数字之间用点分割。一个IP地址就像下面这样：<br><br>64.120.53.2<br><br>IP地址对我们来说不好辨认，但是网络却可以根据每一个数值成功地传递数据。稍加运算就会发现，这4个数字的组合总共可以提供4294967296个可能的地址。为了增加地址数量，网络使用附加的称为端口的地址值，数据被传送到其上。<br><br>如果将IP地址比喻成一个邮政室（mailroom），那么该邮政室（IP地址）描述了与网络相连的单个计算机系统，并且该计算机系统只被分配了惟一的IP地址。在邮政室中有很多箱柜（端口），邮件被分类到其中。每一个箱柜（端口）属于一个特定的工作人员（一个特定的应用程序）。一些应用程序可以拥有多个端口，数据只能被一个同相应IP地址以及相应端口所匹配的系统接收。一种称为数据路由器（data router）的设备将接收到的网络数据传送到它所知道的系统，或者将数据传送到另一个网络连接。<br><br><span style=font-weight:700;color:#20562d>DirectPlay概述</span><br><br><span style=font-weight:700>要在工程中使用DirectPlay，必须包含DPlay8.h和DPAddr.h，还要链接DPlayX.lib和 DXGuid.lib。</span><br><br><span style=font-weight:700>网络对象</span><br><br>使用DirectPlay，需要使用前面提到的网络模型：客户端、服务器端和点对点。每一种网络模型都有自己的接口对象，如下所示：<br><br>IDirectPlay8Client：客户端网络对象，连接到一个服务器端。<br>IDirectPlay8Server：服务器端网络对象，连接多个客户端。<br>IDirectPlay8Peer：   点对点网络对象，连接客户端于其他客户端。<br>IDirectPlay8Address：包含（以及构造）网络地址的对象。<br><br>要连接到远程网络系统（或主持一次会话），需要使用 IDirectPlay8Address构造一个网络地址，IDirectPlay8Address的惟一用途就是构造并包含单个网络地址。会话指的是主持或加入一个可连接网路系统的时段，终止连接时，会话也就终止了。要主持游戏会话或连接到远程系统，首先需要创建网络对象并给它分配地址。要主持游戏会话，只需要等待其他系统（也就是使用这些系统的人）连接上来即可。连接建立之后，系统就可以和远程系统开始相互传输游戏相关的网络消息， DirectPlay把这些远程系统称作玩家。<br><br><span style=font-weight:700>将玩家进行分组</span><br><br>在DirectPlay术语中，“玩家”是指通过网络连接到其他计算机的单个连接（通常是一个游戏玩家）。一台计算机可以有多个玩家，但一般只有一个。实际上，服务器端也被标识为玩家，以便于识别。每一个玩家都会接收到一个标识号码（玩家ID），系统使用这个标识号码来将消息传递到每个玩家。这些号码是追踪玩家的惟一可信任方法，所以需要让程序对它们进行相应地处理。<br><br>对于大型游戏，可能有成千上万已连接的玩家。为了在游戏中更好地处理这些玩家，可以将一些或所有玩家编制到一些组中。采用组的概念可以减少编程的繁琐，主要原因在于可以将一个游戏区域（比如一张地图或某个级别）中的多个玩家划分为一组，并且一次向整个组发送网络数据，而不是单独发送给各个玩家。使用组还有很多其他原因，但这个原因是最主要的。一个组中包含多少玩家以及创建多少个组完全没有限制，组也可以属于其他组。<br><br><span style=font-weight:700>带消息的网络互联</span><br><br>消息是分了类的数据包，其中包含简单的结构。每一个消息都有特定的含义，且都有一个与之对应的宏，而且还和所使用的网络模型有关。要接收消息，网络对象必须给自己指定一个回调函数，以便于每次消息到达时进行调用。为了确保得到平滑的数据流，该函数根据数据类型进行分析并尽快地返回。发送消息，需要使用各个网络对象的发送函数。这些函数易于使用，并且提供了许多发送选项，包括保证发送（guaranteed delivery）、安全编码（secure encryption）以及同步或异步发送。<br><br><span style=font-weight:700>同步与异步</span><br><br>DirectPlay提供的第一个发送选项是同步或异步发送消息的功能，也就是说系统在发出发送数据指定之后交回控制权（异步），还是直到所有的数据都成功发送之后再交回控制权（同步）。很多时候使用异步方法，因为它不会像同步方法那样阻塞系统。<br><br><span style=font-weight:700>安全性</span><br><br>要引起注意的是任何时候都可能有人在截取并记录游戏的网络数据。因此，就需要采用一种安全的方式编码消息数据，使得那些解码的黑客非常难读懂先前的信息。使用安全网络发送的不好之处在于它会稍稍减慢系统的系统，因为必须在数据发送之前先编码信息，然后在接收到之后进行解码。<br><br><span style=font-weight:700>保证发送</span><br><br>就像一些快递公司保证送到包裹一样， DirectPlay也能保证送到消息。可以将一组信息标识为保证的，其余确定的就是DirectPlay将一直执行发送操作直到发送成功，以保证将其发送到目标地址（除非断线），使用保证发送是通过在调用函数时指定一个惟一的标志来实现的。保证发送的不好之处在于速度，保证发送在实际的游戏状况下非常慢，游戏采用UDP（用户数据报协议）发送方法，就不用关心数据是否被接收到（和TCP发送方法相反，它保证数据的发送）。<br><br><span style=font-weight:700>节流</span><br><br>有时系统会因为试图处理流数据而过载，尽管这样， DirectPlay有一个内置的消息节流器，它丢弃了发送队列中低优先级的信息。<br><br><span style=font-weight:700>使用GUID识别应用程序</span><br><br>如何从众多的网络应用程序中区分出自己的网络应用程序呢？解决这个问题的方法就是给自己的应用程序指定一个惟一的号码，并且只允许使用相同号码的应用程序相互进行连接。这个特殊的号码就是 Windows程序员熟悉的GUID（全局惟一标识符）。创建应用程序之前，花一点时间给它设置一个惟一的GUID，并且保证所有通过网络进行连接的该应用程序使用相同的GUID。<br><br><span style=font-weight:700;color:#20562d>初始化网络对象</span><br><br>无论是服务器端、客户端还是单点对象，使用DirectPlay的第一步都是创建网络对象。要初始化每一个网络模型接口，必须使用CoCreateInstance函数，可能用到的类ID和引用标识符如下所示:<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/networking-with-directplay-part-1/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/directx9-tutorial-id3dxsprite-repost/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="DirectX9.0教程之ID3DXSprite篇[转载]"><meta itemprop=description content="前言：本教程面向对DriectX 9.0有一定了解的读者，主要讲解DirectX 9.0的各个部分的功能及用法。希望对广大的游戏初学者有一定帮助，也好让本人对中国游戏事业的发展做出一些微不足道的贡献。作者：Fabric（由于本人是广东人，写文章难免参杂粤语写法，请见谅）<?XML:NAMESPACE PREFIX = O />
　　简介：ID3DXSprite是DriectX 9.0里面的一个简单模块，在DriectX 9.0帮助文档里面对其功能的描术为：“向用户提供一套简单的在屏幕上实现精灵渲染的接口。”何为精灵渲染，说白了就是渲染２Ｄ画面，ID3DXSprite帮助用户透过简单的操作就能运用DriectX 9.0制作２Ｄ游戏（渲染２Ｄ图形），ID3DXSprite的功能还包括：帮助用户在３Ｄ游戏里面实现“公告牌”技术。下面，将对如何使用ID3DXSprite作详细分折。
　　得到一个ID3DXSprite对像：玩过DriectX的人都知道，干什么前都得先取得一个实例对像，其实只要简单调用D3DX为我们提供的一个函数就可完成：HRESULT D3DXCreateSprite(&nbsp; LPDIRECT3DDEVICE9 pDevice,&nbsp; LPD3DXSPRITE * ppSprite)这个函数如何调用，不用我解释了吧，碰过DriectX的人都应该知道他里面的意思。&nbsp;渲染准备：DirectX 9.0规定，运用ID3DXSprite渲染２Ｄ图形前，应先调用ID3DXSprite::Begin做准备工作，在渲染工作完成之后，调用ID3DXSprite::End做善后工作。格式如下：
g_pSprite->Begin(NULL);
//渲染代码部分。。。。
g_pSprite->End();
其中，ID3DXSprite::Begin接收一个参数，该参数将决定精灵以什么方式进行渲染，该参数可以为以下值之一：
·&nbsp;&nbsp; D3DXSPRITE_ALPHABLEND 
·&nbsp;&nbsp; D3DXSPRITE_BILLBOARD 
·&nbsp;&nbsp; D3DXSPRITE_DONOTMODIFY_RENDERSTATE 
·&nbsp;&nbsp; D3DXSPRITE_DONOTSAVESTATE 
·&nbsp;&nbsp; D3DXSPRITE_OBJECTSPACE 
·&nbsp;&nbsp; D3DXSPRITE_SORT_DEPTH_BACKTOFRONT 
·&nbsp;&nbsp; D3DXSPRITE_SORT_DEPTH_FRONTTOBACK 
·&nbsp;&nbsp; D3DXSPRITE_SORT_TEXTURE
上面的标志可以合并使用，标志意思可以从其名字中略知一二，而具体用法，后面将在运用到的时候加以介绍
&nbsp;
渲染：运用ID3DXSprite渲染２Ｄ图形其实好简单，只需调用ID3DXSprite::Draw接口，该接口原型如下：
HRESULT Draw(
&nbsp; LPDIRECT3DTEXTURE9 pTexture,
&nbsp; CONST RECT * pSrcRect,
&nbsp; CONST D3DXVECTOR3 * pCenter,
&nbsp; CONST D3DXVECTOR3 * pPosition,
&nbsp; D3DCOLOR Color
);
其中　参数一为精灵所用到的纹理。
参数二为要渲染的纹理矩形区域，意思上就像DirectDraw中所说的原位图矩形（指明要将纹理的哪一部分渲染到屏幕上）
参数三要求传入纹理的中心点坐标，如果传入ＮＵＬＬ则表明使用默认值，默认值为将纹理的左上角设为中心点。中心点的设定将关系到日后对精灵进行位移，旋转的效果
参数四为精灵在屏幕上的渲染位置，如要在屏幕的(100,100)像素位置渲染精灵，则应传入&amp;D3DXVECTOR3(<?XML:NAMESPACE PREFIX = ST1 />100.0f, 100.0f, 0.0f),其实参数三加参数四可以简单的理解为DirectDraw中所说的目的地矩形
参数五要求传入一个32位颜色值，在渲染时，纹理上的每一个像素的颜色值将与其进行相乘，得到最后的渲染颜色，如传入0x00000000，相乘后颜色值将为0，所以精灵将以全黑色渲染，这个参数还有一个用处，就是控制精灵的透明值：当用户在调用ID3DXSprite::Begin时传入D3DXSPRITE_ALPHABLEND标志，则表明打开精灵透明渲染功能，此时参数五的高８位用于指明渲染的透明度，例如：要完全不透明的渲染图像，应传入0xffffffff，要完全透明的渲染图像，应传入0x00ffffff。
&nbsp;
精灵位移，缩放，旋转等处理：可以通过调用ID3DXSprite::SetTransform实现，此接口要求传入一个变换矩阵，注意：这里的变换矩阵指的是变换２Ｄ平面上的坐标，而非我们平时常用的３Ｄ变换矩阵，２Ｄ平面变换矩阵应该调用函数D3DXMatrixTransformation2D得到，该函数的使用方法请参照DirectX9.0帮助文件。
&nbsp;
下面附上部分代码，大概实现效果为：在屏幕的(100,100)坐标处渲染一个２Ｄ精灵，该精灵被缩小为原来的十分之一，并附带0.5孤度的旋转，透明度为６０％左右
&nbsp;
//初始化精灵对像
D3DXCreateSprite(g_pDevice, &amp;g_pSprite);
&nbsp;
g_pDevice->BeginScene();
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; g_pDevice->Clear(0,NULL,D3DCLEAR_TARGET|D3DCLEAR_ZBUFFER|D3DCLEAR_STENCIL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DCOLOR_XRGB(0,0,0),1.0f,0L);
&nbsp;
g_pSprite->Begin(D3DXSPRITE_ALPHABLEND);
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; //得到２Ｄ坐标转换矩阵
&nbsp;&nbsp;&nbsp;&nbsp; D3DXMatrixTransformation2D(&amp;mat, NULL, 0.0f, &amp;D3DXVECTOR2(0.1f, 0.1f), 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;D3DXVECTOR2(50.0f, 50.0f), 0.5f, &amp;D3DXVECTOR2(100.0f, 100.0f));
&nbsp;&nbsp;&nbsp;&nbsp; g_pSprite->SetTransform(&amp;mat);
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; //渲染精灵
&nbsp;&nbsp;&nbsp;&nbsp; g_pSprite->Draw(g_ptexSprite, NULL, NULL, NULL, 0x99ffffff);
&nbsp;
g_pSprite->End();
&nbsp;
g_pDevice->EndScene();
&nbsp;
g_pDevice->Present(NULL, NULL, NULL, NULL);"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/directx9-tutorial-id3dxsprite-repost/ itemprop=url class=post-title-link>DirectX9.0教程之ID3DXSprite篇[转载]</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月06日 09:51:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-06 09:51:00 +0800 +0800">2007年08月06日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/directx9-tutorial-id3dxsprite-repost/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p style=text-indent:18pt;mso-char-indent-count:2><span style=font-size:9pt;mso-bidi-font-family:Arial><font face=宋体>前言：本教程面向对<span lang=EN-US>DriectX 9.0</span>有一定了解的读者，主要讲解<span lang=EN-US>DirectX 9.0</span>的各个部分的功能及用法。希望对广大的游戏初学者有一定帮助，也好让本人对中国游戏事业的发展做出一些微不足道的贡献。作者：<span lang=EN-US>Fabric</span>（由于本人是广东人，写文章难免参杂粤语写法，请见谅）<span lang=EN-US><o:p></o:p></span></font></span></p><p><span style=font-size:9pt;mso-bidi-font-family:Arial><font face=宋体>　　简介：<span lang=EN-US>ID3DXSprite</span>是<span lang=EN-US>DriectX 9.0</span>里面的一个简单模块，在<span lang=EN-US>DriectX 9.0</span>帮助文档里面对其功能的描术为：<span lang=EN-US>“</span>向用户提供一套简单的在屏幕上实现精灵渲染的接口。<span lang=EN-US>”</span>何为精灵渲染，说白了就是渲染２Ｄ画面，<span lang=EN-US>ID3DXSprite</span>帮助用户透过简单的操作就能运用<span lang=EN-US>DriectX 9.0</span>制作２Ｄ游戏（渲染２Ｄ图形），<span lang=EN-US>ID3DXSprite</span>的功能还包括：帮助用户在３Ｄ游戏里面实现<span lang=EN-US>“</span>公告牌<span lang=EN-US>”</span>技术。下面，将对如何使用<span lang=EN-US>ID3DXSprite</span>作详细分折。<span lang=EN-US><o:p></o:p></span></font></span></p><p><span style=font-size:9pt;mso-bidi-font-family:Arial><font face=宋体>　　得到一个<span lang=EN-US>ID3DXSprite</span>对像：玩过<span lang=EN-US>DriectX</span>的人都知道，干什么前都得先取得一个实例对像，其实只要简单调用<span lang=EN-US>D3DX</span>为我们提供的一个函数就可完成：<span lang=EN-US><o:p></o:p></span></font></span></p><pre><strong><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体>HRESULT D3DXCreateSprite(</span></strong><span lang=EN-US style=font-size:9pt><o:p></o:p></span></pre><pre><span lang=EN-US style=font-size:9pt><font face=宋体><span style=mso-spacerun:yes>&nbsp; </span><strong><span style=font-family:宋体;mso-bidi-font-family:宋体>LPDIRECT3DDEVICE9</span></strong> <em><span style=font-family:宋体;mso-bidi-font-family:宋体>pDevice</span></em></font><strong><span style=font-family:宋体;mso-bidi-font-family:宋体>,</span></strong><o:p></o:p></span></pre><pre><span lang=EN-US style=font-size:9pt><font face=宋体><span style=mso-spacerun:yes>&nbsp; </span><strong><span style=font-family:宋体;mso-bidi-font-family:宋体>LPD3DXSPRITE *</span></strong> <em><span style=font-family:宋体;mso-bidi-font-family:宋体>ppSprite</span></em></font><o:p></o:p></span></pre><pre><strong><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体>)</span></strong><span lang=EN-US style=font-size:9pt><o:p></o:p></span></pre><pre><span style=font-size:9pt;mso-bidi-font-family:Arial><font face=宋体>这个函数如何调用，不用我解释了吧，碰过<span lang=EN-US>DriectX</span>的人都应该知道他里面的意思。<span lang=EN-US><o:p></o:p></span></font></span></pre><pre><span lang=EN-US style=font-size:9pt><o:p><font face=宋体>&nbsp;</font></o:p></span></pre><pre style=text-indent:19.5pt><font face=宋体><span style=font-size:9pt;mso-bidi-font-family:Arial>渲染准备：<span lang=EN-US>DirectX 9.0</span>规定，运用<span lang=EN-US>ID3DXSprite</span>渲染２Ｄ图形前，应先调用</span><span lang=EN-US style=font-size:9pt>ID3DXSprite::Begin</span><span style=font-size:9pt;mso-bidi-font-family:Arial>做准备工作，</span></font><font face=宋体><span style=font-size:9pt;mso-bidi-font-family:Arial>在渲染工作完成之后，调用</span><span lang=EN-US style=font-size:9pt>ID3DXSprite::End</span><span style=font-size:9pt>做善后工作。格式如下：<span lang=EN-US><o:p></o:p></span></span></font></pre><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pSprite->Begin(NULL);<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;color:green;font-family:宋体;mso-font-kerning:0;mso-highlight:white>//</span><span style=font-size:9pt;background:#fff;color:green;font-family:宋体;mso-font-kerning:0;mso-highlight:white>渲染代码部分。。。。<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pSprite->End();<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>其中，</span><span lang=EN-US style=font-size:9pt;font-family:宋体>ID3DXSprite::Begin</span><span style=font-size:9pt;font-family:宋体>接收一个参数，该参数将决定精灵以什么方式进行渲染，该参数可以为以下值之一：<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_ALPHABLEND <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_BILLBOARD <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_DONOTMODIFY_RENDERSTATE <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_DONOTSAVESTATE <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_OBJECTSPACE <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_SORT_DEPTH_BACKTOFRONT <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_SORT_DEPTH_FRONTTOBACK <o:p></o:p></span></p><p class=MsoNormal style="margin:0 0 0 72pt;text-indent:-18pt;text-align:left;mso-pagination:widow-orphan;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;tab-stops:list 36pt;mso-list:l0 level1 lfo1" align=left><span lang=EN-US style=font-size:10pt;font-family:Symbol;mso-bidi-font-family:Symbol;mso-font-kerning:0;mso-bidi-font-size:9pt;mso-fareast-font-family:Symbol><span style=mso-list:Ignore>·<span style="font:7pt times new roman">&nbsp;&nbsp; </span></span></span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>D3DXSPRITE_SORT_TEXTURE<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>上面的标志可以合并使用，标志意思可以从其名字中略知一二，而具体用法，后面将在运用到的时候加以介绍<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>渲染：运用</span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:Arial>ID3DXSprite</span><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:Arial>渲染２Ｄ图形其实好简单，只需调用</span><span lang=EN-US style=font-size:9pt;font-family:宋体>ID3DXSprite::Draw</span><span style=font-size:9pt;font-family:宋体>接口，该接口原型如下：<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><strong><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>HRESULT Draw(</span></strong><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><o:p></o:p></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><span style=mso-spacerun:yes>&nbsp; </span><strong>LPDIRECT3DTEXTURE9</strong> <em>pTexture</em><strong>,</strong><o:p></o:p></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><span style=mso-spacerun:yes>&nbsp; </span><strong>CONST RECT *</strong> <em>pSrcRect</em><strong>,</strong><o:p></o:p></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><span style=mso-spacerun:yes>&nbsp; </span><strong>CONST D3DXVECTOR3 *</strong> <em>pCenter</em><strong>,</strong><o:p></o:p></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><span style=mso-spacerun:yes>&nbsp; </span><strong>CONST D3DXVECTOR3 *</strong> <em>pPosition</em><strong>,</strong><o:p></o:p></span></p><p class=MsoNormal style="margin:0;text-align:left;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229pt 274.8pt 320.6pt 366.4pt 412.2pt 458pt 503.8pt 549.6pt 595.4pt 641.2pt 687pt 732.8pt" align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0><span style=mso-spacerun:yes>&nbsp; </span><strong>D3DCOLOR</strong> <em>Color</em><o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><strong><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0>);<o:p></o:p></span></strong></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0;mso-bidi-font-weight:bold>其中　参数一为精灵所用到的纹理。<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:42.75pt;text-align:left;mso-char-indent-count:4.75;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0;mso-bidi-font-weight:bold>参数二为要渲染的纹理矩形区域，意思上就像<span lang=EN-US>DirectDraw</span>中所说的原位图矩形（指明要将纹理的哪一部分渲染到屏幕上）<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:42.75pt;text-align:left;mso-char-indent-count:4.75;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0;mso-bidi-font-weight:bold>参数三要求传入纹理的中心点坐标，如果传入ＮＵＬＬ则表明使用默认值，默认值为将纹理的左上角设为中心点。中心点的设定将关系到日后对精灵进行位移，旋转的效果<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:42.75pt;text-align:left;mso-char-indent-count:4.75;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0;mso-bidi-font-weight:bold>参数四为精灵在屏幕上的渲染位置，如要在屏幕的<span lang=EN-US>(100,100)</span>像素位置渲染精灵，则应传入<span lang=EN-US>&amp;D3DXVECTOR3(<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=100 unitname=F>100.0f</st1:chmetcnv>, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=100 unitname=F>100.0f</st1:chmetcnv>, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=0 unitname=F>0.0f</st1:chmetcnv>),</span>其实参数三加参数四可以简单的理解为<span lang=EN-US>DirectDraw</span>中所说的目的地矩形<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:42.75pt;text-align:left;mso-char-indent-count:4.75;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0;mso-bidi-font-weight:bold>参数五要求传入一个<span lang=EN-US>32</span>位颜色值，在渲染时，纹理上的每一个像素的颜色值将与其进行相乘，得到最后的渲染颜色，如传入<span lang=EN-US>0x00000000</span>，相乘后颜色值将为<span lang=EN-US>0</span>，所以精灵将以全黑色渲染，这个参数还有一个用处，就是控制精灵的透明值：当用户在调用</span><span lang=EN-US style=font-size:9pt;font-family:宋体>ID3DXSprite::Begin</span><span style=font-size:9pt;font-family:宋体>时传入<span lang=EN-US>D3DXSPRITE_ALPHABLEND</span>标志，则表明打开精灵透明渲染功能，此时参数五的高８位用于指明渲染的透明度，例如：要完全不透明的渲染图像，应传入<span lang=EN-US>0xffffffff</span>，要完全透明的渲染图像，应传入<span lang=EN-US>0x00ffffff</span>。<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体>精灵位移，缩放，旋转等处理：可以通过调用<span lang=EN-US>ID3DXSprite::SetTransform</span>实现，此接口要求传入一个变换矩阵，注意：这里的变换矩阵指的是变换２Ｄ平面上的坐标，而非我们平时常用的３Ｄ变换矩阵，２Ｄ平面变换矩阵应该调用函数<span lang=EN-US>D3DXMatrixTransformation2D</span>得到，该函数的使用方法请参照<span lang=EN-US>DirectX9.0</span>帮助文件。<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span style=font-size:9pt;font-family:宋体>下面附上部分代码，大概实现效果为：在屏幕的<span lang=EN-US>(100,100)</span>坐标处渲染一个２Ｄ精灵，该精灵被缩小为原来的十分之一，并附带<span lang=EN-US>0.5</span>孤度的旋转，透明度为６０％左右<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体>//</span><span style=font-size:9pt;font-family:宋体>初始化精灵对像<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>D3DXCreateSprite(g_pDevice, &amp;g_pSprite);</span><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-font-kerning:0><o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体;mso-font-kerning:0><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pDevice->BeginScene();<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>g_pDevice->Clear(0,NULL,D3DCLEAR_TARGET|D3DCLEAR_ZBUFFER|D3DCLEAR_STENCIL,<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>D3DCOLOR_XRGB(0,0,0),<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=1 unitname=F>1.0f</st1:chmetcnv>,<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=0 unitname=l>0L</st1:chmetcnv>);</span><span lang=EN-US style=font-size:9pt;font-family:宋体><o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;font-family:宋体><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pSprite->Begin(D3DXSPRITE_ALPHABLEND);<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>//</span><span style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>得到２Ｄ坐标转换矩阵<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>D3DXMatrixTransformation2D(&amp;mat, NULL, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=0 unitname=F>0.0f</st1:chmetcnv>, &amp;D3DXVECTOR2(<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=.1 unitname=F>0.1f</st1:chmetcnv>, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=.1 unitname=F>0.1f</st1:chmetcnv>), <o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&amp;D3DXVECTOR2(<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=50 unitname=F>50.0f</st1:chmetcnv>, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=50 unitname=F>50.0f</st1:chmetcnv>), <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=.5 unitname=F>0.5f</st1:chmetcnv>, &amp;D3DXVECTOR2(<st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=100 unitname=F>100.0f</st1:chmetcnv>, <st1:chmetcnv w:st=on tcsc=0 numbertype=1 negative=False hasspace=False sourcevalue=100 unitname=F>100.0f</st1:chmetcnv>));<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>g_pSprite->SetTransform(&amp;mat);<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>//</span><span style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>渲染精灵<span lang=EN-US><o:p></o:p></span></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><span style=mso-tab-count:1>&nbsp;&nbsp;&nbsp;&nbsp; </span>g_pSprite->Draw(g_ptexSprite, NULL, NULL, NULL, 0x99ffffff);<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pSprite->End();<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pDevice->EndScene();<o:p></o:p></span></p><p class=MsoNormal style=margin:0;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white><o:p>&nbsp;</o:p></span></p><p class=MsoNormal style=margin:0;text-indent:21pt;text-align:left;mso-layout-grid-align:none align=left><span lang=EN-US style=font-size:9pt;background:#fff;font-family:宋体;mso-font-kerning:0;mso-highlight:white>g_pDevice->Present(NULL, NULL, NULL, NULL);<span style=color:green><o:p></o:p></span></span></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/directx9-tutorial-id3dxsprite-repost/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-7/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（7）"><meta itemprop=description content="加入到MP3的革命中MP3是一种音频压缩格式，它通过删除或修改音乐中不易被人耳察觉的部分来使音乐更小，占用的存储空间更少。在项目中使用MP3（.MP3文件）需要使用DirectX中的 DirectShow组件，在这个组件的帮助下，只需几行短短的代码，就能使用任意的MP3文件了（DirectShow也支持其他的媒体文件，比如 WMA，AVI，MPG等）。当然要想使用更多的媒体文件，必须已经在操作系统中安装了解码器。解码器（codec）是一个程序，用于解码或编码一些指定的格式（比如MP3解码器专门解码.MP3文件）。通常可以从发明或者创建这种格式的公司中获取这种格式的解码器。比如，MP3解码器来自于Fraunhofer Insitute。幸运的是，MP3解码器等几种比较流行的解码器已经被集成到操作系统中（比如.mp3，.avi，.mpg等），而无需另外从 internet下载这些格式的解码器了。要在项目中使用DirectShow，需要包含dshow.h头文件，并且在链接库中加入strmiids.lib。使用DirectShowDirectX是一组COM接口组件，DirectShow也不例外，DirectShow中经常使用的组件如下：IGraphBuilder：  帮助建立滤波图，滤波过滤图是一组对象或接口的集合，用于处理某种媒体文件。IMediaControl：控制数据在滤波图中的流程，使用该接口控制音乐的回放。IMediaEvents：   从滤波图中获取事件及通告，当希望知道在滤波图中发生了什么的时候这个对象很有用，比如希望知道一个音乐是否仍然在播放或者已经停止播放。其中第一个接口IGraphBuilder是比较重要的对象，其他对象都依赖于它，或者靠它创建。它创建滤波器，用于处理媒体问题，另外很多有用的功能也是依靠这个对象。使用DirectShow播放MP3的第一步是调用 CoCreateInstance函数创建滤波图对象IGraphBuilder。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-7/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（7）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年08月04日 18:18:00 CST" itemprop="dateCreated datePublished" datetime="2007-08-04 18:18:00 +0800 +0800">2007年08月04日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:16:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:16:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-7/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#397498>加入到MP3的革命中</span><br><br>MP3是一种音频压缩格式，它通过删除或修改音乐中不易被人耳察觉的部分来使音乐更小，占用的存储空间更少。在项目中使用MP3（.MP3文件）需要使用DirectX中的 DirectShow组件，在这个组件的帮助下，只需几行短短的代码，就能使用任意的MP3文件了（DirectShow也支持其他的媒体文件，比如 WMA，AVI，MPG等）。当然要想使用更多的媒体文件，必须已经在操作系统中安装了解码器。<br><br>解码器（codec）是一个程序，用于解码或编码一些指定的格式（比如MP3解码器专门解码.MP3文件）。通常可以从发明或者创建这种格式的公司中获取这种格式的解码器。比如，MP3解码器来自于Fraunhofer Insitute。幸运的是，MP3解码器等几种比较流行的解码器已经被集成到操作系统中（比如.mp3，.avi，.mpg等），而无需另外从 internet下载这些格式的解码器了。<br><br>要在项目中使用DirectShow，需要包含dshow.h头文件，并且在链接库中加入strmiids.lib。<br><br><span style=font-weight:700;color:#397498>使用DirectShow</span><br><br>DirectX是一组COM接口组件，DirectShow也不例外，DirectShow中经常使用的组件如下：<br><br>IGraphBuilder：  帮助建立滤波图，滤波过滤图是一组对象或接口的集合，用于处理某种媒体文件。<br>IMediaControl：控制数据在滤波图中的流程，使用该接口控制音乐的回放。<br>IMediaEvents：   从滤波图中获取事件及通告，当希望知道在滤波图中发生了什么的时候这个对象很有用，比如希望知道一个音乐是否仍然在播放或者已经停止播放。<br><br>其中第一个接口IGraphBuilder是比较重要的对象，其他对象都依赖于它，或者靠它创建。它创建滤波器，用于处理媒体问题，另外很多有用的功能也是依靠这个对象。<br><br>使用DirectShow播放MP3的第一步是调用 CoCreateInstance函数创建滤波图对象IGraphBuilder。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-7/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-6/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（6）"><meta itemprop=description content="加载音色库（乐器）DirectMusic加载器在使用固有文件或者MIDI文件的时候会自动加载默认的音色库。乐器总是被一组一组地使用，很多组乐器音色的集合被称之为DLS音色库（可下载的音乐）。每组乐器使用三个值编号，它们是：最高有效位（most-significant byte，MSB），最低有效位（least-significant byte，LSB）和组编号。通常播放MIDI文件的乐器组是标准化的，也就是说编号为1的乐器总是钢琴，如果想使用新的钢琴作为乐器，可以从DLS集合中加载。DirectMusic包含了标准的乐器集合，通常称之为GM/GS集合（GM = General MIDI，GS = General Synthesizer），这个集合由日本罗兰（Roland）公司提出，称为MIDI合成器标准。如果使用新的乐器取代标准MIDI乐器库中的乐器，需要确定该乐器的MSB和LSB为0，否则就需要为乐器库中的每个乐器都尝试新的赋值，以免打乱乐器库乐器排列。如果只想修改音色库中的一对乐器，只需要将它们保存在乐器库中即可。在下次加载DLS的时候，就会自动用新修改的乐器覆盖住内存中的旧乐器。当DLS加载完成的时候，就可以通知DirectMusic使用音色库对音乐进行播放了。加载DLS音色库，需要从加载器中获取一个IDirectMusicCollection8对象，然后再次使用IDirectMusicLoader8::GetObject加载音色库，但是这一次指定的是音色库对象和音色库文件名。以下代码演示了如何加载指定的音色库："></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-6/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（6）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月31日 01:42:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-31 01:42:00 +0800 +0800">2007年07月31日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:17:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:17:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-6/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#905736>加载音色库（乐器）</span><br><br>DirectMusic加载器在使用固有文件或者MIDI文件的时候会自动加载默认的音色库。乐器总是被一组一组地使用，很多组乐器音色的集合被称之为DLS音色库（可下载的音乐）。每组乐器使用三个值编号，它们是：最高有效位（most-significant byte，MSB），最低有效位（least-significant byte，LSB）和组编号。<br><br>通常播放MIDI文件的乐器组是标准化的，也就是说编号为1的乐器总是钢琴，如果想使用新的钢琴作为乐器，可以从DLS集合中加载。DirectMusic包含了标准的乐器集合，通常称之为GM/GS集合（GM = General MIDI，GS = General Synthesizer），这个集合由日本罗兰（Roland）公司提出，称为MIDI合成器标准。<br><br>如果使用新的乐器取代标准MIDI乐器库中的乐器，需要确定该乐器的MSB和LSB为0，否则就需要为乐器库中的每个乐器都尝试新的赋值，以免打乱乐器库乐器排列。如果只想修改音色库中的一对乐器，只需要将它们保存在乐器库中即可。在下次加载DLS的时候，就会自动用新修改的乐器覆盖住内存中的旧乐器。当DLS加载完成的时候，就可以通知DirectMusic使用音色库对音乐进行播放了。<br><br>加载DLS音色库，需要从加载器中获取一个IDirectMusicCollection8对象，然后再次使用IDirectMusicLoader8::GetObject加载音色库，但是这一次指定的是音色库对象和音色库文件名。<br><br>以下代码演示了如何加载指定的音色库：<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-6/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-5/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（5）"><meta itemprop=description content="使用DirectMusic在DirectAudio 中，DirectSound负责数字音频方面的处理，而DirectMusic则负责Midi文件（Musical Instrument Data Interface，数字音乐格式，.mid作为文件扩展名），DirectMusic固有音乐文件（.sgt文件）和数字录音设备录制的波形格式文件（.wav文件）等文件的播放操作。能体现DirectMusic的强大之处是DirectMusic固有文件格式，一首用DirectMusic固有文件格式制作的音乐包括数个小音乐格式，这些样式还能用不同的乐器组合一个接一个地播放。随机的样式和乐器的选取创造出了随时都在改变的音乐，再加上节拍变化，就形成了一个魅力无穷的音乐系统。DirectMusic的另一个特性是可以使用“基调”，就是在正在播放的音乐片段上叠加一段其他音乐，新加入的音乐可以很平滑的融入到原有的音乐中。这在很多时候都有用，比如一个玩家完成了一个目标，可以马上播放一段“获得荣誉”的音乐提示他。除了传统的音符之外，Midi音乐中可以包含数字音频作为音符，比如枪声、猴子的尖叫、也或者是其他各种各样你觉得奇怪的东西。比如可以在游戏中使用曾经梦想到的最令你心惊胆颤的音乐，而这些MIDI音乐都能完成。使用数字乐谱还有一个巨大的好处，即音乐在所有的计算机上可以发出一致的声音，这点是通过使用统一的DirectSound合成器完成的，当然DirectMusic允许使用 DirectSound接口或者是个人创建的接口。音乐数据使用的合成器通道称为音频通道（Audio Path），你可以获取这个通道，并在普通的DirectSound音频缓冲中播放。使用Midi文件和 DirectMusic固有文件有共同的好处，那就是可以修改播放的节拍，这也是很有用的特性。有了这个特性，就可以设计随着屏幕动作而加速或者减速的背景音乐。如果游戏进入紧张的时期，就加速节拍，使音乐具有紧张感，如果高潮的活动结束，可以放慢节拍。数字录音设备所录制下来的音乐也是非常丰富多彩的，尽管这种音乐可以拥有非常高的音乐质量，但是这种歌曲不能被修改以便匹配游戏活动，也就是说这些音乐只能保持最开始录制的那个样子，不能有更多的变化，也不能减少里面的元素。开始使用DirectMusic使用 DirectMusic的第一步是创建一个主对象，我们把这个对象叫做演奏器对象（performance object），它表现整个音乐系统，第二步创建一个叫加载器（loader object）的对象，加载器加载所有原始的音乐文件。最后必须加载音乐小节到音乐片段对象（segment object）中，多个小节可以被同时加载，并一个接一个地播放，这可以让我们创建更具动态效果的音乐。DirectMusic并没有提供函数帮助创建或初始化DirectMusic主接口，所以需要自行初始化COM接口，初始化COM接口所调用的第一个函数是CoInitialize。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-5/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（5）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月31日 00:33:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-31 00:33:00 +0800 +0800">2007年07月31日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:17:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:17:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-5/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#137a2c>使用DirectMusic</span><br><br>在DirectAudio 中，DirectSound负责数字音频方面的处理，而DirectMusic则负责Midi文件（Musical Instrument Data Interface，数字音乐格式，.mid作为文件扩展名），DirectMusic固有音乐文件（.sgt文件）和数字录音设备录制的波形格式文件（.wav文件）等文件的播放操作。<br><br>能体现DirectMusic的强大之处是DirectMusic固有文件格式，一首用DirectMusic固有文件格式制作的音乐包括数个小音乐格式，这些样式还能用不同的乐器组合一个接一个地播放。随机的样式和乐器的选取创造出了随时都在改变的音乐，再加上节拍变化，就形成了一个魅力无穷的音乐系统。DirectMusic的另一个特性是可以使用“基调”，就是在正在播放的音乐片段上叠加一段其他音乐，新加入的音乐可以很平滑的融入到原有的音乐中。这在很多时候都有用，比如一个玩家完成了一个目标，可以马上播放一段“获得荣誉”的音乐提示他。<br><br>除了传统的音符之外，Midi音乐中可以包含数字音频作为音符，比如枪声、猴子的尖叫、也或者是其他各种各样你觉得奇怪的东西。比如可以在游戏中使用曾经梦想到的最令你心惊胆颤的音乐，而这些MIDI音乐都能完成。使用数字乐谱还有一个巨大的好处，即音乐在所有的计算机上可以发出一致的声音，这点是通过使用统一的DirectSound合成器完成的，当然DirectMusic允许使用 DirectSound接口或者是个人创建的接口。音乐数据使用的合成器通道称为音频通道（Audio Path），你可以获取这个通道，并在普通的DirectSound音频缓冲中播放。<br><br>使用Midi文件和 DirectMusic固有文件有共同的好处，那就是可以修改播放的节拍，这也是很有用的特性。有了这个特性，就可以设计随着屏幕动作而加速或者减速的背景音乐。如果游戏进入紧张的时期，就加速节拍，使音乐具有紧张感，如果高潮的活动结束，可以放慢节拍。数字录音设备所录制下来的音乐也是非常丰富多彩的，尽管这种音乐可以拥有非常高的音乐质量，但是这种歌曲不能被修改以便匹配游戏活动，也就是说这些音乐只能保持最开始录制的那个样子，不能有更多的变化，也不能减少里面的元素。<br><br><span style=font-weight:700;color:#137a2c>开始使用DirectMusic</span><br><br>使用 DirectMusic的第一步是创建一个主对象，我们把这个对象叫做演奏器对象（performance object），它表现整个音乐系统，第二步创建一个叫加载器（loader object）的对象，加载器加载所有原始的音乐文件。最后必须加载音乐小节到音乐片段对象（segment object）中，多个小节可以被同时加载，并一个接一个地播放，这可以让我们创建更具动态效果的音乐。<br><br>DirectMusic并没有提供函数帮助创建或初始化DirectMusic主接口，所以需要自行初始化COM接口，初始化COM接口所调用的第一个函数是CoInitialize。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-5/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-4/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（4）"><meta itemprop=description content="使用通告“通告”是一种触发机制，当缓存中播放位置达到某个固定的位置时，就会向程序发出通知。有了通告，就可以知道播放什么时候结束，这种机制在比较长的声音中特别有效。通告使用一个叫做 IDirectSoundNotify8的对象，这个程序的作用就是在音频缓存中标记一个位置，然后触发事件通知应用程序，而应用程序可以通过消息循环或者单独的线程进行处理。标记的位置可以是一个缓存中的偏移值，也可以是由宏指定的停止标记，这个表示停止的宏是 DSBPN_OFFSETSTOP。并不是任何偏移值都可以用来作为通告发生的位置，这个值必须和音频的数据块对齐，并且通告的偏移必须按照从小到大的顺序排列。偏移值是不能够共享的，如果使用 DSBPN_OFFSETSTOP宏，它必须被放在最后。举例来说，对于一个块大小为2的音频（单声道、16位），尝试对偏移为4和5的位置设通告会导致失败，因为偏移量位置4和5都在同一个数据块中。如果要在缓存中使用通告，必须在创建缓存的时候使用 DSBCAPS_CTRLPOSITIONNOTIFY标志，并且如果在创建缓存的过程中使用了这个标志，就必须使用通告对象。如果希望获取 IDirectSoundNotify8对象，可以在IDirectSoundBuffer8对象中通过请求接口来获得。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-4/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（4）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月29日 14:09:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-29 14:09:00 +0800 +0800">2007年07月29日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:18:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:18:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-4/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#aa2a42>使用通告</span><br><br>“通告”是一种触发机制，当缓存中播放位置达到某个固定的位置时，就会向程序发出通知。有了通告，就可以知道播放什么时候结束，这种机制在比较长的声音中特别有效。通告使用一个叫做 IDirectSoundNotify8的对象，这个程序的作用就是在音频缓存中标记一个位置，然后触发事件通知应用程序，而应用程序可以通过消息循环或者单独的线程进行处理。<br><br>标记的位置可以是一个缓存中的偏移值，也可以是由宏指定的停止标记，这个表示停止的宏是 DSBPN_OFFSETSTOP。并不是任何偏移值都可以用来作为通告发生的位置，这个值必须和音频的数据块对齐，并且通告的偏移必须按照从小到大的顺序排列。偏移值是不能够共享的，如果使用 DSBPN_OFFSETSTOP宏，它必须被放在最后。举例来说，对于一个块大小为2的音频（单声道、16位），尝试对偏移为4和5的位置设通告会导致失败，因为偏移量位置4和5都在同一个数据块中。<br><br>如果要在缓存中使用通告，必须在创建缓存的时候使用 DSBCAPS_CTRLPOSITIONNOTIFY标志，并且如果在创建缓存的过程中使用了这个标志，就必须使用通告对象。如果希望获取 IDirectSoundNotify8对象，可以在IDirectSoundBuffer8对象中通过请求接口来获得。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-4/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" rel=prev href=/page/53/><i class="fa fa-angle-left"></i>
</a><a class=page-number href=/page/50/>50</a>
<a class=page-number href=/page/51/>51</a>
<a class=page-number href=/page/52/>52</a>
<a class=page-number href=/page/53/>53</a>
<span class="page-number current">54</span>
<a class=page-number href=/page/55/>55</a>
<a class=page-number href=/page/56/>56</a>
<a class=page-number href=/page/57/>57</a>
<a class=page-number href=/page/58/>58</a>
<a class="extend next" rel=next href=/page/55/><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2026
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.157.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":true,"isPage":false,"path":"blogs.qipai360.cn","permalink":"https://blogs.qipai360.cn/","title":"Rise的自留地","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1772265585" defer></script></body></html>