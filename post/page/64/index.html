<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.157.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Posts"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="Rise,ZhangTuohui,技术,C++,Unity3D,Lua,NodeJS,C#,JavaScript,游戏开发,机器学习,深度学习,AI,编程,编程语言,编程技术,编程开发,游戏引擎,游戏设计,游戏制作,游戏开发者,游戏开发者博客,游戏开发者网站,游戏开发者工具,游戏开发者教程,游戏开发者学习,游戏开发者交流,游戏开发者分享,游戏开发者经验,游戏开发者心得,游戏开发者技巧,游戏开发者方法,游戏开发者思路,游戏开发者理念,游戏开发者文化,游戏开发者精神,游戏开发者信仰"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1772265588"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>post - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>679</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>679</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>35</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>118</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2423147></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5207></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2026-02-28 15:59:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/vc2005-mobile-development-issues/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="VC2005开发移动程序的小问题"><meta itemprop=description content="昨日写个小程序,加了几个CStatic,不知道为什么,只显示一个,搞了半天,最后为每个CStatic加一个ID才行,不知道有没有遇到同样的问题的朋友."></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/vc2005-mobile-development-issues/ itemprop=url class=post-title-link>VC2005开发移动程序的小问题</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2006年06月07日 17:59:00 CST" itemprop="dateCreated datePublished" datetime="2006-06-07 17:59:00 +0800 +0800">2006年06月07日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/win32dev/ itemprop=url rel=index><span itemprop=name>dev/Win32Dev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/vc2005-mobile-development-issues/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>昨日写个小程序,加了几个CStatic,不知道为什么,只显示一个,搞了半天,最后为每个CStatic加一个ID才行,不知道有没有遇到同样的问题的朋友.</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/vc2005-mobile-development-issues/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/ping-source-code/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="ping的源代码"><meta itemprop=description content="

  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400


// Module Name: Ping.c
//
// Code by Rise
//
// Command Line Options/Parameters:
//        Ping [host] [packet-size]
//
//        host        String name of host to ping
//        packet-size    Integer size of packet to send (smaller than 1024 bytes)
//
//#pragma pack(1)

#define WIN32_LEAN_AND_MEAN
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>
#include <stdlib.h>

#define IP_RECORD_ROUTE 0x7
//
// IP header structure
//
typedef struct _iphdr
{
    unsigned int    h_len:4;        // Length of the header
    unsigned int    version:4;        // Version of IP
    unsigned char     tos;            // Type of service
    unsigned short    total_len;        // Total length of the packet
    unsigned short    ident;            // Unique identifier
    unsigned short    frag_and_flags;    // Flags
    unsigned short    ttl;            // Time to live
    unsigned short    proto;            // Protocol (TCP, UDP, etc.)
    unsigned short    checksum;        // IP checksum
    
    unsigned int        sourceIP;
    unsigned int        destIP;
}IpHeader;

#define ICMP_ECHO        8
#define ICMP_ECHOREPLY    0
#define ICMP_MIN        8    // Minimun 8-byte ICMP packet (header)

//
// ICMP header structure
//
typedef struct _icmphdr
{
    BYTE        i_type;
    BYTE        i_code;        // Type sub code
    USHORT    i_cksum;
    USHORT    i_id;
    USHORT    i_seq;
    // This is not the standard header, but we reserve space for time
    ULONG timestamp;
}IcmpHeader;

//
// IP option header – use with socket option IP_OPTIONS
//
typedef struct _ipoptionhdr
{
    unsigned char    code;        // Option type
    unsigned char    len;        // Length of option hdr
    unsigned char    prt;        // Offset into options
    unsigned long    addr[9];    // List of IP addrs
}IpOptionHeader;
#define DEF_PACKET_SIZE 32        // Default packet size
#define MAX_PACKET        1024    // Max ICMP packet size
#define MAX_IP_HDR_SIZE    60        // Max IP header size w/options

BOOL    bRecordRoute;
int        datasize;
char*    lpdest;

//
// Function: usage
//
// Description:
//        Print usage information
//
void usage(char* progname)
{
    printf(“usage: ping -r <host> [data size]\n”);
    printf(“    -r        record route\n”);
    printf(“    host    remote machine to Ping\n”);
    printf(“    datasize    can be up to 1 KB\n”);
    ExitProcess(-1);
}

//
// Function: FillICMPData
//
// Description:
//        Helper function to fill in various fields for our ICMP request
//
void FillICMPData(char* icmp_data, int datasize)
{
    IcmpHeader*    icmp_hdr = NULL;
    char*        datapart = NULL;
    
    icmp_hdr = (IcmpHeader*)icmp_data;
    icmp_hdr->i_type = ICMP_ECHO;        // Request an ICMP echo
    icmp_hdr->i_code = 0;
    icmp_hdr->i_id = (USHORT)GetCurrentProcessId();
    icmp_hdr->i_cksum = 0;
    icmp_hdr->i_seq = 0;
    
    datapart = icmp_data + sizeof(IcmpHeader);
    //
    // Place some junk in the buffer
    //
    memset(datapart, ‘E’, datasize - sizeof(IcmpHeader));
}

//
// Function: checksum
//
// Description:
//        This funcion calculates the 16-bit one’s complement sum
//        of the supplied buffer (ICMP)header
//
USHORT checksum(USHORT* buffer, int size)
{
    unsigned long cksum = 0 ;
    
    while(size > 1)
    {
        cksum += buffer++;
        size -= sizeof(USHORT);
    }
    if(size)
    {
        cksum += (UCHAR)buffer;
    }
    cksum = (cksum>>16)+(cksum&amp;0xffff);
    cksum += (cksum>>16);
    return (USHORT)(~cksum);
}

//
// Function: DecodeIPOptions
//
// Description:
//        If the IP option header is present. find the IP options
//        within the IP header and print the record route option
//        values
//
void DecodeIPOptions(charbuf,int bytes)
{
    IpOptionHeader* ipopt = NULL;
    IN_ADDR    inaddr;
    int     i;
    HOSTENT host = NULL;
    
    ipopt = (IpOptionHeader)(buf + 20);
    
    printf(“RR:    ”);
    for(i=0;i<(ipopt->prt/4)-1;i++)
    {
        inaddr.S_un.S_addr = ipopt->addr[i];
        if(i != 0 )
            printf(“    ”);
        host = gethostbyaddr((char*)&amp;inaddr.S_un.S_addr, sizeof(inaddr.S_un.S_addr), AF_INET);
        if(host)
            printf(“(%-15s) %s\n”, inet_ntoa(inaddr), host->h_name);
        else
            printf(“(%-15s)\n”, inet_ntoa(inaddr));
    }
    return;
}

//
// Function: DecodeICMPHeader
//
// Description:
//        The response is an IP packet. We must decode the IP header to locate the ICMP data.
//
void DecodeICMPHeader(char* buf, int bytes, struct sockaddr_in from)
{
    IpHeader    iphdr = NULL;
    IcmpHeader*    icmphdr = NULL;
    unsigned short iphdrlen;
    DWORD        tick;
    static int    icmpcount = 0;
    
    iphdr = (IpHeader*)buf;
    // Number of 32-bit words * 4 = bytes
    iphdrlen = iphdr->h_len * 4;
    tick = GetTickCount();
    
    if((iphdrlen == MAX_IP_HDR_SIZE)&&(!icmpcount))
        DecodeIPOptions(buf,bytes);
    if(bytes < iphdrlen + ICMP_MIN)
    {
        printf(“Too Few bytes from %s\n”,inet_ntoa(from->sin_addr));
    }
    icmphdr = (IcmpHeader*)(buf + iphdrlen);
    
    if(icmphdr->i_type != ICMP_ECHOREPLY)
    {
        printf(“nonecho type %d recvd\n”, icmphdr->i_type);
        return;
    }
    // Make sure this is an ICMP reply to something we sent!
    //
    if(icmphdr->i_id != (USHORT)GetCurrentProcessId())
    {
        printf(“someone else’s packet!\n”);
        return;
    }
    printf(“%d bytes from %s:”, bytes, inet_ntoa(from->sin_addr));
    printf(“ icmp->seq = %d.”, icmphdr->i_seq);
    printf(“ time: %d ms”, tick-icmphdr->timestamp);
    printf(“\n”);
    
    icmpcount++;
    return;
}

void ValidateArgs(int argc, char argv)
{
    int i;
    bRecordRoute = FALSE;
    lpdest = NULL;
    datasize = DEF_PACKET_SIZE;
    
    for(i = 1; i < argc; i++)
    {
        if((argv[i][0] == ‘-‘)||(argv[i][0] == ‘/‘))
        {
            switch(tolower(argv[i][1]))
            {
                case ‘r’:        // Record route option
                    bRecordRoute = TRUE;
                    break;
                default:
                    usage(argv[0]);
                    break;
            }
        }
        else if(isdigit(argv[i][0]))
            datasize = atoi(argv[i]);
        else
            lpdest = argv[i];
    }
}

//
// Function: main
//
// Description
//        Set up the ICMP raw socket, and create the ICMP header. Add
//        the appropriate IP ooption header, and start sending ICMP
//        echo requests to the endpoint. For each send and receive.
//        we set a timeout value so that we don’t wait forever for a
//        response in case the endpoint is not responding. When we
//        receive a packet. decode it.
//
int main(int argc, char argv)
{
    WSADATA    wsaData;
    SOCKET    sockRaw = INVALID_SOCKET;
    struct sockaddr_in dest, from;
    int        bread, fromlen = sizeof(from), timeout = 1000, ret;
    char    icmp_data = NULL, recvbuf = NULL;
    unsigned int addr = 0;
    USHORT    seq_no = 0;
    struct hostent hp = NULL;
    IpOptionHeader ipopt;
    
    if(WSAStartup(MAKEWORD(2, 2), &amp;wsaData) != 0)
    {
        printf(“WSAStartup() failed: %d\n”, GetLastError());
        return -1;
    }
    ValidateArgs(argc,argv);
    sockRaw = WSASocket(AF_INET, SOCK_RAW, IPPROTO_ICMP, NULL, 0, WSA_FLAG_OVERLAPPED);
    if(sockRaw == INVALID_SOCKET)
    {
        printf(“WSASocket() failed: %d\n”, WSAGetLastError());
        return -1;
    }
    if(bRecordRoute)
    {
        // Setup the IP option header to go out on every ICMP packet
        //
        ZeroMemory(&amp;ipopt, sizeof(ipopt));
        ipopt.code = IP_RECORD_ROUTE;    // Record route option
        ipopt.prt  = 4;                    // Point to the first addr offset
        ipopt.len  = 39;                // Length of option header
        
        ret = setsockopt(sockRaw, IPPROTO_IP, IP_OPTIONS, (char)&amp;ipopt, sizeof(ipopt));
        if(ret == SOCKET_ERROR)
        {
            printf(“setsockopt(IP_OPTIONs) failed: %d\n”,WSAGetLastError());
        }
    }
    // Set the send/recv timeout values
    //
    bread = setsockopt(sockRaw, SOL_SOCKET, SO_RCVTIMEO, (char)&amp;timeout, sizeof(timeout));
    if(bread == SOCKET_ERROR)
    {
        printf(“setsockopt(SO_RCVTIME0)failed: %d\n”, WSAGetLastError());
        return -1;
    }
    timeout = 1000;
    bread = setsockopt(sockRaw, SOL_SOCKET, SO_SNDTIMEO, (char)&amp;timeout, sizeof(timeout));
    if(bread == SOCKET_ERROR)
    {
        printf(“setsockopt(SO_SNDTIME0) failed: %d\n”, WSAGetLastError());
        return -1;
    }
    memset(&amp;dest, 0, sizeof(dest));
    //
    // Resolve the endpoint`s name if necessary
    //
    dest.sin_family = AF_INET;
    if((dest.sin_addr.s_addr = inet_addr(lpdest)) == INADDR_NONE)
    {
        if((hp = gethostbyname(lpdest)) != NULL)
        {
            memcpy(&(dest.sin_addr), hp->h_addr, hp->h_length);
            dest.sin_family = hp->h_addrtype;
            printf(“dest.sin_addr = %s\n”, inet_ntoa(dest.sin_addr));
        }
        else
        {
            printf(“gethostbyname() failed: %d\n”,WSAGetLastError());
            return -1;
        }
    }
    
    //
    // Create the ICMP packet
    //
    datasize += sizeof(IcmpHeader);
    icmp_data = HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, MAX_PACKET);
    recvbuf = HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, MAX_PACKET);
    if(!icmp_data)
    {
        printf(“HeapAlloc() failed: %d\n”,GetLastError());
        return -1;
    }
    memset(icmp_data, 0, MAX_PACKET);
    FillICMPData(icmp_data, datasize);
    //
    // Start sending/receiving ICMP packets
    //
    while(1)
    {
        static int nCount = 0;
        int bwrote;
        
        if(nCount++ ==4)
            break;
        ((IcmpHeader*)icmp_data)->i_cksum = 0;
        ((IcmpHeader*)icmp_data)->timestamp = GetTickCount();
        ((IcmpHeader*)icmp_data)->i_seq = seq_no++;
        ((IcmpHeader*)icmp_data)->i_cksum = checksum((USHORT*)icmp_data, datasize, 0, (struct sockaddr*)&amp;dest, sizeof(dest));
        
        bwrote = sendto(sockRaw, icmp_data, datasize, 0, (struct sockaddr*)&amp;dest, sizeof(dest));
        if(bwrote == SOCKET_ERROR)
        {
            if(WSAGetLastError() == WSAETIMEDOUT)
            {
                printf(“timed out\n”);
                continue;
            }
            printf(“recvfrom() failed: %d\n”, WSAGetLastError());
            return -1;
        }
        if(bwrote < datasize)
        {
            printf(“Wrote %d bytes\n”, bwrote);
        }
        bread = recvfrom(sockRaw, recvbuf, MAX_PACKET, 0, (struct sockaddr*)&amp;from, &amp;fromlen);
        if(bread == SOCKET_ERROR)
        {
            if(WSAGetLastError() == WSAETIMEDOUT)
            {
                printf(“timed out\n”);
                continue;
            }
            printf(“recvfrom() failed: %d\n”, WSAGetLastError());
        }
        DecodeICMPHeader(recvbuf, bread, &amp;from);
        
        Sleep(1000);
    }
    
    //Cleanup
    //
    if(sockRaw != INVALID_SOCKET)
        closesocket(sockRaw);
    HeapFree(GetProcessHeap(), 0, recvbuf);
    HeapFree(GetProcessHeap(), 0, icmp_data);
    
    WSACleanup();
    return 0;
}

"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/ping-source-code/ itemprop=url class=post-title-link>ping的源代码</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2006年03月12日 11:15:00 CST" itemprop="dateCreated datePublished" datetime="2006-03-12 11:15:00 +0800 +0800">2006年03月12日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/win32/ itemprop=url rel=index><span itemprop=name>dev/c++/win32</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/ping-source-code/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>  1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>  2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>  3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>  4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>  5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>  6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>  7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>  8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9>  9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10> 10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11> 11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12> 12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13> 13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14> 14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15> 15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16> 16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17> 17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18> 18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19> 19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20> 20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21> 21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22> 22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23> 23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24> 24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25> 25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26> 26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27> 27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28> 28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29> 29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30> 30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31> 31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32> 32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33> 33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34> 34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35> 35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36> 36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37> 37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38> 38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39> 39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40> 40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41> 41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42> 42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43> 43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44> 44</a>
</span><span class=lnt id=hl-0-45><a class=lnlinks href=#hl-0-45> 45</a>
</span><span class=lnt id=hl-0-46><a class=lnlinks href=#hl-0-46> 46</a>
</span><span class=lnt id=hl-0-47><a class=lnlinks href=#hl-0-47> 47</a>
</span><span class=lnt id=hl-0-48><a class=lnlinks href=#hl-0-48> 48</a>
</span><span class=lnt id=hl-0-49><a class=lnlinks href=#hl-0-49> 49</a>
</span><span class=lnt id=hl-0-50><a class=lnlinks href=#hl-0-50> 50</a>
</span><span class=lnt id=hl-0-51><a class=lnlinks href=#hl-0-51> 51</a>
</span><span class=lnt id=hl-0-52><a class=lnlinks href=#hl-0-52> 52</a>
</span><span class=lnt id=hl-0-53><a class=lnlinks href=#hl-0-53> 53</a>
</span><span class=lnt id=hl-0-54><a class=lnlinks href=#hl-0-54> 54</a>
</span><span class=lnt id=hl-0-55><a class=lnlinks href=#hl-0-55> 55</a>
</span><span class=lnt id=hl-0-56><a class=lnlinks href=#hl-0-56> 56</a>
</span><span class=lnt id=hl-0-57><a class=lnlinks href=#hl-0-57> 57</a>
</span><span class=lnt id=hl-0-58><a class=lnlinks href=#hl-0-58> 58</a>
</span><span class=lnt id=hl-0-59><a class=lnlinks href=#hl-0-59> 59</a>
</span><span class=lnt id=hl-0-60><a class=lnlinks href=#hl-0-60> 60</a>
</span><span class=lnt id=hl-0-61><a class=lnlinks href=#hl-0-61> 61</a>
</span><span class=lnt id=hl-0-62><a class=lnlinks href=#hl-0-62> 62</a>
</span><span class=lnt id=hl-0-63><a class=lnlinks href=#hl-0-63> 63</a>
</span><span class=lnt id=hl-0-64><a class=lnlinks href=#hl-0-64> 64</a>
</span><span class=lnt id=hl-0-65><a class=lnlinks href=#hl-0-65> 65</a>
</span><span class=lnt id=hl-0-66><a class=lnlinks href=#hl-0-66> 66</a>
</span><span class=lnt id=hl-0-67><a class=lnlinks href=#hl-0-67> 67</a>
</span><span class=lnt id=hl-0-68><a class=lnlinks href=#hl-0-68> 68</a>
</span><span class=lnt id=hl-0-69><a class=lnlinks href=#hl-0-69> 69</a>
</span><span class=lnt id=hl-0-70><a class=lnlinks href=#hl-0-70> 70</a>
</span><span class=lnt id=hl-0-71><a class=lnlinks href=#hl-0-71> 71</a>
</span><span class=lnt id=hl-0-72><a class=lnlinks href=#hl-0-72> 72</a>
</span><span class=lnt id=hl-0-73><a class=lnlinks href=#hl-0-73> 73</a>
</span><span class=lnt id=hl-0-74><a class=lnlinks href=#hl-0-74> 74</a>
</span><span class=lnt id=hl-0-75><a class=lnlinks href=#hl-0-75> 75</a>
</span><span class=lnt id=hl-0-76><a class=lnlinks href=#hl-0-76> 76</a>
</span><span class=lnt id=hl-0-77><a class=lnlinks href=#hl-0-77> 77</a>
</span><span class=lnt id=hl-0-78><a class=lnlinks href=#hl-0-78> 78</a>
</span><span class=lnt id=hl-0-79><a class=lnlinks href=#hl-0-79> 79</a>
</span><span class=lnt id=hl-0-80><a class=lnlinks href=#hl-0-80> 80</a>
</span><span class=lnt id=hl-0-81><a class=lnlinks href=#hl-0-81> 81</a>
</span><span class=lnt id=hl-0-82><a class=lnlinks href=#hl-0-82> 82</a>
</span><span class=lnt id=hl-0-83><a class=lnlinks href=#hl-0-83> 83</a>
</span><span class=lnt id=hl-0-84><a class=lnlinks href=#hl-0-84> 84</a>
</span><span class=lnt id=hl-0-85><a class=lnlinks href=#hl-0-85> 85</a>
</span><span class=lnt id=hl-0-86><a class=lnlinks href=#hl-0-86> 86</a>
</span><span class=lnt id=hl-0-87><a class=lnlinks href=#hl-0-87> 87</a>
</span><span class=lnt id=hl-0-88><a class=lnlinks href=#hl-0-88> 88</a>
</span><span class=lnt id=hl-0-89><a class=lnlinks href=#hl-0-89> 89</a>
</span><span class=lnt id=hl-0-90><a class=lnlinks href=#hl-0-90> 90</a>
</span><span class=lnt id=hl-0-91><a class=lnlinks href=#hl-0-91> 91</a>
</span><span class=lnt id=hl-0-92><a class=lnlinks href=#hl-0-92> 92</a>
</span><span class=lnt id=hl-0-93><a class=lnlinks href=#hl-0-93> 93</a>
</span><span class=lnt id=hl-0-94><a class=lnlinks href=#hl-0-94> 94</a>
</span><span class=lnt id=hl-0-95><a class=lnlinks href=#hl-0-95> 95</a>
</span><span class=lnt id=hl-0-96><a class=lnlinks href=#hl-0-96> 96</a>
</span><span class=lnt id=hl-0-97><a class=lnlinks href=#hl-0-97> 97</a>
</span><span class=lnt id=hl-0-98><a class=lnlinks href=#hl-0-98> 98</a>
</span><span class=lnt id=hl-0-99><a class=lnlinks href=#hl-0-99> 99</a>
</span><span class=lnt id=hl-0-100><a class=lnlinks href=#hl-0-100>100</a>
</span><span class=lnt id=hl-0-101><a class=lnlinks href=#hl-0-101>101</a>
</span><span class=lnt id=hl-0-102><a class=lnlinks href=#hl-0-102>102</a>
</span><span class=lnt id=hl-0-103><a class=lnlinks href=#hl-0-103>103</a>
</span><span class=lnt id=hl-0-104><a class=lnlinks href=#hl-0-104>104</a>
</span><span class=lnt id=hl-0-105><a class=lnlinks href=#hl-0-105>105</a>
</span><span class=lnt id=hl-0-106><a class=lnlinks href=#hl-0-106>106</a>
</span><span class=lnt id=hl-0-107><a class=lnlinks href=#hl-0-107>107</a>
</span><span class=lnt id=hl-0-108><a class=lnlinks href=#hl-0-108>108</a>
</span><span class=lnt id=hl-0-109><a class=lnlinks href=#hl-0-109>109</a>
</span><span class=lnt id=hl-0-110><a class=lnlinks href=#hl-0-110>110</a>
</span><span class=lnt id=hl-0-111><a class=lnlinks href=#hl-0-111>111</a>
</span><span class=lnt id=hl-0-112><a class=lnlinks href=#hl-0-112>112</a>
</span><span class=lnt id=hl-0-113><a class=lnlinks href=#hl-0-113>113</a>
</span><span class=lnt id=hl-0-114><a class=lnlinks href=#hl-0-114>114</a>
</span><span class=lnt id=hl-0-115><a class=lnlinks href=#hl-0-115>115</a>
</span><span class=lnt id=hl-0-116><a class=lnlinks href=#hl-0-116>116</a>
</span><span class=lnt id=hl-0-117><a class=lnlinks href=#hl-0-117>117</a>
</span><span class=lnt id=hl-0-118><a class=lnlinks href=#hl-0-118>118</a>
</span><span class=lnt id=hl-0-119><a class=lnlinks href=#hl-0-119>119</a>
</span><span class=lnt id=hl-0-120><a class=lnlinks href=#hl-0-120>120</a>
</span><span class=lnt id=hl-0-121><a class=lnlinks href=#hl-0-121>121</a>
</span><span class=lnt id=hl-0-122><a class=lnlinks href=#hl-0-122>122</a>
</span><span class=lnt id=hl-0-123><a class=lnlinks href=#hl-0-123>123</a>
</span><span class=lnt id=hl-0-124><a class=lnlinks href=#hl-0-124>124</a>
</span><span class=lnt id=hl-0-125><a class=lnlinks href=#hl-0-125>125</a>
</span><span class=lnt id=hl-0-126><a class=lnlinks href=#hl-0-126>126</a>
</span><span class=lnt id=hl-0-127><a class=lnlinks href=#hl-0-127>127</a>
</span><span class=lnt id=hl-0-128><a class=lnlinks href=#hl-0-128>128</a>
</span><span class=lnt id=hl-0-129><a class=lnlinks href=#hl-0-129>129</a>
</span><span class=lnt id=hl-0-130><a class=lnlinks href=#hl-0-130>130</a>
</span><span class=lnt id=hl-0-131><a class=lnlinks href=#hl-0-131>131</a>
</span><span class=lnt id=hl-0-132><a class=lnlinks href=#hl-0-132>132</a>
</span><span class=lnt id=hl-0-133><a class=lnlinks href=#hl-0-133>133</a>
</span><span class=lnt id=hl-0-134><a class=lnlinks href=#hl-0-134>134</a>
</span><span class=lnt id=hl-0-135><a class=lnlinks href=#hl-0-135>135</a>
</span><span class=lnt id=hl-0-136><a class=lnlinks href=#hl-0-136>136</a>
</span><span class=lnt id=hl-0-137><a class=lnlinks href=#hl-0-137>137</a>
</span><span class=lnt id=hl-0-138><a class=lnlinks href=#hl-0-138>138</a>
</span><span class=lnt id=hl-0-139><a class=lnlinks href=#hl-0-139>139</a>
</span><span class=lnt id=hl-0-140><a class=lnlinks href=#hl-0-140>140</a>
</span><span class=lnt id=hl-0-141><a class=lnlinks href=#hl-0-141>141</a>
</span><span class=lnt id=hl-0-142><a class=lnlinks href=#hl-0-142>142</a>
</span><span class=lnt id=hl-0-143><a class=lnlinks href=#hl-0-143>143</a>
</span><span class=lnt id=hl-0-144><a class=lnlinks href=#hl-0-144>144</a>
</span><span class=lnt id=hl-0-145><a class=lnlinks href=#hl-0-145>145</a>
</span><span class=lnt id=hl-0-146><a class=lnlinks href=#hl-0-146>146</a>
</span><span class=lnt id=hl-0-147><a class=lnlinks href=#hl-0-147>147</a>
</span><span class=lnt id=hl-0-148><a class=lnlinks href=#hl-0-148>148</a>
</span><span class=lnt id=hl-0-149><a class=lnlinks href=#hl-0-149>149</a>
</span><span class=lnt id=hl-0-150><a class=lnlinks href=#hl-0-150>150</a>
</span><span class=lnt id=hl-0-151><a class=lnlinks href=#hl-0-151>151</a>
</span><span class=lnt id=hl-0-152><a class=lnlinks href=#hl-0-152>152</a>
</span><span class=lnt id=hl-0-153><a class=lnlinks href=#hl-0-153>153</a>
</span><span class=lnt id=hl-0-154><a class=lnlinks href=#hl-0-154>154</a>
</span><span class=lnt id=hl-0-155><a class=lnlinks href=#hl-0-155>155</a>
</span><span class=lnt id=hl-0-156><a class=lnlinks href=#hl-0-156>156</a>
</span><span class=lnt id=hl-0-157><a class=lnlinks href=#hl-0-157>157</a>
</span><span class=lnt id=hl-0-158><a class=lnlinks href=#hl-0-158>158</a>
</span><span class=lnt id=hl-0-159><a class=lnlinks href=#hl-0-159>159</a>
</span><span class=lnt id=hl-0-160><a class=lnlinks href=#hl-0-160>160</a>
</span><span class=lnt id=hl-0-161><a class=lnlinks href=#hl-0-161>161</a>
</span><span class=lnt id=hl-0-162><a class=lnlinks href=#hl-0-162>162</a>
</span><span class=lnt id=hl-0-163><a class=lnlinks href=#hl-0-163>163</a>
</span><span class=lnt id=hl-0-164><a class=lnlinks href=#hl-0-164>164</a>
</span><span class=lnt id=hl-0-165><a class=lnlinks href=#hl-0-165>165</a>
</span><span class=lnt id=hl-0-166><a class=lnlinks href=#hl-0-166>166</a>
</span><span class=lnt id=hl-0-167><a class=lnlinks href=#hl-0-167>167</a>
</span><span class=lnt id=hl-0-168><a class=lnlinks href=#hl-0-168>168</a>
</span><span class=lnt id=hl-0-169><a class=lnlinks href=#hl-0-169>169</a>
</span><span class=lnt id=hl-0-170><a class=lnlinks href=#hl-0-170>170</a>
</span><span class=lnt id=hl-0-171><a class=lnlinks href=#hl-0-171>171</a>
</span><span class=lnt id=hl-0-172><a class=lnlinks href=#hl-0-172>172</a>
</span><span class=lnt id=hl-0-173><a class=lnlinks href=#hl-0-173>173</a>
</span><span class=lnt id=hl-0-174><a class=lnlinks href=#hl-0-174>174</a>
</span><span class=lnt id=hl-0-175><a class=lnlinks href=#hl-0-175>175</a>
</span><span class=lnt id=hl-0-176><a class=lnlinks href=#hl-0-176>176</a>
</span><span class=lnt id=hl-0-177><a class=lnlinks href=#hl-0-177>177</a>
</span><span class=lnt id=hl-0-178><a class=lnlinks href=#hl-0-178>178</a>
</span><span class=lnt id=hl-0-179><a class=lnlinks href=#hl-0-179>179</a>
</span><span class=lnt id=hl-0-180><a class=lnlinks href=#hl-0-180>180</a>
</span><span class=lnt id=hl-0-181><a class=lnlinks href=#hl-0-181>181</a>
</span><span class=lnt id=hl-0-182><a class=lnlinks href=#hl-0-182>182</a>
</span><span class=lnt id=hl-0-183><a class=lnlinks href=#hl-0-183>183</a>
</span><span class=lnt id=hl-0-184><a class=lnlinks href=#hl-0-184>184</a>
</span><span class=lnt id=hl-0-185><a class=lnlinks href=#hl-0-185>185</a>
</span><span class=lnt id=hl-0-186><a class=lnlinks href=#hl-0-186>186</a>
</span><span class=lnt id=hl-0-187><a class=lnlinks href=#hl-0-187>187</a>
</span><span class=lnt id=hl-0-188><a class=lnlinks href=#hl-0-188>188</a>
</span><span class=lnt id=hl-0-189><a class=lnlinks href=#hl-0-189>189</a>
</span><span class=lnt id=hl-0-190><a class=lnlinks href=#hl-0-190>190</a>
</span><span class=lnt id=hl-0-191><a class=lnlinks href=#hl-0-191>191</a>
</span><span class=lnt id=hl-0-192><a class=lnlinks href=#hl-0-192>192</a>
</span><span class=lnt id=hl-0-193><a class=lnlinks href=#hl-0-193>193</a>
</span><span class=lnt id=hl-0-194><a class=lnlinks href=#hl-0-194>194</a>
</span><span class=lnt id=hl-0-195><a class=lnlinks href=#hl-0-195>195</a>
</span><span class=lnt id=hl-0-196><a class=lnlinks href=#hl-0-196>196</a>
</span><span class=lnt id=hl-0-197><a class=lnlinks href=#hl-0-197>197</a>
</span><span class=lnt id=hl-0-198><a class=lnlinks href=#hl-0-198>198</a>
</span><span class=lnt id=hl-0-199><a class=lnlinks href=#hl-0-199>199</a>
</span><span class=lnt id=hl-0-200><a class=lnlinks href=#hl-0-200>200</a>
</span><span class=lnt id=hl-0-201><a class=lnlinks href=#hl-0-201>201</a>
</span><span class=lnt id=hl-0-202><a class=lnlinks href=#hl-0-202>202</a>
</span><span class=lnt id=hl-0-203><a class=lnlinks href=#hl-0-203>203</a>
</span><span class=lnt id=hl-0-204><a class=lnlinks href=#hl-0-204>204</a>
</span><span class=lnt id=hl-0-205><a class=lnlinks href=#hl-0-205>205</a>
</span><span class=lnt id=hl-0-206><a class=lnlinks href=#hl-0-206>206</a>
</span><span class=lnt id=hl-0-207><a class=lnlinks href=#hl-0-207>207</a>
</span><span class=lnt id=hl-0-208><a class=lnlinks href=#hl-0-208>208</a>
</span><span class=lnt id=hl-0-209><a class=lnlinks href=#hl-0-209>209</a>
</span><span class=lnt id=hl-0-210><a class=lnlinks href=#hl-0-210>210</a>
</span><span class=lnt id=hl-0-211><a class=lnlinks href=#hl-0-211>211</a>
</span><span class=lnt id=hl-0-212><a class=lnlinks href=#hl-0-212>212</a>
</span><span class=lnt id=hl-0-213><a class=lnlinks href=#hl-0-213>213</a>
</span><span class=lnt id=hl-0-214><a class=lnlinks href=#hl-0-214>214</a>
</span><span class=lnt id=hl-0-215><a class=lnlinks href=#hl-0-215>215</a>
</span><span class=lnt id=hl-0-216><a class=lnlinks href=#hl-0-216>216</a>
</span><span class=lnt id=hl-0-217><a class=lnlinks href=#hl-0-217>217</a>
</span><span class=lnt id=hl-0-218><a class=lnlinks href=#hl-0-218>218</a>
</span><span class=lnt id=hl-0-219><a class=lnlinks href=#hl-0-219>219</a>
</span><span class=lnt id=hl-0-220><a class=lnlinks href=#hl-0-220>220</a>
</span><span class=lnt id=hl-0-221><a class=lnlinks href=#hl-0-221>221</a>
</span><span class=lnt id=hl-0-222><a class=lnlinks href=#hl-0-222>222</a>
</span><span class=lnt id=hl-0-223><a class=lnlinks href=#hl-0-223>223</a>
</span><span class=lnt id=hl-0-224><a class=lnlinks href=#hl-0-224>224</a>
</span><span class=lnt id=hl-0-225><a class=lnlinks href=#hl-0-225>225</a>
</span><span class=lnt id=hl-0-226><a class=lnlinks href=#hl-0-226>226</a>
</span><span class=lnt id=hl-0-227><a class=lnlinks href=#hl-0-227>227</a>
</span><span class=lnt id=hl-0-228><a class=lnlinks href=#hl-0-228>228</a>
</span><span class=lnt id=hl-0-229><a class=lnlinks href=#hl-0-229>229</a>
</span><span class=lnt id=hl-0-230><a class=lnlinks href=#hl-0-230>230</a>
</span><span class=lnt id=hl-0-231><a class=lnlinks href=#hl-0-231>231</a>
</span><span class=lnt id=hl-0-232><a class=lnlinks href=#hl-0-232>232</a>
</span><span class=lnt id=hl-0-233><a class=lnlinks href=#hl-0-233>233</a>
</span><span class=lnt id=hl-0-234><a class=lnlinks href=#hl-0-234>234</a>
</span><span class=lnt id=hl-0-235><a class=lnlinks href=#hl-0-235>235</a>
</span><span class=lnt id=hl-0-236><a class=lnlinks href=#hl-0-236>236</a>
</span><span class=lnt id=hl-0-237><a class=lnlinks href=#hl-0-237>237</a>
</span><span class=lnt id=hl-0-238><a class=lnlinks href=#hl-0-238>238</a>
</span><span class=lnt id=hl-0-239><a class=lnlinks href=#hl-0-239>239</a>
</span><span class=lnt id=hl-0-240><a class=lnlinks href=#hl-0-240>240</a>
</span><span class=lnt id=hl-0-241><a class=lnlinks href=#hl-0-241>241</a>
</span><span class=lnt id=hl-0-242><a class=lnlinks href=#hl-0-242>242</a>
</span><span class=lnt id=hl-0-243><a class=lnlinks href=#hl-0-243>243</a>
</span><span class=lnt id=hl-0-244><a class=lnlinks href=#hl-0-244>244</a>
</span><span class=lnt id=hl-0-245><a class=lnlinks href=#hl-0-245>245</a>
</span><span class=lnt id=hl-0-246><a class=lnlinks href=#hl-0-246>246</a>
</span><span class=lnt id=hl-0-247><a class=lnlinks href=#hl-0-247>247</a>
</span><span class=lnt id=hl-0-248><a class=lnlinks href=#hl-0-248>248</a>
</span><span class=lnt id=hl-0-249><a class=lnlinks href=#hl-0-249>249</a>
</span><span class=lnt id=hl-0-250><a class=lnlinks href=#hl-0-250>250</a>
</span><span class=lnt id=hl-0-251><a class=lnlinks href=#hl-0-251>251</a>
</span><span class=lnt id=hl-0-252><a class=lnlinks href=#hl-0-252>252</a>
</span><span class=lnt id=hl-0-253><a class=lnlinks href=#hl-0-253>253</a>
</span><span class=lnt id=hl-0-254><a class=lnlinks href=#hl-0-254>254</a>
</span><span class=lnt id=hl-0-255><a class=lnlinks href=#hl-0-255>255</a>
</span><span class=lnt id=hl-0-256><a class=lnlinks href=#hl-0-256>256</a>
</span><span class=lnt id=hl-0-257><a class=lnlinks href=#hl-0-257>257</a>
</span><span class=lnt id=hl-0-258><a class=lnlinks href=#hl-0-258>258</a>
</span><span class=lnt id=hl-0-259><a class=lnlinks href=#hl-0-259>259</a>
</span><span class=lnt id=hl-0-260><a class=lnlinks href=#hl-0-260>260</a>
</span><span class=lnt id=hl-0-261><a class=lnlinks href=#hl-0-261>261</a>
</span><span class=lnt id=hl-0-262><a class=lnlinks href=#hl-0-262>262</a>
</span><span class=lnt id=hl-0-263><a class=lnlinks href=#hl-0-263>263</a>
</span><span class=lnt id=hl-0-264><a class=lnlinks href=#hl-0-264>264</a>
</span><span class=lnt id=hl-0-265><a class=lnlinks href=#hl-0-265>265</a>
</span><span class=lnt id=hl-0-266><a class=lnlinks href=#hl-0-266>266</a>
</span><span class=lnt id=hl-0-267><a class=lnlinks href=#hl-0-267>267</a>
</span><span class=lnt id=hl-0-268><a class=lnlinks href=#hl-0-268>268</a>
</span><span class=lnt id=hl-0-269><a class=lnlinks href=#hl-0-269>269</a>
</span><span class=lnt id=hl-0-270><a class=lnlinks href=#hl-0-270>270</a>
</span><span class=lnt id=hl-0-271><a class=lnlinks href=#hl-0-271>271</a>
</span><span class=lnt id=hl-0-272><a class=lnlinks href=#hl-0-272>272</a>
</span><span class=lnt id=hl-0-273><a class=lnlinks href=#hl-0-273>273</a>
</span><span class=lnt id=hl-0-274><a class=lnlinks href=#hl-0-274>274</a>
</span><span class=lnt id=hl-0-275><a class=lnlinks href=#hl-0-275>275</a>
</span><span class=lnt id=hl-0-276><a class=lnlinks href=#hl-0-276>276</a>
</span><span class=lnt id=hl-0-277><a class=lnlinks href=#hl-0-277>277</a>
</span><span class=lnt id=hl-0-278><a class=lnlinks href=#hl-0-278>278</a>
</span><span class=lnt id=hl-0-279><a class=lnlinks href=#hl-0-279>279</a>
</span><span class=lnt id=hl-0-280><a class=lnlinks href=#hl-0-280>280</a>
</span><span class=lnt id=hl-0-281><a class=lnlinks href=#hl-0-281>281</a>
</span><span class=lnt id=hl-0-282><a class=lnlinks href=#hl-0-282>282</a>
</span><span class=lnt id=hl-0-283><a class=lnlinks href=#hl-0-283>283</a>
</span><span class=lnt id=hl-0-284><a class=lnlinks href=#hl-0-284>284</a>
</span><span class=lnt id=hl-0-285><a class=lnlinks href=#hl-0-285>285</a>
</span><span class=lnt id=hl-0-286><a class=lnlinks href=#hl-0-286>286</a>
</span><span class=lnt id=hl-0-287><a class=lnlinks href=#hl-0-287>287</a>
</span><span class=lnt id=hl-0-288><a class=lnlinks href=#hl-0-288>288</a>
</span><span class=lnt id=hl-0-289><a class=lnlinks href=#hl-0-289>289</a>
</span><span class=lnt id=hl-0-290><a class=lnlinks href=#hl-0-290>290</a>
</span><span class=lnt id=hl-0-291><a class=lnlinks href=#hl-0-291>291</a>
</span><span class=lnt id=hl-0-292><a class=lnlinks href=#hl-0-292>292</a>
</span><span class=lnt id=hl-0-293><a class=lnlinks href=#hl-0-293>293</a>
</span><span class=lnt id=hl-0-294><a class=lnlinks href=#hl-0-294>294</a>
</span><span class=lnt id=hl-0-295><a class=lnlinks href=#hl-0-295>295</a>
</span><span class=lnt id=hl-0-296><a class=lnlinks href=#hl-0-296>296</a>
</span><span class=lnt id=hl-0-297><a class=lnlinks href=#hl-0-297>297</a>
</span><span class=lnt id=hl-0-298><a class=lnlinks href=#hl-0-298>298</a>
</span><span class=lnt id=hl-0-299><a class=lnlinks href=#hl-0-299>299</a>
</span><span class=lnt id=hl-0-300><a class=lnlinks href=#hl-0-300>300</a>
</span><span class=lnt id=hl-0-301><a class=lnlinks href=#hl-0-301>301</a>
</span><span class=lnt id=hl-0-302><a class=lnlinks href=#hl-0-302>302</a>
</span><span class=lnt id=hl-0-303><a class=lnlinks href=#hl-0-303>303</a>
</span><span class=lnt id=hl-0-304><a class=lnlinks href=#hl-0-304>304</a>
</span><span class=lnt id=hl-0-305><a class=lnlinks href=#hl-0-305>305</a>
</span><span class=lnt id=hl-0-306><a class=lnlinks href=#hl-0-306>306</a>
</span><span class=lnt id=hl-0-307><a class=lnlinks href=#hl-0-307>307</a>
</span><span class=lnt id=hl-0-308><a class=lnlinks href=#hl-0-308>308</a>
</span><span class=lnt id=hl-0-309><a class=lnlinks href=#hl-0-309>309</a>
</span><span class=lnt id=hl-0-310><a class=lnlinks href=#hl-0-310>310</a>
</span><span class=lnt id=hl-0-311><a class=lnlinks href=#hl-0-311>311</a>
</span><span class=lnt id=hl-0-312><a class=lnlinks href=#hl-0-312>312</a>
</span><span class=lnt id=hl-0-313><a class=lnlinks href=#hl-0-313>313</a>
</span><span class=lnt id=hl-0-314><a class=lnlinks href=#hl-0-314>314</a>
</span><span class=lnt id=hl-0-315><a class=lnlinks href=#hl-0-315>315</a>
</span><span class=lnt id=hl-0-316><a class=lnlinks href=#hl-0-316>316</a>
</span><span class=lnt id=hl-0-317><a class=lnlinks href=#hl-0-317>317</a>
</span><span class=lnt id=hl-0-318><a class=lnlinks href=#hl-0-318>318</a>
</span><span class=lnt id=hl-0-319><a class=lnlinks href=#hl-0-319>319</a>
</span><span class=lnt id=hl-0-320><a class=lnlinks href=#hl-0-320>320</a>
</span><span class=lnt id=hl-0-321><a class=lnlinks href=#hl-0-321>321</a>
</span><span class=lnt id=hl-0-322><a class=lnlinks href=#hl-0-322>322</a>
</span><span class=lnt id=hl-0-323><a class=lnlinks href=#hl-0-323>323</a>
</span><span class=lnt id=hl-0-324><a class=lnlinks href=#hl-0-324>324</a>
</span><span class=lnt id=hl-0-325><a class=lnlinks href=#hl-0-325>325</a>
</span><span class=lnt id=hl-0-326><a class=lnlinks href=#hl-0-326>326</a>
</span><span class=lnt id=hl-0-327><a class=lnlinks href=#hl-0-327>327</a>
</span><span class=lnt id=hl-0-328><a class=lnlinks href=#hl-0-328>328</a>
</span><span class=lnt id=hl-0-329><a class=lnlinks href=#hl-0-329>329</a>
</span><span class=lnt id=hl-0-330><a class=lnlinks href=#hl-0-330>330</a>
</span><span class=lnt id=hl-0-331><a class=lnlinks href=#hl-0-331>331</a>
</span><span class=lnt id=hl-0-332><a class=lnlinks href=#hl-0-332>332</a>
</span><span class=lnt id=hl-0-333><a class=lnlinks href=#hl-0-333>333</a>
</span><span class=lnt id=hl-0-334><a class=lnlinks href=#hl-0-334>334</a>
</span><span class=lnt id=hl-0-335><a class=lnlinks href=#hl-0-335>335</a>
</span><span class=lnt id=hl-0-336><a class=lnlinks href=#hl-0-336>336</a>
</span><span class=lnt id=hl-0-337><a class=lnlinks href=#hl-0-337>337</a>
</span><span class=lnt id=hl-0-338><a class=lnlinks href=#hl-0-338>338</a>
</span><span class=lnt id=hl-0-339><a class=lnlinks href=#hl-0-339>339</a>
</span><span class=lnt id=hl-0-340><a class=lnlinks href=#hl-0-340>340</a>
</span><span class=lnt id=hl-0-341><a class=lnlinks href=#hl-0-341>341</a>
</span><span class=lnt id=hl-0-342><a class=lnlinks href=#hl-0-342>342</a>
</span><span class=lnt id=hl-0-343><a class=lnlinks href=#hl-0-343>343</a>
</span><span class=lnt id=hl-0-344><a class=lnlinks href=#hl-0-344>344</a>
</span><span class=lnt id=hl-0-345><a class=lnlinks href=#hl-0-345>345</a>
</span><span class=lnt id=hl-0-346><a class=lnlinks href=#hl-0-346>346</a>
</span><span class=lnt id=hl-0-347><a class=lnlinks href=#hl-0-347>347</a>
</span><span class=lnt id=hl-0-348><a class=lnlinks href=#hl-0-348>348</a>
</span><span class=lnt id=hl-0-349><a class=lnlinks href=#hl-0-349>349</a>
</span><span class=lnt id=hl-0-350><a class=lnlinks href=#hl-0-350>350</a>
</span><span class=lnt id=hl-0-351><a class=lnlinks href=#hl-0-351>351</a>
</span><span class=lnt id=hl-0-352><a class=lnlinks href=#hl-0-352>352</a>
</span><span class=lnt id=hl-0-353><a class=lnlinks href=#hl-0-353>353</a>
</span><span class=lnt id=hl-0-354><a class=lnlinks href=#hl-0-354>354</a>
</span><span class=lnt id=hl-0-355><a class=lnlinks href=#hl-0-355>355</a>
</span><span class=lnt id=hl-0-356><a class=lnlinks href=#hl-0-356>356</a>
</span><span class=lnt id=hl-0-357><a class=lnlinks href=#hl-0-357>357</a>
</span><span class=lnt id=hl-0-358><a class=lnlinks href=#hl-0-358>358</a>
</span><span class=lnt id=hl-0-359><a class=lnlinks href=#hl-0-359>359</a>
</span><span class=lnt id=hl-0-360><a class=lnlinks href=#hl-0-360>360</a>
</span><span class=lnt id=hl-0-361><a class=lnlinks href=#hl-0-361>361</a>
</span><span class=lnt id=hl-0-362><a class=lnlinks href=#hl-0-362>362</a>
</span><span class=lnt id=hl-0-363><a class=lnlinks href=#hl-0-363>363</a>
</span><span class=lnt id=hl-0-364><a class=lnlinks href=#hl-0-364>364</a>
</span><span class=lnt id=hl-0-365><a class=lnlinks href=#hl-0-365>365</a>
</span><span class=lnt id=hl-0-366><a class=lnlinks href=#hl-0-366>366</a>
</span><span class=lnt id=hl-0-367><a class=lnlinks href=#hl-0-367>367</a>
</span><span class=lnt id=hl-0-368><a class=lnlinks href=#hl-0-368>368</a>
</span><span class=lnt id=hl-0-369><a class=lnlinks href=#hl-0-369>369</a>
</span><span class=lnt id=hl-0-370><a class=lnlinks href=#hl-0-370>370</a>
</span><span class=lnt id=hl-0-371><a class=lnlinks href=#hl-0-371>371</a>
</span><span class=lnt id=hl-0-372><a class=lnlinks href=#hl-0-372>372</a>
</span><span class=lnt id=hl-0-373><a class=lnlinks href=#hl-0-373>373</a>
</span><span class=lnt id=hl-0-374><a class=lnlinks href=#hl-0-374>374</a>
</span><span class=lnt id=hl-0-375><a class=lnlinks href=#hl-0-375>375</a>
</span><span class=lnt id=hl-0-376><a class=lnlinks href=#hl-0-376>376</a>
</span><span class=lnt id=hl-0-377><a class=lnlinks href=#hl-0-377>377</a>
</span><span class=lnt id=hl-0-378><a class=lnlinks href=#hl-0-378>378</a>
</span><span class=lnt id=hl-0-379><a class=lnlinks href=#hl-0-379>379</a>
</span><span class=lnt id=hl-0-380><a class=lnlinks href=#hl-0-380>380</a>
</span><span class=lnt id=hl-0-381><a class=lnlinks href=#hl-0-381>381</a>
</span><span class=lnt id=hl-0-382><a class=lnlinks href=#hl-0-382>382</a>
</span><span class=lnt id=hl-0-383><a class=lnlinks href=#hl-0-383>383</a>
</span><span class=lnt id=hl-0-384><a class=lnlinks href=#hl-0-384>384</a>
</span><span class=lnt id=hl-0-385><a class=lnlinks href=#hl-0-385>385</a>
</span><span class=lnt id=hl-0-386><a class=lnlinks href=#hl-0-386>386</a>
</span><span class=lnt id=hl-0-387><a class=lnlinks href=#hl-0-387>387</a>
</span><span class=lnt id=hl-0-388><a class=lnlinks href=#hl-0-388>388</a>
</span><span class=lnt id=hl-0-389><a class=lnlinks href=#hl-0-389>389</a>
</span><span class=lnt id=hl-0-390><a class=lnlinks href=#hl-0-390>390</a>
</span><span class=lnt id=hl-0-391><a class=lnlinks href=#hl-0-391>391</a>
</span><span class=lnt id=hl-0-392><a class=lnlinks href=#hl-0-392>392</a>
</span><span class=lnt id=hl-0-393><a class=lnlinks href=#hl-0-393>393</a>
</span><span class=lnt id=hl-0-394><a class=lnlinks href=#hl-0-394>394</a>
</span><span class=lnt id=hl-0-395><a class=lnlinks href=#hl-0-395>395</a>
</span><span class=lnt id=hl-0-396><a class=lnlinks href=#hl-0-396>396</a>
</span><span class=lnt id=hl-0-397><a class=lnlinks href=#hl-0-397>397</a>
</span><span class=lnt id=hl-0-398><a class=lnlinks href=#hl-0-398>398</a>
</span><span class=lnt id=hl-0-399><a class=lnlinks href=#hl-0-399>399</a>
</span><span class=lnt id=hl-0-400><a class=lnlinks href=#hl-0-400>400</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=c1>// Module Name: Ping.c
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Code by Rise
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Command Line Options/Parameters:
</span></span></span><span class=line><span class=cl><span class=c1>//        Ping [host] [packet-size]
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>//        host        String name of host to ping
</span></span></span><span class=line><span class=cl><span class=c1>//        packet-size    Integer size of packet to send (smaller than 1024 bytes)
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>//#pragma pack(1)
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#define WIN32_LEAN_AND_MEAN
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;winsock2.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;ws2tcpip.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#define IP_RECORD_ROUTE 0x7
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// IP header structure
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=nc>_iphdr</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span>    <span class=nl>h_len</span><span class=p>:</span><span class=mi>4</span><span class=p>;</span>        <span class=c1>// Length of the header
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span>    <span class=nl>version</span><span class=p>:</span><span class=mi>4</span><span class=p>;</span>        <span class=c1>// Version of IP
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>char</span>     <span class=n>tos</span><span class=p>;</span>            <span class=c1>// Type of service
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>total_len</span><span class=p>;</span>        <span class=c1>// Total length of the packet
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>ident</span><span class=p>;</span>            <span class=c1>// Unique identifier
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>frag_and_flags</span><span class=p>;</span>    <span class=c1>// Flags
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>ttl</span><span class=p>;</span>            <span class=c1>// Time to live
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>proto</span><span class=p>;</span>            <span class=c1>// Protocol (TCP, UDP, etc.)
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span>    <span class=n>checksum</span><span class=p>;</span>        <span class=c1>// IP checksum
</span></span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span>        <span class=n>sourceIP</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span>        <span class=n>destIP</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=n>IpHeader</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#define ICMP_ECHO        8
</span></span></span><span class=line><span class=cl><span class=cp>#define ICMP_ECHOREPLY    0
</span></span></span><span class=line><span class=cl><span class=cp>#define ICMP_MIN        8    </span><span class=c1>// Minimun 8-byte ICMP packet (header)
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// ICMP header structure
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=nc>_icmphdr</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>BYTE</span>        <span class=n>i_type</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>BYTE</span>        <span class=n>i_code</span><span class=p>;</span>        <span class=c1>// Type sub code
</span></span></span><span class=line><span class=cl>    <span class=n>USHORT</span>    <span class=n>i_cksum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>USHORT</span>    <span class=n>i_id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>USHORT</span>    <span class=n>i_seq</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// This is not the standard header, but we reserve space for time
</span></span></span><span class=line><span class=cl>    <span class=n>ULONG</span> <span class=n>timestamp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=n>IcmpHeader</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// IP option header – use with socket option IP_OPTIONS
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=nc>_ipoptionhdr</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>char</span>    <span class=n>code</span><span class=p>;</span>        <span class=c1>// Option type
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>char</span>    <span class=n>len</span><span class=p>;</span>        <span class=c1>// Length of option hdr
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>char</span>    <span class=n>prt</span><span class=p>;</span>        <span class=c1>// Offset into options
</span></span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>long</span>    <span class=n>addr</span><span class=p>[</span><span class=mi>9</span><span class=p>];</span>    <span class=c1>// List of IP addrs
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=n>IpOptionHeader</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#define DEF_PACKET_SIZE 32        </span><span class=c1>// Default packet size
</span></span></span><span class=line><span class=cl><span class=cp>#define MAX_PACKET        1024    </span><span class=c1>// Max ICMP packet size
</span></span></span><span class=line><span class=cl><span class=cp>#define MAX_IP_HDR_SIZE    60        </span><span class=c1>// Max IP header size w/options
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>BOOL</span>    <span class=n>bRecordRoute</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span>        <span class=n>datasize</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>char</span><span class=o>*</span>    <span class=n>lpdest</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: usage
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description:
</span></span></span><span class=line><span class=cl><span class=c1>//        Print usage information
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>usage</span><span class=p>(</span><span class=kt>char</span><span class=o>*</span> <span class=n>progname</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=nl>usage</span><span class=p>:</span> <span class=n>ping</span> <span class=o>-</span><span class=n>r</span> <span class=o>&lt;</span><span class=n>host</span><span class=o>&gt;</span> <span class=p>[</span><span class=n>data</span> <span class=n>size</span><span class=p>]</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span>    <span class=o>-</span><span class=n>r</span>        <span class=n>record</span> <span class=n>route</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span>    <span class=n>host</span>    <span class=n>remote</span> <span class=n>machine</span> <span class=n>to</span> <span class=n>Ping</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span>    <span class=n>datasize</span>    <span class=n>can</span> <span class=n>be</span> <span class=n>up</span> <span class=n>to</span> <span class=mi>1</span> <span class=n>KB</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>ExitProcess</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: FillICMPData
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description:
</span></span></span><span class=line><span class=cl><span class=c1>//        Helper function to fill in various fields for our ICMP request
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>FillICMPData</span><span class=p>(</span><span class=kt>char</span><span class=o>*</span> <span class=n>icmp_data</span><span class=p>,</span> <span class=kt>int</span> <span class=n>datasize</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>IcmpHeader</span><span class=o>*</span>    <span class=n>icmp_hdr</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>*</span>        <span class=n>datapart</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span> <span class=o>=</span> <span class=p>(</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span><span class=o>-&gt;</span><span class=n>i_type</span> <span class=o>=</span> <span class=n>ICMP_ECHO</span><span class=p>;</span>        <span class=c1>// Request an ICMP echo
</span></span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span><span class=o>-&gt;</span><span class=n>i_code</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span><span class=o>-&gt;</span><span class=n>i_id</span> <span class=o>=</span> <span class=p>(</span><span class=n>USHORT</span><span class=p>)</span><span class=n>GetCurrentProcessId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span><span class=o>-&gt;</span><span class=n>i_cksum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>icmp_hdr</span><span class=o>-&gt;</span><span class=n>i_seq</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>datapart</span> <span class=o>=</span> <span class=n>icmp_data</span> <span class=o>+</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>IcmpHeader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=c1>// Place some junk in the buffer
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=n>memset</span><span class=p>(</span><span class=n>datapart</span><span class=p>,</span> <span class=err>‘</span><span class=n>E</span><span class=err>’</span><span class=p>,</span> <span class=n>datasize</span> <span class=o>-</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>IcmpHeader</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: checksum
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description:
</span></span></span><span class=line><span class=cl><span class=c1>//        This funcion calculates the 16-bit one’s complement sum
</span></span></span><span class=line><span class=cl><span class=c1>//        of the supplied buffer (ICMP)header
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=n>USHORT</span> <span class=nf>checksum</span><span class=p>(</span><span class=n>USHORT</span><span class=o>*</span> <span class=n>buffer</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>cksum</span> <span class=o>=</span> <span class=mi>0</span> <span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=p>(</span><span class=n>size</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cksum</span> <span class=o>+=</span> <span class=n>buffer</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>size</span> <span class=o>-=</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>USHORT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cksum</span> <span class=o>+=</span> <span class=p>(</span><span class=n>UCHAR</span><span class=p>)</span><span class=n>buffer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cksum</span> <span class=o>=</span> <span class=p>(</span><span class=n>cksum</span><span class=o>&gt;&gt;</span><span class=mi>16</span><span class=p>)</span><span class=o>+</span><span class=p>(</span><span class=n>cksum</span><span class=o>&amp;</span><span class=mh>0xffff</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cksum</span> <span class=o>+=</span> <span class=p>(</span><span class=n>cksum</span><span class=o>&gt;&gt;</span><span class=mi>16</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=n>USHORT</span><span class=p>)(</span><span class=o>~</span><span class=n>cksum</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: DecodeIPOptions
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description:
</span></span></span><span class=line><span class=cl><span class=c1>//        If the IP option header is present. find the IP options
</span></span></span><span class=line><span class=cl><span class=c1>//        within the IP header and print the record route option
</span></span></span><span class=line><span class=cl><span class=c1>//        values
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>DecodeIPOptions</span><span class=p>(</span><span class=n>charbuf</span><span class=p>,</span><span class=kt>int</span> <span class=n>bytes</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>IpOptionHeader</span><span class=o>*</span> <span class=n>ipopt</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IN_ADDR</span>    <span class=n>inaddr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span>     <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>HOSTENT</span> <span class=n>host</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>ipopt</span> <span class=o>=</span> <span class=p>(</span><span class=n>IpOptionHeader</span><span class=p>)(</span><span class=n>buf</span> <span class=o>+</span> <span class=mi>20</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=nl>RR</span><span class=p>:</span>    <span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=p>(</span><span class=n>ipopt</span><span class=o>-&gt;</span><span class=n>prt</span><span class=o>/</span><span class=mi>4</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>inaddr</span><span class=p>.</span><span class=n>S_un</span><span class=p>.</span><span class=n>S_addr</span> <span class=o>=</span> <span class=n>ipopt</span><span class=o>-&gt;</span><span class=n>addr</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>i</span> <span class=o>!=</span> <span class=mi>0</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span>    <span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=</span> <span class=n>gethostbyaddr</span><span class=p>((</span><span class=kt>char</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>inaddr</span><span class=p>.</span><span class=n>S_un</span><span class=p>.</span><span class=n>S_addr</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>inaddr</span><span class=p>.</span><span class=n>S_un</span><span class=p>.</span><span class=n>S_addr</span><span class=p>),</span> <span class=n>AF_INET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=p>(</span><span class=o>%-</span><span class=mi>15</span><span class=n>s</span><span class=p>)</span> <span class=o>%</span><span class=n>s</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>inet_ntoa</span><span class=p>(</span><span class=n>inaddr</span><span class=p>),</span> <span class=n>host</span><span class=o>-&gt;</span><span class=n>h_name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=p>(</span><span class=o>%-</span><span class=mi>15</span><span class=n>s</span><span class=p>)</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>inet_ntoa</span><span class=p>(</span><span class=n>inaddr</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: DecodeICMPHeader
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description:
</span></span></span><span class=line><span class=cl><span class=c1>//        The response is an IP packet. We must decode the IP header to locate the ICMP data.
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>DecodeICMPHeader</span><span class=p>(</span><span class=kt>char</span><span class=o>*</span> <span class=n>buf</span><span class=p>,</span> <span class=kt>int</span> <span class=n>bytes</span><span class=p>,</span> <span class=k>struct</span> <span class=nc>sockaddr_in</span> <span class=n>from</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>IpHeader</span>    <span class=n>iphdr</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IcmpHeader</span><span class=o>*</span>    <span class=n>icmphdr</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>short</span> <span class=n>iphdrlen</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>DWORD</span>        <span class=n>tick</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>int</span>    <span class=n>icmpcount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>iphdr</span> <span class=o>=</span> <span class=p>(</span><span class=n>IpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>buf</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Number of 32-bit words * 4 = bytes
</span></span></span><span class=line><span class=cl>    <span class=n>iphdrlen</span> <span class=o>=</span> <span class=n>iphdr</span><span class=o>-&gt;</span><span class=n>h_len</span> <span class=o>*</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>tick</span> <span class=o>=</span> <span class=n>GetTickCount</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>((</span><span class=n>iphdrlen</span> <span class=o>==</span> <span class=n>MAX_IP_HDR_SIZE</span><span class=p>)</span><span class=o>&amp;&amp;</span><span class=p>(</span><span class=o>!</span><span class=n>icmpcount</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>DecodeIPOptions</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span><span class=n>bytes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>bytes</span> <span class=o>&lt;</span> <span class=n>iphdrlen</span> <span class=o>+</span> <span class=n>ICMP_MIN</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>Too</span> <span class=n>Few</span> <span class=n>bytes</span> <span class=n>from</span> <span class=o>%</span><span class=n>s</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span><span class=n>inet_ntoa</span><span class=p>(</span><span class=n>from</span><span class=o>-&gt;</span><span class=n>sin_addr</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>icmphdr</span> <span class=o>=</span> <span class=p>(</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)(</span><span class=n>buf</span> <span class=o>+</span> <span class=n>iphdrlen</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>icmphdr</span><span class=o>-&gt;</span><span class=n>i_type</span> <span class=o>!=</span> <span class=n>ICMP_ECHOREPLY</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>nonecho</span> <span class=n>type</span> <span class=o>%</span><span class=n>d</span> <span class=n>recvd</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>icmphdr</span><span class=o>-&gt;</span><span class=n>i_type</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Make sure this is an ICMP reply to something we sent!
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>icmphdr</span><span class=o>-&gt;</span><span class=n>i_id</span> <span class=o>!=</span> <span class=p>(</span><span class=n>USHORT</span><span class=p>)</span><span class=n>GetCurrentProcessId</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>someone</span> <span class=k>else</span><span class=err>’</span><span class=n>s</span> <span class=n>packet</span><span class=o>!</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=o>%</span><span class=n>d</span> <span class=n>bytes</span> <span class=n>from</span> <span class=o>%</span><span class=nl>s</span><span class=p>:</span><span class=err>”</span><span class=p>,</span> <span class=n>bytes</span><span class=p>,</span> <span class=n>inet_ntoa</span><span class=p>(</span><span class=n>from</span><span class=o>-&gt;</span><span class=n>sin_addr</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span> <span class=n>icmp</span><span class=o>-&gt;</span><span class=n>seq</span> <span class=o>=</span> <span class=o>%</span><span class=n>d</span><span class=p>.</span><span class=err>”</span><span class=p>,</span> <span class=n>icmphdr</span><span class=o>-&gt;</span><span class=n>i_seq</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“</span> <span class=nl>time</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span> <span class=n>ms</span><span class=err>”</span><span class=p>,</span> <span class=n>tick</span><span class=o>-</span><span class=n>icmphdr</span><span class=o>-&gt;</span><span class=n>timestamp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=err>“\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>icmpcount</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>ValidateArgs</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=n>argv</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>bRecordRoute</span> <span class=o>=</span> <span class=n>FALSE</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>lpdest</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>datasize</span> <span class=o>=</span> <span class=n>DEF_PACKET_SIZE</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>argc</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>((</span><span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=err>‘</span><span class=o>-</span><span class=err>‘</span><span class=p>)</span><span class=o>||</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=err>‘</span><span class=o>/</span><span class=err>‘</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>switch</span><span class=p>(</span><span class=n>tolower</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>case</span> <span class=err>‘</span><span class=n>r</span><span class=err>’</span><span class=o>:</span>        <span class=c1>// Record route option
</span></span></span><span class=line><span class=cl>                    <span class=n>bRecordRoute</span> <span class=o>=</span> <span class=n>TRUE</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>usage</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>isdigit</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            <span class=n>datasize</span> <span class=o>=</span> <span class=n>atoi</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>lpdest</span> <span class=o>=</span> <span class=n>argv</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Function: main
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Description
</span></span></span><span class=line><span class=cl><span class=c1>//        Set up the ICMP raw socket, and create the ICMP header. Add
</span></span></span><span class=line><span class=cl><span class=c1>//        the appropriate IP ooption header, and start sending ICMP
</span></span></span><span class=line><span class=cl><span class=c1>//        echo requests to the endpoint. For each send and receive.
</span></span></span><span class=line><span class=cl><span class=c1>//        we set a timeout value so that we don’t wait forever for a
</span></span></span><span class=line><span class=cl><span class=c1>//        response in case the endpoint is not responding. When we
</span></span></span><span class=line><span class=cl><span class=c1>//        receive a packet. decode it.
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=n>argv</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>WSADATA</span>    <span class=n>wsaData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SOCKET</span>    <span class=n>sockRaw</span> <span class=o>=</span> <span class=n>INVALID_SOCKET</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=nc>sockaddr_in</span> <span class=n>dest</span><span class=p>,</span> <span class=n>from</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span>        <span class=n>bread</span><span class=p>,</span> <span class=n>fromlen</span> <span class=o>=</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>from</span><span class=p>),</span> <span class=n>timeout</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span> <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span>    <span class=n>icmp_data</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>,</span> <span class=n>recvbuf</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>addr</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>USHORT</span>    <span class=n>seq_no</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=nc>hostent</span> <span class=n>hp</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IpOptionHeader</span> <span class=n>ipopt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>WSAStartup</span><span class=p>(</span><span class=n>MAKEWORD</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>wsaData</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>WSAStartup</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>GetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ValidateArgs</span><span class=p>(</span><span class=n>argc</span><span class=p>,</span><span class=n>argv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>sockRaw</span> <span class=o>=</span> <span class=n>WSASocket</span><span class=p>(</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>SOCK_RAW</span><span class=p>,</span> <span class=n>IPPROTO_ICMP</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>WSA_FLAG_OVERLAPPED</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>sockRaw</span> <span class=o>==</span> <span class=n>INVALID_SOCKET</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>WSASocket</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>bRecordRoute</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Setup the IP option header to go out on every ICMP packet
</span></span></span><span class=line><span class=cl>        <span class=c1>//
</span></span></span><span class=line><span class=cl>        <span class=n>ZeroMemory</span><span class=p>(</span><span class=o>&amp;</span><span class=n>ipopt</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>ipopt</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>ipopt</span><span class=p>.</span><span class=n>code</span> <span class=o>=</span> <span class=n>IP_RECORD_ROUTE</span><span class=p>;</span>    <span class=c1>// Record route option
</span></span></span><span class=line><span class=cl>        <span class=n>ipopt</span><span class=p>.</span><span class=n>prt</span>  <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>                    <span class=c1>// Point to the first addr offset
</span></span></span><span class=line><span class=cl>        <span class=n>ipopt</span><span class=p>.</span><span class=n>len</span>  <span class=o>=</span> <span class=mi>39</span><span class=p>;</span>                <span class=c1>// Length of option header
</span></span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>ret</span> <span class=o>=</span> <span class=n>setsockopt</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>,</span> <span class=n>IPPROTO_IP</span><span class=p>,</span> <span class=n>IP_OPTIONS</span><span class=p>,</span> <span class=p>(</span><span class=kt>char</span><span class=p>)</span><span class=o>&amp;</span><span class=n>ipopt</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>ipopt</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>ret</span> <span class=o>==</span> <span class=n>SOCKET_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>IP_OPTIONs</span><span class=p>)</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span><span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Set the send/recv timeout values
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=n>bread</span> <span class=o>=</span> <span class=n>setsockopt</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>,</span> <span class=n>SOL_SOCKET</span><span class=p>,</span> <span class=n>SO_RCVTIMEO</span><span class=p>,</span> <span class=p>(</span><span class=kt>char</span><span class=p>)</span><span class=o>&amp;</span><span class=n>timeout</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>timeout</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>bread</span> <span class=o>==</span> <span class=n>SOCKET_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>SO_RCVTIME0</span><span class=p>)</span><span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>timeout</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>bread</span> <span class=o>=</span> <span class=n>setsockopt</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>,</span> <span class=n>SOL_SOCKET</span><span class=p>,</span> <span class=n>SO_SNDTIMEO</span><span class=p>,</span> <span class=p>(</span><span class=kt>char</span><span class=p>)</span><span class=o>&amp;</span><span class=n>timeout</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>timeout</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>bread</span> <span class=o>==</span> <span class=n>SOCKET_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>SO_SNDTIME0</span><span class=p>)</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>memset</span><span class=p>(</span><span class=o>&amp;</span><span class=n>dest</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>dest</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=c1>// Resolve the endpoint`s name if necessary
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=n>dest</span><span class=p>.</span><span class=n>sin_family</span> <span class=o>=</span> <span class=n>AF_INET</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>((</span><span class=n>dest</span><span class=p>.</span><span class=n>sin_addr</span><span class=p>.</span><span class=n>s_addr</span> <span class=o>=</span> <span class=n>inet_addr</span><span class=p>(</span><span class=n>lpdest</span><span class=p>))</span> <span class=o>==</span> <span class=n>INADDR_NONE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>((</span><span class=n>hp</span> <span class=o>=</span> <span class=n>gethostbyname</span><span class=p>(</span><span class=n>lpdest</span><span class=p>))</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>memcpy</span><span class=p>(</span><span class=o>&amp;</span><span class=p>(</span><span class=n>dest</span><span class=p>.</span><span class=n>sin_addr</span><span class=p>),</span> <span class=n>hp</span><span class=o>-&gt;</span><span class=n>h_addr</span><span class=p>,</span> <span class=n>hp</span><span class=o>-&gt;</span><span class=n>h_length</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dest</span><span class=p>.</span><span class=n>sin_family</span> <span class=o>=</span> <span class=n>hp</span><span class=o>-&gt;</span><span class=n>h_addrtype</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>dest</span><span class=p>.</span><span class=n>sin_addr</span> <span class=o>=</span> <span class=o>%</span><span class=n>s</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>inet_ntoa</span><span class=p>(</span><span class=n>dest</span><span class=p>.</span><span class=n>sin_addr</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>gethostbyname</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span><span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=c1>// Create the ICMP packet
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=n>datasize</span> <span class=o>+=</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>IcmpHeader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>icmp_data</span> <span class=o>=</span> <span class=n>HeapAlloc</span><span class=p>(</span><span class=n>GetProcessHeap</span><span class=p>(),</span> <span class=n>HEAP_ZERO_MEMORY</span><span class=p>,</span> <span class=n>MAX_PACKET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>recvbuf</span> <span class=o>=</span> <span class=n>HeapAlloc</span><span class=p>(</span><span class=n>GetProcessHeap</span><span class=p>(),</span> <span class=n>HEAP_ZERO_MEMORY</span><span class=p>,</span> <span class=n>MAX_PACKET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>icmp_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>HeapAlloc</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span><span class=n>GetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>memset</span><span class=p>(</span><span class=n>icmp_data</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>MAX_PACKET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>FillICMPData</span><span class=p>(</span><span class=n>icmp_data</span><span class=p>,</span> <span class=n>datasize</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=c1>// Start sending/receiving ICMP packets
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=k>while</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=kt>int</span> <span class=n>nCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>bwrote</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>nCount</span><span class=o>++</span> <span class=o>==</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>((</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>i_cksum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>((</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>timestamp</span> <span class=o>=</span> <span class=n>GetTickCount</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>((</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>i_seq</span> <span class=o>=</span> <span class=n>seq_no</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>((</span><span class=n>IcmpHeader</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>i_cksum</span> <span class=o>=</span> <span class=n>checksum</span><span class=p>((</span><span class=n>USHORT</span><span class=o>*</span><span class=p>)</span><span class=n>icmp_data</span><span class=p>,</span> <span class=n>datasize</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=p>(</span><span class=k>struct</span> <span class=nc>sockaddr</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>dest</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>dest</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>bwrote</span> <span class=o>=</span> <span class=n>sendto</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>,</span> <span class=n>icmp_data</span><span class=p>,</span> <span class=n>datasize</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=p>(</span><span class=k>struct</span> <span class=nc>sockaddr</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>dest</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>dest</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>bwrote</span> <span class=o>==</span> <span class=n>SOCKET_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>WSAGetLastError</span><span class=p>()</span> <span class=o>==</span> <span class=n>WSAETIMEDOUT</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>timed</span> <span class=n>out</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>recvfrom</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>bwrote</span> <span class=o>&lt;</span> <span class=n>datasize</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>Wrote</span> <span class=o>%</span><span class=n>d</span> <span class=n>bytes</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>bwrote</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>bread</span> <span class=o>=</span> <span class=n>recvfrom</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>,</span> <span class=n>recvbuf</span><span class=p>,</span> <span class=n>MAX_PACKET</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=p>(</span><span class=k>struct</span> <span class=nc>sockaddr</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>from</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>fromlen</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>bread</span> <span class=o>==</span> <span class=n>SOCKET_ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>WSAGetLastError</span><span class=p>()</span> <span class=o>==</span> <span class=n>WSAETIMEDOUT</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>timed</span> <span class=n>out</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=n>recvfrom</span><span class=p>()</span> <span class=nl>failed</span><span class=p>:</span> <span class=o>%</span><span class=n>d</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>,</span> <span class=n>WSAGetLastError</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>DecodeICMPHeader</span><span class=p>(</span><span class=n>recvbuf</span><span class=p>,</span> <span class=n>bread</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>from</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>Sleep</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>//Cleanup
</span></span></span><span class=line><span class=cl>    <span class=c1>//
</span></span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>sockRaw</span> <span class=o>!=</span> <span class=n>INVALID_SOCKET</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>closesocket</span><span class=p>(</span><span class=n>sockRaw</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>HeapFree</span><span class=p>(</span><span class=n>GetProcessHeap</span><span class=p>(),</span> <span class=mi>0</span><span class=p>,</span> <span class=n>recvbuf</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>HeapFree</span><span class=p>(</span><span class=n>GetProcessHeap</span><span class=p>(),</span> <span class=mi>0</span><span class=p>,</span> <span class=n>icmp_data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>WSACleanup</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-button><a class=btn href=/post/ping-source-code/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/windows-task-manager-missing-username-solution/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Windows任务管理器不显示用户名的解决方法"><meta itemprop=description content="启动Terminal Services服务."></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/windows-task-manager-missing-username-solution/ itemprop=url class=post-title-link>Windows任务管理器不显示用户名的解决方法</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2006年01月04日 12:18:00 CST" itemprop="dateCreated datePublished" datetime="2006-01-04 12:18:00 +0800 +0800">2006年01月04日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/windows-task-manager-missing-username-solution/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>启动Terminal Services服务.</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/windows-task-manager-missing-username-solution/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/remove-dvbbs-advertisement-method/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="去掉动网广告“国内使用量最大的动网论坛”的方法"><meta itemprop=description content='打开/inc/Dv_ClsOther.asp
找到:



 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12


If IsSqlDataBase = 0 Then
  If not IsObject(Application(Dvbbs.CacheName & "_TextAdservices")) Then
   Set XmlAds=Application(Dvbbs.CacheName & "_TextAdservices").cloneNode(True)
  Else
    Set XmlAds=Server.CreateObject("Msxml2.FreeThreadedDOMDocument" & MsxmlVersion )
    XmlAds.appendChild(XmlAds.createElement("xml"))
    XmlAds.documentElement.appendChild(XmlAds.createNode(1,"text","")).text="<iframe src="""&amp;Dvbbs_Server_Url&"dvbbs/DvDefaultTextAd.asp"" height=""23"" width=""100%"" marginwidth=""0"" marginheight=""0"" hspace=""0"" vspace=""0"" frameborder=""0"" scrolling=""no""></iframe>"
  End If
 Else
   Set XmlAds=Server.CreateObject("Msxml2.FreeThreadedDOMDocument" & MsxmlVersion)
   XmlAds.appendChild(XmlAds.createElement("xml"))
 End If



这段,把变成红色的这一行注释掉.
在清除服务器缓存,就行了.'></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/remove-dvbbs-advertisement-method/ itemprop=url class=post-title-link>去掉动网广告“国内使用量最大的动网论坛”的方法</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2006年01月01日 11:14:00 CST" itemprop="dateCreated datePublished" datetime="2006-01-01 11:14:00 +0800 +0800">2006年01月01日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2006年01月01日 11:17:00 CST" itemprop="dateModified dateLastmod" datetime="2006-01-01 11:17:00 +0800 +0800">2006年01月01日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/remove-dvbbs-advertisement-method/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>打开<code>/inc/Dv_ClsOther.asp</code>
找到:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>If IsSqlDataBase = 0 Then
</span></span><span class=line><span class=cl>  If not IsObject(Application(Dvbbs.CacheName &amp; &#34;_TextAdservices&#34;)) Then
</span></span><span class=line><span class=cl>   Set XmlAds=Application(Dvbbs.CacheName &amp; &#34;_TextAdservices&#34;).cloneNode(True)
</span></span><span class=line><span class=cl>  Else
</span></span><span class=line><span class=cl>    Set XmlAds=Server.CreateObject(&#34;Msxml2.FreeThreadedDOMDocument&#34; &amp; MsxmlVersion )
</span></span><span class=line><span class=cl>    XmlAds.appendChild(XmlAds.createElement(&#34;xml&#34;))
</span></span><span class=line><span class=cl>    XmlAds.documentElement.appendChild(XmlAds.createNode(1,&#34;text&#34;,&#34;&#34;)).text=&#34;&lt;iframe src=&#34;&#34;&#34;&amp;Dvbbs_Server_Url&amp;&#34;dvbbs/DvDefaultTextAd.asp&#34;&#34; height=&#34;&#34;23&#34;&#34; width=&#34;&#34;100%&#34;&#34; marginwidth=&#34;&#34;0&#34;&#34; marginheight=&#34;&#34;0&#34;&#34; hspace=&#34;&#34;0&#34;&#34; vspace=&#34;&#34;0&#34;&#34; frameborder=&#34;&#34;0&#34;&#34; scrolling=&#34;&#34;no&#34;&#34;&gt;&lt;/iframe&gt;&#34;
</span></span><span class=line><span class=cl>  End If
</span></span><span class=line><span class=cl> Else
</span></span><span class=line><span class=cl>   Set XmlAds=Server.CreateObject(&#34;Msxml2.FreeThreadedDOMDocument&#34; &amp; MsxmlVersion)
</span></span><span class=line><span class=cl>   XmlAds.appendChild(XmlAds.createElement(&#34;xml&#34;))
</span></span><span class=line><span class=cl> End If</span></span></code></pre></td></tr></table></div></div><p>这段,把变成红色的这一行注释掉.
在清除服务器缓存,就行了.</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/remove-dvbbs-advertisement-method/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/symantec-i32-update-package-vs-x86-update-package-differences/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Symantec 的i32更新包与x86更新包的区别"><meta itemprop=description content="i32 智能更新程序包不能用于更新 Symantec AntiVirus 企业版 8.0、9.0 或 10.0 服务器 或 Norton AntiVirus 企业版 7.6服务器，但是可用于更新企业版客户端。x86 智能更新程序包可用于更新企业版客户端和服务器。
i32更新包可用于以下版本:"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/symantec-i32-update-package-vs-x86-update-package-differences/ itemprop=url class=post-title-link>Symantec 的i32更新包与x86更新包的区别</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年12月24日 13:34:00 CST" itemprop="dateCreated datePublished" datetime="2005-12-24 13:34:00 +0800 +0800">2005年12月24日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/symantec-i32-update-package-vs-x86-update-package-differences/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>i32 智能更新程序包不能用于更新 Symantec AntiVirus 企业版 8.0、9.0 或 10.0 <code>服务器</code> 或 Norton AntiVirus 企业版 7.6<code>服务器</code>，但是可用于更新企业版<code>客户端</code>。x86 智能更新程序包可用于更新企业版客户端和服务器。
i32更新包可用于以下版本:</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/symantec-i32-update-package-vs-x86-update-package-differences/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/remove-powered-by-dvbbs-from-search/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="去掉搜索引擎中的Powered By Dvbbs.net  (动网论坛)"><meta itemprop=description content='在GOOGLE中"GPS发烧友 site:www.gpsfans.com"，出来的链接中后面都带一个Powered By Dvbbs.net，找了半天，原来在Dv_ClsMain.asp的965行，在最后显示有Powered By Dvbbs.net,"&amp;amp;Now()的字样,改成你想要的文字,就行了.'></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/remove-powered-by-dvbbs-from-search/ itemprop=url class=post-title-link>去掉搜索引擎中的Powered By Dvbbs.net (动网论坛)</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年12月19日 17:38:00 CST" itemprop="dateCreated datePublished" datetime="2005-12-19 17:38:00 +0800 +0800">2005年12月19日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/remove-powered-by-dvbbs-from-search/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>在GOOGLE中"GPS发烧友 site:www.gpsfans.com"，出来的链接中后面都带一个Powered By Dvbbs.net，找了半天，原来在<code>Dv_ClsMain.asp</code>的965行，在最后显示有<code>Powered By Dvbbs.net,"&amp;amp;Now()</code>的字样,改成你想要的文字,就行了.</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/remove-powered-by-dvbbs-from-search/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/adsl-knowledge-collection/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="ADSL知识合集"><meta itemprop=description content="1，512K ADSL是什么意思？
512K=512Kbps=512K bits/s=64K bytes/s
我想这个换算应该没什么问题。
2，64K bytes/s意味着什么？
　　这个64K的真正含义是“个人用户所能独享的最大下载带宽”
　　那么这又是什么意思呢，不知道现在有没有人注意过电信ADSL安装的申请表，上面的带宽项目写的是都是“不高于512K”，“不高于8M”等等，也就是说我们在正常的情况下可以拥有最多不超过64K的专有带宽。
　　注意是“不高于”，那么也就是说很多时候我们的专有带宽可能小于64K，那有又是为什么呢？
　　事实上，中国电信的ADSL是运行在ATM上面，ATM到chinanet边缘路由器带宽是155M，每一个边缘路由器可以连接3000用户，如果这些用户同时上网，那么每个用户其实只有50k bit/s的带宽，也就是7K bytes/s，加上路由器衰减，那么最终可能只有普通modem的速度了。
　　当然以上只是假想的情况，毕竟3000人同时连在一台边缘路由器上面几乎是不可能的，电信也不会让路由器满负荷连接而使得速度下降如此之巨。
　　但是，64K是最高专有带宽是毋庸置疑的。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/adsl-knowledge-collection/ itemprop=url class=post-title-link>ADSL知识合集</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年12月09日 16:57:00 CST" itemprop="dateCreated datePublished" datetime="2005-12-09 16:57:00 +0800 +0800">2005年12月09日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/adsl-knowledge-collection/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>1，512K ADSL是什么意思？
512K=512Kbps=512K bits/s=64K bytes/s
我想这个换算应该没什么问题。</p><p>2，64K bytes/s意味着什么？</p><p>　　这个64K的真正含义是“个人用户所能独享的最大下载带宽”
　　那么这又是什么意思呢，不知道现在有没有人注意过电信ADSL安装的申请表，上面的带宽项目写的是都是“不高于512K”，“不高于8M”等等，也就是说我们在正常的情况下可以拥有最多不超过64K的专有带宽。
　　注意是“不高于”，那么也就是说很多时候我们的专有带宽可能小于64K，那有又是为什么呢？
　　事实上，中国电信的ADSL是运行在ATM上面，ATM到chinanet边缘路由器带宽是155M，每一个边缘路由器可以连接3000用户，如果这些用户同时上网，那么每个用户其实只有50k bit/s的带宽，也就是7K bytes/s，加上路由器衰减，那么最终可能只有普通modem的速度了。
　　当然以上只是假想的情况，毕竟3000人同时连在一台边缘路由器上面几乎是不可能的，电信也不会让路由器满负荷连接而使得速度下降如此之巨。
　　但是，64K是最高专有带宽是毋庸置疑的。</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/adsl-knowledge-collection/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/what-is-cnnic/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="CNNIC到底是个什么东西？"><meta itemprop=description content="   前两天，网上传出《网络行业协会点名十大流氓软件》的消息，其中包括cnnic的中文上网插件，还有3721的上网助手、地址栏搜索及网络实名插件，说实在话，我以前很反感3721的上网助手，因为去年我中过一次这个“3721病毒”，差点没让我重装系统，不过这次我觉得把3721再评进去，实在有点冤，不过话说回来，3721也不是什么好鸟，呵呵。   至于cnnic，确实是无耻到极点，且不说整天打着个中国互联网信息中心的招牌，到处招摇撞骗，整天为它的.cn域名做广告，整天找一堆枪手四处散发文章，今天说这个什么.cn域名卖了100万美圆，那个什么卖了20万，这个玉米虫，那个玉米农的。简直就是恶心！   我一般是不会主动去安装什么插件的，前段时间，我在donews里发现一个软件，好象是什么qq聊天机器人的玩意，我就给下载装上了，没想到这小子还带几个伴，其中就有CNNIC中文上网插件，还有什么ebay的，其他的我都一一卸载了，惟独就是CNNIC这个，怎么卸都卸不掉，每次都提示我卸载成功，结果每次都还在，最后实在没办法，找找google看看，没想到搜到的还真不少，看来被强奸的人还真不少。其中有人介绍用3721的上网助手能卸载，一试真还弄好了。然后我把这个3721上网助手卸载掉，打开ie，呵呵，乖乖，3721也在我的浏览器上装了网络实名，呵呵，算了，这次就不跟他计较了，毕竟人家帮了一次忙，索性把3721网络实名也卸掉了，不过还好，轻松搞定。   现在继续说说CNNIC，cnnic到底是个什么玩意呢？看看cnnic的介绍吧！    中国互联网络信息中心（China Internet Network Information Center，简称CNNIC）是经国务院主管部门批准，于1997年6月3日组建的管理和服务机构，行使国家互联网络信息中心的职责。    CNNIC在业务上接受信息产业部领导，在行政上接受中国科学院领导。中国科学院计算机网络信息中心承担CNNIC的运行和管理工作。由国内知名专家、各大互联网络单位代表组成的CNNIC工作委员会，对CNNIC的建设、运行和管理进行监督和评定。    作为中国信息社会基础设施的建设者和运行者，中国互联网络信息中心（CNNIC）以“为我国互联网络用户提供服务，促进我国互联网络健康、有序发展”为宗旨，负责管理维护中国互联网地址系统，引领中国互联网地址行业发展，权威发布中国互联网统计信息，代表中国参与国际互联网社群。大家注意到这段话没？“为我国互联网络用户提供服务，促进我国互联网络健康、有序发展”，不知道CNNIC的人说这些话的时候，会不会心虚呢？不知道是为了网络用户提供服务，还是想强奸广大网络用户，不知道是为了促进网络健康发展，还是为了肆意传播病毒，危害网络健康。很早以前.cn域名是面向所有中国公民开放的，后来不知道什么原因，cnnic取消了个人域名的注册权，并且删除了很多个人注册的域名，这和现在大肆的宣扬“玉米虫”完全自相矛盾，不过想想，也不完全是，目的到是很明确——钱！往死里挣钱。哎&mldr;   最后我还发现在一个有意思的事，在百度里输入“3721 CNNIC”出现了很多关于3721和cnnic之间的故事文章，呵呵，同时看看最下面的相关搜索：相关搜索 cnnic 卸载cnnic cnnic是什么 如何卸载cnnic cnnic cdn 如何删除cnnic cnnic 报告 cnnic 删除 怎样删除cnnic 更多相关搜索&mldr;     看来cnnic真是过街老鼠，呵呵！  最后我借用一下《天下无贼》中黎叔的话，对那些搞流氓插件的人，尤其要对cnnic说：“我最讨厌你们这些做流氓插件的，一点技术含量都没有！”"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/what-is-cnnic/ itemprop=url class=post-title-link>CNNIC到底是个什么东西？</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年11月19日 13:41:00 CST" itemprop="dateCreated datePublished" datetime="2005-11-19 13:41:00 +0800 +0800">2005年11月19日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/toolstips/ itemprop=url rel=index><span itemprop=name>ToolsTips</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/what-is-cnnic/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>   前两天，网上传出《网络行业协会点名十大流氓软件》的消息，其中包括cnnic的中文上网插件，还有3721的上网助手、地址栏搜索及网络实名插件，说实在话，我以前很反感3721的上网助手，因为去年我中过一次这个“3721病毒”，差点没让我重装系统，不过这次我觉得把3721再评进去，实在有点冤，不过话说回来，3721也不是什么好鸟，呵呵。<br><br>   至于cnnic，确实是无耻到极点，且不说整天打着个中国互联网信息中心的招牌，到处招摇撞骗，整天为它的.cn域名做广告，整天找一堆枪手四处散发文章，今天说这个什么.cn域名卖了100万美圆，那个什么卖了20万，这个玉米虫，那个玉米农的。简直就是恶心！<br><br>   我一般是不会主动去安装什么插件的，前段时间，我在donews里发现一个软件，好象是什么qq聊天机器人的玩意，我就给下载装上了，没想到这小子还带几个伴，其中就有CNNIC中文上网插件，还有什么ebay的，其他的我都一一卸载了，惟独就是CNNIC这个，怎么卸都卸不掉，每次都提示我卸载成功，结果每次都还在，最后实在没办法，找找google看看，没想到搜到的还真不少，看来被强奸的人还真不少。其中有人介绍用3721的上网助手能卸载，一试真还弄好了。然后我把这个3721上网助手卸载掉，打开ie，呵呵，乖乖，3721也在我的浏览器上装了网络实名，呵呵，算了，这次就不跟他计较了，毕竟人家帮了一次忙，索性把3721网络实名也卸掉了，不过还好，轻松搞定。<br><br>   现在继续说说CNNIC，cnnic到底是个什么玩意呢？看看cnnic的介绍吧！<br><br>    中国互联网络信息中心（China Internet Network Information Center，简称CNNIC）是经国务院主管部门批准，于1997年6月3日组建的管理和服务机构，行使国家互联网络信息中心的职责。<br><br>    CNNIC在业务上接受信息产业部领导，在行政上接受中国科学院领导。中国科学院计算机网络信息中心承担CNNIC的运行和管理工作。由国内知名专家、各大互联网络单位代表组成的CNNIC工作委员会，对CNNIC的建设、运行和管理进行监督和评定。<br><br>    作为中国信息社会基础设施的建设者和运行者，中国互联网络信息中心（CNNIC）以“为我国互联网络用户提供服务，促进我国互联网络健康、有序发展”为宗旨，负责管理维护中国互联网地址系统，引领中国互联网地址行业发展，权威发布中国互联网统计信息，代表中国参与国际互联网社群。<br><br>大家注意到这段话没？“为我国互联网络用户提供服务，促进我国互联网络健康、有序发展”，不知道CNNIC的人说这些话的时候，会不会心虚呢？不知道是为了网络用户提供服务，还是想强奸广大网络用户，不知道是为了促进网络健康发展，还是为了肆意传播病毒，危害网络健康。很早以前.cn域名是面向所有中国公民开放的，后来不知道什么原因，cnnic取消了个人域名的注册权，并且删除了很多个人注册的域名，这和现在大肆的宣扬“玉米虫”完全自相矛盾，不过想想，也不完全是，目的到是很明确——钱！往死里挣钱。哎&mldr;<br><br>   最后我还发现在一个有意思的事，在百度里输入“3721 CNNIC”出现了很多关于3721和cnnic之间的故事文章，呵呵，同时看看最下面的相关搜索：<br><br>相关搜索 cnnic 卸载cnnic cnnic是什么 如何卸载cnnic cnnic cdn <br>如何删除cnnic cnnic 报告 cnnic 删除 怎样删除cnnic 更多相关搜索&mldr; <br> <br>   看来cnnic真是过街老鼠，呵呵！  最后我借用一下《天下无贼》中黎叔的话，对那些搞流氓插件的人，尤其要对cnnic说：“我最讨厌你们这些做流氓插件的，一点技术含量都没有！”</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/what-is-cnnic/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/premier-japan-visit-diplomacy/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="总理访日遭刁难 舌战群猪体现大国风范"><meta itemprop=description content="这是真实发生的事情，凤凰卫视进行了实况直播（也不知道我们NB烘烘的央视死哪  去了） ：（一个年青的日本女子问） “昨天我家中被贼偷了，有人说是中国人干的，你对这件事怎么看？” 答:南桔北枳：中国有句古话叫做“桔生淮南则为桔，桔生淮北则为枳”。中华民族 是知书达理的民族，人民勤劳、善良，在华夏大地创造出了璀璨的中华文明，贵国 的先民早在唐朝就曾经拜揭过中华帝国，学习过礼仪和文化。但我想在经历了几千 年的洗礼以后，贵国在礼仪上已经遗忘了许多，以至于生长于礼仪之帮的中国人 民，来到贵国就有可能迷失本心。我记得战国时晏子出使楚国，曾经说齐国人可以 在故园安居乐业，而到楚国却成为盗贼，原因仅在于民风问题。因此我建议贵国的 政府应该致力于民众道德礼仪的培养，只有环境好了，才可以杜绝偷盗，才可以从 根本上防止贵国人民忘记礼仪廉耻。 > > > > > > (一日本老头问） “我们很多日本人认为南京大屠杀根本没有发生过，你对这件事 怎么看” > > 答:掩耳盗铃：这个问题其实很简单，首先您的逻辑是错误的。历史是事实，是不 能改变的，不是贵国人民，无论多少认为没有发生就没有发生。历史就是历史，是 已经发生的事情，任何掩耳盗铃的企图都是徒然的。如果我说大多数的中国人都认为日本其实是中华民族的后裔，日本民族起源于我过秦王朝一个方士携三千童男童女东海寻访仙山的事件，我想贵国政府、贵国人民，和您本人也会觉得这是一件非常荒谬的事情。当然我作为中国总理，也觉得这件事情不能接受，因为在心理上我不能容忍中华民族的后裔数典忘祖。 > > > > ]：(一自称日本渔民的年轻人问）“我来自长崎，我们那的水受到了很大的污染， 这是由与跟中国靠得比较近的缘故，你对这件事怎么看” > > 答:疑邻偷斧：您来自长崎，我感到非常的遗憾，为了您失去的亲人，为了遇难死 去的长崎居民，为了那些在二战中受到法西斯迫害的民众而哀悼。战争是残酷的， 是军国主义者用来满足贪欲的工具，作为爱好和平的人民一份子，我们都应当加以 警觉。我在国内的时候也听我国的一些渔民反应过，现在东海打鱼越来越少，他们 把原因归为贵国对海水的污染，开始的时候我不知道是何地，今天您的提醒使我明 了――原来是长崎。当时我就对那些渔民说，你们这种想法是错误并且愚蠢的，不仔细的反思自己的行为，而将原因归结为外在的原因，是在推卸责任，是非常卑劣和无耻的。古时我国有个预言故事叫做“疑邻偷浮”，非常有教育意义，我希望您能在闲暇期间仔细通读，如果有所启发，找到了自己内心的斧头，我们再交流看法。 > > > > ]：(一观众提问）“台湾人民都不想回归中国，为何你们霸权欺压？” > > 答:居心叵测：这是一个老生常谈的话题，我感觉回答起来很容易。讲一个简单的 例子，从前有个母亲含辛茹苦大半辈子，总算将自己的子女养育成人，她感到很欣慰，感觉可以松口气，歇一歇。于是对子女说！“来，回到母亲怀抱来，给妈妈捶 捶背.“然而这个不肖子，却吃惯了软饭，有奶就是娘，回头就不认这个曾经养育过他而今已经骨瘦如柴的母亲，反而对这星星和太阳大喊妈妈，想喝可乐，想要烧饼。那此时母亲应该如何？回答当然是给他一把掌。所谓国有国法，家有家规，无规矩不成方圆，任何事情都有它的规则和限度，台湾问题就是母亲和儿子之间的争吵，别人无权干涉。我国历来都主张和平解决台湾问题，从来都没有出现过霸权欺压的事情，反而总是有一些居心叵测的邻国，以民主、自由等等名义来强奸包括台湾同胞在内的中华民族的自主选择和决定权，这才叫霸权欺压。 > > > > > > 类似的话层出不穷。我想这样的座谈是很刁钻的，安排日本普通民众和朱总理会谈，问很多尖锐的问题来试探中国政府对反 日的决心，以一国的总理的身份当然不便当场和这些人搞僵，否则有失风度.不当场给他们清醒的警钟，日本的反华势力又会嚣张，并由此进一步鼓动或迷惑其他人，他们会说：“你们看，中国总理都不敢当面指责我们日本军人当年的行为，这就充分说明南京大屠杀纯粹是中国政府的 谎言”并且这些民众的来源又很值得怀疑 > > > > 但是朱总理的回答是很见水平的。他是我们的好总理。在回答“你们中国人何时才会停止反复要求我们日本人就战争问题向中国道歉？”这个问题时朱总理毫不妥 协，说道： “日本从未在正式的文件中向中国人民道歉，而不是我们反复要求日本人道歉。中 国人民是不会忘记历史的，因为忘记历史就意味这背叛。” > > > > 整个实况转播都很压抑，总理一个人受到众多充满敌意的提问。一直到一个日本年轻女性提问气氛才有所缓和，这位女士提问“总理最喜欢的歌是什么，能不能给我们演唱？” > > 总理说：“我最喜欢的是国歌，如果我唱你们都得起立。” > > 当然没有人起立，总理也没演唱。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/premier-japan-visit-diplomacy/ itemprop=url class=post-title-link>总理访日遭刁难 舌战群猪体现大国风范</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年11月01日 09:53:00 CST" itemprop="dateCreated datePublished" datetime="2005-11-01 09:53:00 +0800 +0800">2005年11月01日
</time></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/premier-japan-visit-diplomacy/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-size:10pt>这是真实发生的事情，凤凰卫视进行了实况直播（也不知道我们NB烘烘的央视死哪  去了）<br>：（一个年青的日本女子问） “昨天我家中被贼偷了，有人说是中国人干的，你对这件事怎么看？”<br><br>答:南桔北枳：中国有句古话叫做“桔生淮南则为桔，桔生淮北则为枳”。中华民族 是知书达理的民族，人民勤劳、善良，在华夏大地创造出了璀璨的中华文明，贵国 的先民早在唐朝就曾经拜揭过中华帝国，学习过礼仪和文化。但我想在经历了几千 年的洗礼以后，贵国在礼仪上已经遗忘了许多，以至于生长于礼仪之帮的中国人 民，来到贵国就有可能迷失本心。我记得战国时晏子出使楚国，曾经说齐国人可以 在故园安居乐业，而到楚国却成为盗贼，原因仅在于民风问题。因此我建议贵国的 政府应该致力于民众道德礼仪的培养，只有环境好了，才可以杜绝偷盗，才可以从 根本上防止贵国人民忘记礼仪廉耻。<br>> ><br>> ><br>> > (一日本老头问） “我们很多日本人认为南京大屠杀根本没有发生过，你对这件事 怎么看”<br>> ><br>答:掩耳盗铃：这个问题其实很简单，首先您的逻辑是错误的。历史是事实，是不 能改变的，不是贵国人民，无论多少认为没有发生就没有发生。历史就是历史，是 已经发生的事情，任何掩耳盗铃的企图都是徒然的。如果我说大多数的中国人都认为日本其实是中华民族的后裔，日本民族起源于我过秦王朝一个方士携三千童男童女东海寻访仙山的事件，我想贵国政府、贵国人民，和您本人也会觉得这是一件非常荒谬的事情。当然我作为中国总理，也觉得这件事情不能接受，因为在心理上我不能容忍中华民族的后裔数典忘祖。<br>> ><br>> ><br>]：(一自称日本渔民的年轻人问）“我来自长崎，我们那的水受到了很大的污染， 这是由与跟中国靠得比较近的缘故，你对这件事怎么看”<br>> > 答:疑邻偷斧：您来自长崎，我感到非常的遗憾，为了您失去的亲人，为了遇难死 去的长崎居民，为了那些在二战中受到法西斯迫害的民众而哀悼。战争是残酷的， 是军国主义者用来满足贪欲的工具，作为爱好和平的人民一份子，我们都应当加以 警觉。我在国内的时候也听我国的一些渔民反应过，现在东海打鱼越来越少，他们 把原因归为贵国对海水的污染，开始的时候我不知道是何地，今天您的提醒使我明 了――原来是长崎。当时我就对那些渔民说，你们这种想法是错误并且愚蠢的，不仔细的反思自己的行为，而将原因归结为外在的原因，是在推卸责任，是非常卑劣和无耻的。古时我国有个预言故事叫做“疑邻偷浮”，非常有教育意义，我希望您能在闲暇期间仔细通读，如果有所启发，找到了自己内心的斧头，我们再交流看法。<br>> ><br>> > ]：(一观众提问）“台湾人民都不想回归中国，为何你们霸权欺压？”<br>> ><br>答:居心叵测：这是一个老生常谈的话题，我感觉回答起来很容易。讲一个简单的 例子，从前有个母亲含辛茹苦大半辈子，总算将自己的子女养育成人，她感到很欣慰，感觉可以松口气，歇一歇。于是对子女说！“来，回到母亲怀抱来，给妈妈捶 捶背.“然而这个不肖子，却吃惯了软饭，有奶就是娘，回头就不认这个曾经养育过他而今已经骨瘦如柴的母亲，反而对这星星和太阳大喊妈妈，想喝可乐，想要烧饼。那此时母亲应该如何？回答当然是给他一把掌。所谓国有国法，家有家规，无规矩不成方圆，任何事情都有它的规则和限度，台湾问题就是母亲和儿子之间的争吵，别人无权干涉。我国历来都主张和平解决台湾问题，从来都没有出现过霸权欺压的事情，反而总是有一些居心叵测的邻国，以民主、自由等等名义来强奸包括台湾同胞在内的中华民族的自主选择和决定权，这才叫霸权欺压。<br>> ><br>> ><br>> > 类似的话层出不穷。我想这样的座谈是很刁钻的，安排日本普通民众和朱总理会谈，问很多尖锐的问题来试探中国政府对反 日的决心，以一国的总理的身份当然不便当场和这些人搞僵，否则有失风度.不当场给他们清醒的警钟，日本的反华势力又会嚣张，并由此进一步鼓动或迷惑其他人，他们会说：“你们看，中国总理都不敢当面指责我们日本军人当年的行为，这就充分说明南京大屠杀纯粹是中国政府的 谎言”并且这些民众的来源又很值得怀疑<br>> ><br>> > 但是朱总理的回答是很见水平的。他是我们的好总理。在回答“你们中国人何时才会停止反复要求我们日本人就战争问题向中国道歉？”这个问题时朱总理毫不妥 协，说道： “日本从未在正式的文件中向中国人民道歉，而不是我们反复要求日本人道歉。中 国人民是不会忘记历史的，因为忘记历史就意味这背叛。”<br>> ><br>> > 整个实况转播都很压抑，总理一个人受到众多充满敌意的提问。一直到一个日本年轻女性提问气氛才有所缓和，这位女士提问“总理最喜欢的歌是什么，能不能给我们演唱？”<br>> > 总理说：“我最喜欢的是国歌，如果我唱你们都得起立。”<br>> > 当然没有人起立，总理也没演唱。<br></span></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/premier-japan-visit-diplomacy/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/programmer-key-qualities-lazy-and-stupid/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="优秀程序员的两大要素：懒 + 笨"><meta itemprop=description content="　　懒 只有懒惰的程序员才会去编写那些可以最终代替自己工作的自动化工具，才不会成天为了实现相似的功能去编写大段大段冗余重复的代码 - 这种代码往往是软件后期维护和重构的天敌。通常来说，由于惰性的驱使所产生出来的工具和程序将最终极大的提高生产开发的速度。
　　当然，对于一个程序员来说，光光具备懒惰这个要素还是不够的。在享受懒惰之前，他必须以最大的热情和最高的效率去研究解放自己的途径，比如：找到最有助于开发的工具，最能体现&#8220;一次编写，多次复用&#8221;精神的代码架构的设计。只有在这些必要的工作之后，才可能真正享受轻松编程的乐趣。
　　所以&#8220;懒&#8221;的精髓用一句老话来描述，那就是磨刀不误砍柴功。如果你不想办法磨亮手中的柴刀，就算一天二十四小时都在砍柴，效果也不如拿把锋利的斧头一天只砍一小时。
　　从这个角度来说，Google给员工的20%自由时间是完全发挥了&#8220;懒&#8221;的能动力。为了更好的享受偷懒的乐趣，员工会更加具有创造力的去高效完成自己的任务。
　　夸张一点来说，懒惰才是人类进步的原动力。
　　笨 这一点似乎比懒更让人不能接受。在解释这里所说的笨的具体含义之前，我们先看看一个聪明人（或者说认为自己足够聪明）会做什么：
　　1) 停止学习新的东西　　2) 不愿意用批判的眼光去审视自己的工作 
　　第1点将使我们很难去接受或者主动的去研究一项新的技术 - 即使新技术能带给他更多工作上的便利。第2点会使我们无法清晰的分析自身工作的问题所在，要对其进行改进或者重构就更加困难。
　　从这两点来考虑，作为一个程序员太自以为是不见得是件好事情。由于对自身的过于自信，往往无法客观的看待自己和自己的工作。相反的，笨一点（确切的说，谦逊一点）有时候倒有助于开发的顺利进行。举例来说，当程序出现bug的时候，最好尽早承认问题是出在自己编写的代码上面而不是在于编译器（当然除非是字节高低位编码方式之类的问题，这种问题编译器会是错误的根源之一）。如果你太自负的认为自己的程序没有问题而去猜测可能是编译器或者其他的什么外部因素出问题的话，那么十有八九你会在调试过程中走上一长段的弯路。
　　程序员应该笨一些的更为关键的原因在于，当需要思考问题的最佳解决方案的时候，往往要求我们首先要跳出思维定式。你对系统了解的越多，积累了越多的经验，就越难走出已有的局限，可以尝试的范围就越小。相反的，对于一个什么也不懂的门外汉来说，因为没有任何失败的记忆和潜规则的约束，也就没有什么是&#8220;不可能&#8221;的，这样的大脑所能迸发出来的在专业人士看起来愚不可及的想法往往正是解决问题所需要的关键点所在。
　　可能很多程序员都会有类似的经历，在面对别人（尤其是其他部门）对于一个bug的描述的时候，必须把自己摆在一个普通用户而不是程序开发者的角度来分析问题，否则的话可能你永远都想象不到这种错误也会发生。越能让自己变得&#8220;笨&#8221;起来，越能很快的定位到问题所在。我们先看看这么一段关于web开发问题的程序员和客服人员的对话：
　　&#8220;从昨天开始我们的用户就看不到我们站点上的Logo了。&#8221;　　&#8220;他试过重启浏览器么？&#8221;　　&#8220;是的。&#8221;　　&#8220;他试过重启电脑么？&#8221;　　&#8220;是的。&#8221;　　&#8220;他清空过浏览器Cache么？&#8221;　　&#8220;是的。&#8221;　　&#8220;他的浏览器版本是IE6么？&#8221;　　&#8220;是的。&#8221;　　&#8220;他确信是真的看不到Logo了么？&#8221;　　&#8220;是的。&#8221;　　&#8220;他是在电脑显示器屏幕上看我们的站点么？&#8221;　　&#8220;什么？&#8221;　　&#8220;比如说，它可能是打印出来看不到？&#8221;　　&#8220;不。他是在显示器上看的。&#8221;　　&#8220;除了站点Logo之外，他是不是其他的图片都看不到？&#8221;　　&#8220;什么？哦。我再问问他。&#8221;
　　从这段对话来说，估计用户实际上是禁止了浏览器显示图片的功能（或者他儿子干的）。不管怎么样，如果你不是用这种傻瓜式的思维方式去寻找答案的话，可能怎么也找不到问题的根源。　　很多时候，问题发现者对于问题的描述往往是非常片面的，并且加上了主观推测的成分在里面。如果你不能透过这些主观的描述去发现问题的实际表象，或者说根本就是你自己根据程序员的经验逻辑来判断问题所在的话，十有八九会在歧途上越走越远。
　　对于白痴级的问题，只有用白痴的行为方式才能得到答案。
　　即便同样是程序员，但对于你的程序并不熟悉，也会经常有这样的疑问：&#8220;为什么我调用你的代码出错了？&#8221;这种问题的答案，很多时候是因为他们的调用方式不对，或者调用了错误的库文件，或者库文件的版本使用不当，或者根本就没有联接到库文件上。当你想让同事帮你检查一下程序中的一个莫名其妙的bug的时候，一般来说希望他对你的系统了解的越少越好，只有这样他才会问一些你自己认为绝对不可能出问题的&#8220;笨&#8221;问题。
　　所以&#8220;笨&#8221;的精髓在于你如何去思考问题：不要假设些什么，把自己假设的太完美或者把别人假设的很聪明都会使你忽视一些很浅显的事实。思考的前提必须是完整的事实表象，思考的过程必须是抛弃成见的问题跟踪。在发现事实之前作太多的主观思考和臆断，倒不如把自己当作白痴一样来行动更好。
　　当然，不思考的一个极端是不分情况都直接去做，另一个极端是完全脱离事实，用思想办事。一个优秀的程序员应该做好权衡。10次决定里面的1次错误决定不是致命的；只做5次正确的决定而另外5次没有任何决定才更糟糕。
　　最后是一个蜈蚣的故事。蜈蚣本来用自己的几百只脚走路走的很快很好，但他从来没有花时间去想过为什么。直到有一天，一只臭虫问他：&#8220;你是怎么管理好你的几百只脚的？你不觉得这是件很困难的事情吗？&#8221;臭虫问完之后就走了。只剩下蜈蚣坐在地上，不停的思考这个问题，却一直想不出个究竟。从此以后，这只蜈蚣再也没办法好好的走路了。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/programmer-key-qualities-lazy-and-stupid/ itemprop=url class=post-title-link>优秀程序员的两大要素：懒 + 笨</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2005年10月30日 17:00:00 CST" itemprop="dateCreated datePublished" datetime="2005-10-30 17:00:00 +0800 +0800">2005年10月30日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/capricethink/ itemprop=url rel=index><span itemprop=name>CapriceThink</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/programmer-key-qualities-lazy-and-stupid/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>　　<strong>懒</strong> 只有懒惰的程序员才会去编写那些可以最终代替自己工作的自动化工具，才不会成天为了实现相似的功能去编写大段大段冗余重复的代码 - 这种代码往往是软件后期维护和重构的天敌。通常来说，由于惰性的驱使所产生出来的工具和程序将最终极大的提高生产开发的速度。</p><p>　　当然，对于一个程序员来说，光光具备懒惰这个要素还是不够的。在享受懒惰之前，他必须以最大的热情和最高的效率去研究解放自己的途径，比如：找到最有助于开发的工具，最能体现&#8220;一次编写，多次复用&#8221;精神的代码架构的设计。只有在这些必要的工作之后，才可能真正享受轻松编程的乐趣。</p><p>　　所以&#8220;懒&#8221;的精髓用一句老话来描述，那就是磨刀不误砍柴功。如果你不想办法磨亮手中的柴刀，就算一天二十四小时都在砍柴，效果也不如拿把锋利的斧头一天只砍一小时。</p><p>　　从这个角度来说，Google给员工的20%自由时间是完全发挥了&#8220;懒&#8221;的能动力。为了更好的享受偷懒的乐趣，员工会更加具有创造力的去高效完成自己的任务。</p><p>　　夸张一点来说，懒惰才是人类进步的原动力。</p><p>　　<strong>笨</strong> 这一点似乎比懒更让人不能接受。在解释这里所说的笨的具体含义之前，我们先看看一个聪明人（或者说认为自己足够聪明）会做什么：</p><p>　　1) 停止学习新的东西<br>　　2) 不愿意用批判的眼光去审视自己的工作</p><p>　　第1点将使我们很难去接受或者主动的去研究一项新的技术 - 即使新技术能带给他更多工作上的便利。第2点会使我们无法清晰的分析自身工作的问题所在，要对其进行改进或者重构就更加困难。</p><p>　　从这两点来考虑，作为一个程序员太自以为是不见得是件好事情。由于对自身的过于自信，往往无法客观的看待自己和自己的工作。相反的，笨一点（确切的说，谦逊一点）有时候倒有助于开发的顺利进行。举例来说，当程序出现bug的时候，最好尽早承认问题是出在自己编写的代码上面而不是在于编译器（当然除非是字节高低位编码方式之类的问题，这种问题编译器会是错误的根源之一）。如果你太自负的认为自己的程序没有问题而去猜测可能是编译器或者其他的什么外部因素出问题的话，那么十有八九你会在调试过程中走上一长段的弯路。</p><p>　　程序员应该笨一些的更为关键的原因在于，当需要思考问题的最佳解决方案的时候，往往要求我们首先要跳出思维定式。你对系统了解的越多，积累了越多的经验，就越难走出已有的局限，可以尝试的范围就越小。相反的，对于一个什么也不懂的门外汉来说，因为没有任何失败的记忆和潜规则的约束，也就没有什么是&#8220;不可能&#8221;的，这样的大脑所能迸发出来的在专业人士看起来愚不可及的想法往往正是解决问题所需要的关键点所在。</p><p>　　可能很多程序员都会有类似的经历，在面对别人（尤其是其他部门）对于一个bug的描述的时候，必须把自己摆在一个普通用户而不是程序开发者的角度来分析问题，否则的话可能你永远都想象不到这种错误也会发生。越能让自己变得&#8220;笨&#8221;起来，越能很快的定位到问题所在。我们先看看这么一段关于web开发问题的程序员和客服人员的对话：</p><p>　　&#8220;从昨天开始我们的用户就看不到我们站点上的Logo了。&#8221;<br>　　&#8220;他试过重启浏览器么？&#8221;<br>　　&#8220;是的。&#8221;<br>　　&#8220;他试过重启电脑么？&#8221;<br>　　&#8220;是的。&#8221;<br>　　&#8220;他清空过浏览器Cache么？&#8221;<br>　　&#8220;是的。&#8221;<br>　　&#8220;他的浏览器版本是IE6么？&#8221;<br>　　&#8220;是的。&#8221;<br>　　&#8220;他确信是真的看不到Logo了么？&#8221;<br>　　&#8220;是的。&#8221;<br>　　&#8220;他是在电脑显示器屏幕上看我们的站点么？&#8221;<br>　　&#8220;什么？&#8221;<br>　　&#8220;比如说，它可能是打印出来看不到？&#8221;<br>　　&#8220;不。他是在显示器上看的。&#8221;<br>　　&#8220;除了站点Logo之外，他是不是其他的图片都看不到？&#8221;<br>　　&#8220;什么？哦。我再问问他。&#8221;</p><p>　　从这段对话来说，估计用户实际上是禁止了浏览器显示图片的功能（或者他儿子干的）。不管怎么样，如果你不是用这种傻瓜式的思维方式去寻找答案的话，可能怎么也找不到问题的根源。　　很多时候，问题发现者对于问题的描述往往是非常片面的，并且加上了主观推测的成分在里面。如果你不能透过这些主观的描述去发现问题的实际表象，或者说根本就是你自己根据程序员的经验逻辑来判断问题所在的话，十有八九会在歧途上越走越远。</p><p>　　对于白痴级的问题，只有用白痴的行为方式才能得到答案。</p><p>　　即便同样是程序员，但对于你的程序并不熟悉，也会经常有这样的疑问：&#8220;为什么我调用你的代码出错了？&#8221;这种问题的答案，很多时候是因为他们的调用方式不对，或者调用了错误的库文件，或者库文件的版本使用不当，或者根本就没有联接到库文件上。当你想让同事帮你检查一下程序中的一个莫名其妙的bug的时候，一般来说希望他对你的系统了解的越少越好，只有这样他才会问一些你自己认为绝对不可能出问题的&#8220;笨&#8221;问题。</p><p>　　所以&#8220;笨&#8221;的精髓在于你如何去思考问题：不要假设些什么，把自己假设的太完美或者把别人假设的很聪明都会使你忽视一些很浅显的事实。思考的前提必须是完整的事实表象，思考的过程必须是抛弃成见的问题跟踪。在发现事实之前作太多的主观思考和臆断，倒不如把自己当作白痴一样来行动更好。</p><p>　　当然，不思考的一个极端是不分情况都直接去做，另一个极端是完全脱离事实，用思想办事。一个优秀的程序员应该做好权衡。10次决定里面的1次错误决定不是致命的；只做5次正确的决定而另外5次没有任何决定才更糟糕。</p><p>　　最后是一个蜈蚣的故事。蜈蚣本来用自己的几百只脚走路走的很快很好，但他从来没有花时间去想过为什么。直到有一天，一只臭虫问他：&#8220;你是怎么管理好你的几百只脚的？你不觉得这是件很困难的事情吗？&#8221;臭虫问完之后就走了。只剩下蜈蚣坐在地上，不停的思考这个问题，却一直想不出个究竟。从此以后，这只蜈蚣再也没办法好好的走路了。</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/programmer-key-qualities-lazy-and-stupid/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" rel=prev href=/post/page/63/><i class="fa fa-angle-left"></i>
</a><a class=page-number href=/post/page/60/>60</a>
<a class=page-number href=/post/page/61/>61</a>
<a class=page-number href=/post/page/62/>62</a>
<a class=page-number href=/post/page/63/>63</a>
<span class="page-number current">64</span>
<a class=page-number href=/post/page/65/>65</a>
<a class=page-number href=/post/page/66/>66</a>
<a class=page-number href=/post/page/67/>67</a>
<a class=page-number href=/post/page/68/>68</a>
<a class="extend next" rel=next href=/post/page/65/><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2026
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.157.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":false,"isPage":false,"path":"post","permalink":"https://blogs.qipai360.cn/post/","title":"Posts","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1772265585" defer></script></body></html>