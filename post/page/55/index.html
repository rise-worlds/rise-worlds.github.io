<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.157.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Posts"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="Rise,ZhangTuohui,技术,C++,Unity3D,Lua,NodeJS,C#,JavaScript,游戏开发,机器学习,深度学习,AI,编程,编程语言,编程技术,编程开发,游戏引擎,游戏设计,游戏制作,游戏开发者,游戏开发者博客,游戏开发者网站,游戏开发者工具,游戏开发者教程,游戏开发者学习,游戏开发者交流,游戏开发者分享,游戏开发者经验,游戏开发者心得,游戏开发者技巧,游戏开发者方法,游戏开发者思路,游戏开发者理念,游戏开发者文化,游戏开发者精神,游戏开发者信仰"><meta property="og:type" content="website"><meta property="og:title" content="Posts"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1772265587"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>post - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>679</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>679</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>35</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>118</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2423147></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5207></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2026-02-28 15:59:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-3/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（3）"><meta itemprop=description content="调整声道平衡所谓声道平衡就是调节左右声道的大小， DirectSound定义了两个宏帮助把声道平衡调节到最左边和最右边，使用DSBPAN_LEFT将声道调整到最左边，使用DSBPAN_RIGHT 将声道调整到最右边。通过调用IDirectSoundBuffer8::SetPan函数可以调节声道平衡。 "></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-3/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（3）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月27日 19:54:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-27 19:54:00 +0800 +0800">2007年07月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:18:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:18:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-3/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#620000>调整声道平衡</span><br><br>所谓声道平衡就是调节左右声道的大小， DirectSound定义了两个宏帮助把声道平衡调节到最左边和最右边，使用DSBPAN_LEFT将声道调整到最左边，使用DSBPAN_RIGHT 将声道调整到最右边。<br><br>通过调用IDirectSoundBuffer8::SetPan函数可以调节声道平衡。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-3/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（2）"><meta itemprop=description content="开始使用主音频缓存让缓存在程序启动的时候开始播放可以节省不少处理器时间。因为内存资源是有限的，特别是在硬件设备中，而你使用的数据缓存可能需要任意大小，因此主音频缓冲区和辅助缓冲区使用环形缓存。因为数据缓冲是一个一维数组，所以可以让这个缓冲区头尾相接。这是一个十分强大的技术，利用这个技术我们可以节省大量的内存。声音在进行混音处理后，被送入环形主音频缓存。一旦播放位置到达主音频缓存的终点，声音又从头开始播放，这样声音就被无间隙地连续播放。如果想要使用缓存的这种循环特性，需要指定启用循环播放的特性，若不然当播放到缓冲区终点时，播放就停止了。为了播放缓存中的音频数据（在开启循环选项的情况下播放），需要调用Play函数。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-2/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（2）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月26日 20:00:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-26 20:00:00 +0800 +0800">2007年07月26日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:19:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:19:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-2/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700;color:#1c6e11>开始使用主音频缓存</span><br><br>让缓存在程序启动的时候开始播放可以节省不少处理器时间。因为内存资源是有限的，特别是在硬件设备中，而你使用的数据缓存可能需要任意大小，因此主音频缓冲区和辅助缓冲区使用环形缓存。因为数据缓冲是一个一维数组，所以可以让这个缓冲区头尾相接。这是一个十分强大的技术，利用这个技术我们可以节省大量的内存。<br><br>声音在进行混音处理后，被送入环形主音频缓存。一旦播放位置到达主音频缓存的终点，声音又从头开始播放，这样声音就被无间隙地连续播放。如果想要使用缓存的这种循环特性，需要指定启用循环播放的特性，若不然当播放到缓冲区终点时，播放就停止了。<br><br>为了播放缓存中的音频数据（在开启循环选项的情况下播放），需要调用Play函数。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-2/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/playing-sound-and-music-with-directx-audio-and-directshow-part-1/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="用DirectX Audio和DirectShow播放声音和音乐（1）"><meta itemprop=description content="音乐就是一系列的音符，这些音符在不同的时间用不同的幅度被播放或者停止。有非常多的指令被用来播放音乐，但是这些指令的操作基本相同，都在使用各种各样不同的音符。在计算机上进行作曲，实际上是存储了很多组音乐，回放时由音频硬件将这些音符播放出来。Midi格式（文件扩展名是.MID）是存储数字音乐的标准格式。DirectMusic 音乐片段（music segments）使用.SGT文件扩展名，其他的相关文件包括乐队文件（band file .BND），这种文件里面包含乐器信息；弦映射表文件（chordmaps file .CDM）包含在回放时修改音乐的和弦指令；样式文件（styles file .STY）包含回放样式信息；模板文件（templates file .TPL）包含创造音乐片段的模板。Midi是一种非常强大的音乐格式，惟一的不利因素是音乐品质依赖于音乐合成器的性能，因为Midi 仅仅记录了音符，其播放的品质由播放音乐的软硬件决定。MP3文件（文件后缀为.MP3）是一种类似于波表文件的文件格式，但是MP3文件和WAV文件最大的区别在于MP3文件将声音压缩到了最小的程度，但是音质却基本不变。可以用DirectShow组件播放MP3文件，DirectShow组件是一个非常强大的多媒体组件，用DirectShow几乎可以播放任何媒体文件，包括声音和音频文件，部分声音文件我们只能用DirectShow播放。 Direct Audio是一个复合组件，它由DirectSound和DirectMusic两个组件组成，DirectMusic在DirectX8中得到了巨大的增强，但是DirectSound基本保持原有的状态。DirectSound是主要的数字声音回放组件。DirectMusic处理所有的乐曲格式，包括MIDI、DirectMusic本地格式文件和波表文件。DirectMusic处理完之后将它们送入DirectSound中做其他处理，这意味着回放MIDI的时候可以使用数字化的乐器。使用DirectSound使用时需要创建一个和声卡通讯的COM对象，用这个COM对象再创造一些独立的声音数据缓冲区（被称之为辅助音频缓冲区 secondary sound buffers）来存储音频数据。缓冲区中的这些数据在主混音缓存（称之为主音频缓存 primary sound buffer）中被混合，然后可以用指定的任何格式播放出来。回放格式通过采样频率、声道数、采样精度排列，可能的采样频率有8000HZ， 11025HZ，22050HZ和44100HZ（CD音质）。对于声道数可以有两个选择：单通道的单声道声音和双通道的立体声声音。采样精度被限制在两种选择上：8位的低质量声音和16位的高保真声音。在没有修改的情况下，DirectSound主缓冲区的默认设置是22025HZ采样率、8位精度、立体声。在DirectSound中可以调整声音的播放速度（这同样会改变声音的音调），调整音量。循环播放等。甚至还可以在一个虚拟的3D环境中播放，以模拟一个实际环绕在周围的声音。需要做的是将声音数据充满缓冲区，如果声音数据太大的话，必须创建流播放方法，加载声音数据中的一小块，当这一小块播放完毕以后，再加载另外的小块数据进缓冲区，一直持续这个过程，直到声音被处理完毕。在缓冲区中调整播放位置可以实现流式音频，当播放完成通知应用程序更新音频数据。这个通知更新的过程我们称之为“通告”。在同一时间被播放的缓存数目虽然没有限制，但是仍然需要保证缓冲区数目不要太多，因为每增加一个缓冲区，就要消耗很多内存和CPU资源。在项目中使用DirectSound和DirectMusic，需要添加头文件dsound.h和dmsuic.h，并且需要链接DSound.lib到包含库中，添加DXGuid.lib库可以让DirectSound更容易使用。以下是DirectSound COM接口：IDirectSound8：DirectSound接口。IDirectSoundBuffer8：主缓冲区和辅助缓冲区接口，保存数据并控制回放。IDirectSoundNotify8：通知对象，通知应用程序指定播放位置已经达到。IDirectSound8是主接口，用它来创建缓冲区（IDirectSoundBuffer8），然后用缓冲区接口创建通告接口（IDirectSoundNotify8），通告接口告诉应用程序指定的位置已经到达，通告接口在流化音频文件时非常有用。初始化DirectSound使用 DirectSound的第一步是创建IDirectSound8对象，IDirectSound8起到控制音频硬件设备的作用，可以通过 DirectSoundCreate8函数来创建。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-1/ itemprop=url class=post-title-link>用DirectX Audio和DirectShow播放声音和音乐（1）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月26日 17:51:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-26 17:51:00 +0800 +0800">2007年07月26日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:19:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:19:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-1/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>音乐就是一系列的音符，这些音符在不同的时间用不同的幅度被播放或者停止。有非常多的指令被用来播放音乐，但是这些指令的操作基本相同，都在使用各种各样不同的音符。在计算机上进行作曲，实际上是存储了很多组音乐，回放时由音频硬件将这些音符播放出来。<br><br>Midi格式（文件扩展名是.MID）是存储数字音乐的标准格式。<br><br>DirectMusic 音乐片段（music segments）使用.SGT文件扩展名，其他的相关文件包括乐队文件（band file .BND），这种文件里面包含乐器信息；弦映射表文件（chordmaps file .CDM）包含在回放时修改音乐的和弦指令；样式文件（styles file .STY）包含回放样式信息；模板文件（templates file .TPL）包含创造音乐片段的模板。<br><br>Midi是一种非常强大的音乐格式，惟一的不利因素是音乐品质依赖于音乐合成器的性能，因为Midi 仅仅记录了音符，其播放的品质由播放音乐的软硬件决定。MP3文件（文件后缀为.MP3）是一种类似于波表文件的文件格式，但是MP3文件和WAV文件最大的区别在于MP3文件将声音压缩到了最小的程度，但是音质却基本不变。可以用DirectShow组件播放MP3文件，DirectShow组件是一个非常强大的多媒体组件，用DirectShow几乎可以播放任何媒体文件，包括声音和音频文件，部分声音文件我们只能用DirectShow播放。<br><br>Direct Audio是一个复合组件，它由DirectSound和DirectMusic两个组件组成，DirectMusic在DirectX8中得到了巨大的增强，但是DirectSound基本保持原有的状态。DirectSound是主要的数字声音回放组件。DirectMusic处理所有的乐曲格式，包括MIDI、DirectMusic本地格式文件和波表文件。DirectMusic处理完之后将它们送入DirectSound中做其他处理，这意味着回放MIDI的时候可以使用数字化的乐器。<br><br><span style=font-weight:700;color:#2c3076>使用DirectSound</span><br><br>使用时需要创建一个和声卡通讯的COM对象，用这个COM对象再创造一些独立的声音数据缓冲区（被称之为辅助音频缓冲区 secondary sound buffers）来存储音频数据。缓冲区中的这些数据在主混音缓存（称之为主音频缓存 primary sound buffer）中被混合，然后可以用指定的任何格式播放出来。回放格式通过采样频率、声道数、采样精度排列，可能的采样频率有8000HZ， 11025HZ，22050HZ和44100HZ（CD音质）。<br><br>对于声道数可以有两个选择：单通道的单声道声音和双通道的立体声声音。采样精度被限制在两种选择上：8位的低质量声音和16位的高保真声音。在没有修改的情况下，DirectSound主缓冲区的默认设置是22025HZ采样率、8位精度、立体声。在DirectSound中可以调整声音的播放速度（这同样会改变声音的音调），调整音量。循环播放等。甚至还可以在一个虚拟的3D环境中播放，以模拟一个实际环绕在周围的声音。<br><br>需要做的是将声音数据充满缓冲区，如果声音数据太大的话，必须创建流播放方法，加载声音数据中的一小块，当这一小块播放完毕以后，再加载另外的小块数据进缓冲区，一直持续这个过程，直到声音被处理完毕。在缓冲区中调整播放位置可以实现流式音频，当播放完成通知应用程序更新音频数据。这个通知更新的过程我们称之为“通告”。在同一时间被播放的缓存数目虽然没有限制，但是仍然需要保证缓冲区数目不要太多，因为每增加一个缓冲区，就要消耗很多内存和CPU资源。<br><br>在项目中使用DirectSound和DirectMusic，需要添加头文件dsound.h和dmsuic.h，并且需要链接DSound.lib到包含库中，添加DXGuid.lib库可以让DirectSound更容易使用。<br><br>以下是DirectSound COM接口：<br><br>IDirectSound8：DirectSound接口。<br>IDirectSoundBuffer8：主缓冲区和辅助缓冲区接口，保存数据并控制回放。<br>IDirectSoundNotify8：通知对象，通知应用程序指定播放位置已经达到。<br><br>IDirectSound8是主接口，用它来创建缓冲区（IDirectSoundBuffer8），然后用缓冲区接口创建通告接口（IDirectSoundNotify8），通告接口告诉应用程序指定的位置已经到达，通告接口在流化音频文件时非常有用。<br><br><span style=font-weight:700;color:#2c3076>初始化DirectSound</span><br><br>使用 DirectSound的第一步是创建IDirectSound8对象，IDirectSound8起到控制音频硬件设备的作用，可以通过 DirectSoundCreate8函数来创建。<br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/playing-sound-and-music-with-directx-audio-and-directshow-part-1/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/introduction-to-mmorpg-development/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="MMORPG开发入门[转]"><meta itemprop=description content="原著：Radu Privantu
翻译：pAnic
2005年5月11日
原文出处：http://www.devmaster.net/articles/building-mmorpg"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/introduction-to-mmorpg-development/ itemprop=url class=post-title-link>MMORPG开发入门[转]</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月25日 17:13:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-25 17:13:00 +0800 +0800">2007年07月25日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/introduction-to-mmorpg-development/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>原著：Radu Privantu
翻译：pAnic
2005年5月11日</p><p>原文出处：http://www.devmaster.net/articles/building-mmorpg</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/introduction-to-mmorpg-development/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/using-directinput-for-interaction-part-3/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectInput进行交互（3）"><meta itemprop=description content='除了指定的是鼠标标识符以及鼠标数据格式外，初始化鼠标就和初始化键盘几乎完全相同。
//--------------------------------------------------------------------------------//&nbsp;Initialize&nbsp;mouse&nbsp;interface,&nbsp;return&nbsp;a&nbsp;mouse&nbsp;interface&nbsp;pointer.//--------------------------------------------------------------------------------IDirectInputDevice8*&nbsp;Init_Mouse(HWND&nbsp;hwnd,&nbsp;IDirectInput8*&nbsp;directinput){&nbsp;&nbsp;&nbsp;&nbsp;IDirectInputDevice8*&nbsp;directinput_device;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;device&nbsp;object&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput->CreateDevice(GUID_SysMouse,&nbsp;&amp;directinput_device,&nbsp;NULL)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;data&nbsp;format&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->SetDataFormat(&amp;c_dfDIMouse)))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;coooperative&nbsp;mode&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->SetCooperativeLevel(hwnd,&nbsp;DISCL_FOREGROUND&nbsp;|&nbsp;DISCL_NONEXCLUSIVE)))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;acquire&nbsp;the&nbsp;device&nbsp;for&nbsp;use&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->Acquire()))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;everything&nbsp;well,&nbsp;so&nbsp;return&nbsp;a&nbsp;vaild&nbsp;pointer.&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;directinput_device;}要调用DirectInputDevice8::GetDeviceState，使用诸如相对移动和按键状态等鼠标的相关信息来填充 DIMOUSESTATE结构体。DIMOUSESTATE结构体的定义如下：Describes the state of a mouse device that has up to four buttons, or another device that is being accessed as if it were a mouse device. This structure is used with the IDirectInputDevice8::GetDeviceState method.Syntaxtypedef struct DIMOUSESTATE {&nbsp;&nbsp;&nbsp; LONG lX;&nbsp;&nbsp;&nbsp; LONG lY;&nbsp;&nbsp;&nbsp; LONG lZ;&nbsp;&nbsp;&nbsp; BYTE rgbButtons[4];} DIMOUSESTATE, *LPDIMOUSESTATE;MemberslXX-axis. lYY-axis. lZZ-axis, typically a wheel. If the mouse does not have a z-axis, the value is 0. rgbButtonsArray of buttons. The high-order bit of the byte is set if the corresponding button is down. RemarksYou must prepare the device for mouse-style access by calling the IDirectInputDevice8::SetDataFormat method, passing the c_dfDIMouse global data format variable.The mouse is a relative-axis device, so the absolute axis positions for mouse axes are accumulated relative motion. Therefore, the value of the absolute axis position is not meaningful except in comparison with other absolute axis positions.If an axis is in relative mode, the appropriate member contains the change in position. If it is in absolute mode, the member contains the absolute axis position.点击下载源码和工程完整源码示例：
/***************************************************************************************PURPOSE:&nbsp;&nbsp;&nbsp;&nbsp;Mouse&nbsp;device&nbsp;Demo&nbsp;***************************************************************************************/#define&nbsp;DIRECTINPUT_VERSION&nbsp;0x0800#include&nbsp;<windows.h>#include&nbsp;<stdio.h>#include&nbsp;<dinput.h>#include&nbsp;"resource.h"#pragma&nbsp;comment(lib,&nbsp;"dxguid.lib")#pragma&nbsp;comment(lib,&nbsp;"dinput8.lib")#pragma&nbsp;warning(disable&nbsp;:&nbsp;4996)#define&nbsp;Safe_Release(p)&nbsp;if((p))&nbsp;(p)->Release();//&nbsp;window&nbsp;handles,&nbsp;class&nbsp;and&nbsp;caption&nbsp;text.HWND&nbsp;g_hwnd;char&nbsp;g_class_name[]&nbsp;=&nbsp;"MouseClass";IDirectInput8*&nbsp;g_directinput;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;directinput&nbsp;componentIDirectInputDevice8*&nbsp;g_directinput_device;&nbsp;&nbsp;//&nbsp;mouse&nbsp;device//--------------------------------------------------------------------------------//&nbsp;Window&nbsp;procedure.//--------------------------------------------------------------------------------long&nbsp;WINAPI&nbsp;Window_Proc(HWND&nbsp;hwnd,&nbsp;UINT&nbsp;msg,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam){&nbsp;&nbsp;&nbsp;&nbsp;switch(msg)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;WM_DESTROY:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostQuitMessage(0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(long)&nbsp;DefWindowProc(hwnd,&nbsp;msg,&nbsp;wParam,&nbsp;lParam);}//--------------------------------------------------------------------------------//&nbsp;Initialize&nbsp;mouse&nbsp;interface,&nbsp;return&nbsp;a&nbsp;mouse&nbsp;interface&nbsp;pointer.//--------------------------------------------------------------------------------IDirectInputDevice8*&nbsp;Init_Mouse(HWND&nbsp;hwnd,&nbsp;IDirectInput8*&nbsp;directinput){&nbsp;&nbsp;&nbsp;&nbsp;IDirectInputDevice8*&nbsp;directinput_device;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;device&nbsp;object&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput->CreateDevice(GUID_SysMouse,&nbsp;&amp;directinput_device,&nbsp;NULL)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;data&nbsp;format&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->SetDataFormat(&amp;c_dfDIMouse)))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;coooperative&nbsp;mode&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->SetCooperativeLevel(hwnd,&nbsp;DISCL_FOREGROUND&nbsp;|&nbsp;DISCL_NONEXCLUSIVE)))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;acquire&nbsp;the&nbsp;device&nbsp;for&nbsp;use&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(directinput_device->Acquire()))&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;everything&nbsp;well,&nbsp;so&nbsp;return&nbsp;a&nbsp;vaild&nbsp;pointer.&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;directinput_device;}//--------------------------------------------------------------------------------//&nbsp;Read&nbsp;mouse&nbsp;buffer.//--------------------------------------------------------------------------------BOOL&nbsp;Read_Device(IDirectInputDevice8*&nbsp;directinput_device,&nbsp;void*&nbsp;buffer,&nbsp;long&nbsp;buffer_size){&nbsp;&nbsp;&nbsp;&nbsp;HRESULT&nbsp;rv;&nbsp;&nbsp;&nbsp;&nbsp;while(1)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;poll&nbsp;device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device->Poll();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;read&nbsp;in&nbsp;state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(SUCCEEDED(rv&nbsp;=&nbsp;g_directinput_device->GetDeviceState(buffer_size,&nbsp;buffer)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;return&nbsp;when&nbsp;an&nbsp;unknown&nbsp;error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(rv&nbsp;!=&nbsp;DIERR_INPUTLOST&nbsp;||&nbsp;rv&nbsp;!=&nbsp;DIERR_NOTACQUIRED)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;FALSE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;re-acquire&nbsp;and&nbsp;try&nbsp;again&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(FAILED(g_directinput_device->Acquire()))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;FALSE;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;TRUE;}//--------------------------------------------------------------------------------//&nbsp;Main&nbsp;function,&nbsp;routine&nbsp;entry.//--------------------------------------------------------------------------------int&nbsp;WINAPI&nbsp;WinMain(HINSTANCE&nbsp;inst,&nbsp;HINSTANCE,&nbsp;LPSTR&nbsp;cmd_line,&nbsp;int&nbsp;cmd_show){&nbsp;&nbsp;&nbsp;&nbsp;WNDCLASS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;win_class;&nbsp;&nbsp;&nbsp;&nbsp;MSG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg;&nbsp;&nbsp;&nbsp;&nbsp;DIMOUSESTATE&nbsp;&nbsp;&nbsp;&nbsp;mouse_state&nbsp;=&nbsp;{0};&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text[256];&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_pos&nbsp;=&nbsp;0,&nbsp;y_pos&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;window&nbsp;class&nbsp;and&nbsp;register&nbsp;it&nbsp;&nbsp;&nbsp;&nbsp;win_class.style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;CS_HREDRAW&nbsp;|&nbsp;CS_VREDRAW;&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpfnWndProc&nbsp;&nbsp;&nbsp;=&nbsp;Window_Proc;&nbsp;&nbsp;&nbsp;&nbsp;win_class.cbClsExtra&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;win_class.cbWndExtra&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;DLGWINDOWEXTRA;&nbsp;&nbsp;&nbsp;&nbsp;win_class.hInstance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;inst;&nbsp;&nbsp;&nbsp;&nbsp;win_class.hIcon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;LoadIcon(inst,&nbsp;IDI_APPLICATION);&nbsp;&nbsp;&nbsp;&nbsp;win_class.hCursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;LoadCursor(NULL,&nbsp;IDC_ARROW);&nbsp;&nbsp;&nbsp;&nbsp;win_class.hbrBackground&nbsp;=&nbsp;(HBRUSH)&nbsp;(COLOR_BTNFACE&nbsp;+&nbsp;1);&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpszMenuName&nbsp;&nbsp;=&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpszClassName&nbsp;=&nbsp;g_class_name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!&nbsp;RegisterClass(&amp;win_class))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;FALSE;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;main&nbsp;window&nbsp;&nbsp;&nbsp;&nbsp;g_hwnd&nbsp;=&nbsp;CreateDialog(inst,&nbsp;MAKEINTRESOURCE(IDD_MOUSE),&nbsp;0,&nbsp;NULL);&nbsp;&nbsp;&nbsp;&nbsp;ShowWindow(g_hwnd,&nbsp;cmd_show);&nbsp;&nbsp;&nbsp;&nbsp;UpdateWindow(g_hwnd);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initialize&nbsp;directinput&nbsp;and&nbsp;get&nbsp;keyboard&nbsp;device&nbsp;&nbsp;&nbsp;&nbsp;DirectInput8Create(inst,&nbsp;DIRECTINPUT_VERSION,&nbsp;IID_IDirectInput8,&nbsp;(void&nbsp;**)&nbsp;&amp;g_directinput,&nbsp;NULL);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initialize&nbsp;mouse&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device&nbsp;=&nbsp;Init_Mouse(g_hwnd,&nbsp;g_directinput);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;start&nbsp;message&nbsp;pump,&nbsp;waiting&nbsp;for&nbsp;signal&nbsp;to&nbsp;quit.&nbsp;&nbsp;&nbsp;&nbsp;ZeroMemory(&amp;msg,&nbsp;sizeof(MSG));&nbsp;&nbsp;&nbsp;&nbsp;while(msg.message&nbsp;!=&nbsp;WM_QUIT)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(PeekMessage(&amp;msg,&nbsp;NULL,&nbsp;0,&nbsp;0,&nbsp;PM_REMOVE))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslateMessage(&amp;msg);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispatchMessage(&amp;msg);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;read&nbsp;in&nbsp;mouse&nbsp;and&nbsp;display&nbsp;coordinates&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Read_Device(g_directinput_device,&nbsp;&amp;mouse_state,&nbsp;sizeof(DIMOUSESTATE));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_pos&nbsp;+=&nbsp;mouse_state.lX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y_pos&nbsp;+=&nbsp;mouse_state.lY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mouse_state.lX&nbsp;!=&nbsp;0&nbsp;||&nbsp;mouse_state.lY&nbsp;!=&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf(text,&nbsp;"%ld,&nbsp;%ld",&nbsp;x_pos,&nbsp;y_pos);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetWindowText(GetDlgItem(g_hwnd,&nbsp;IDC_COORDINATES),&nbsp;text);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;release&nbsp;directinput&nbsp;objects&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device->Unacquire();&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device->Release();&nbsp;&nbsp;&nbsp;&nbsp;g_directinput->Release();&nbsp;&nbsp;&nbsp;&nbsp;UnregisterClass(g_class_name,&nbsp;inst);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)&nbsp;msg.wParam;}运行截图:'></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/using-directinput-for-interaction-part-3/ itemprop=url class=post-title-link>使用DirectInput进行交互（3）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月25日 15:14:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-25 15:14:00 +0800 +0800">2007年07月25日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:20:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:20:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/using-directinput-for-interaction-part-3/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>除了指定的是鼠标标识符以及鼠标数据格式外，初始化鼠标就和初始化键盘几乎完全相同。<br><br></p><div style="border-right:#fff 1px solid;padding-right:5px;border-top:#fff 1px solid;padding-left:4px;font-size:13px;padding-bottom:4px;border-left:#fff 1px solid;width:98%;padding-top:4px;border-bottom:#fff 1px solid;background-color:#fff"><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------<br></span><span style=color:green>//</span><span style=color:green>&nbsp;Initialize&nbsp;mouse&nbsp;interface,&nbsp;return&nbsp;a&nbsp;mouse&nbsp;interface&nbsp;pointer.<br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------</span><span style=color:green><br></span><span style=color:#000>IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;Init_Mouse(HWND&nbsp;hwnd,&nbsp;IDirectInput8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;directinput)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;directinput_device;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;create&nbsp;the&nbsp;device&nbsp;object</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput</span><span style=color:#000>-></span><span style=color:#000>CreateDevice(GUID_SysMouse,&nbsp;</span><span style=color:#000>&</span><span style=color:#000>directinput_device,&nbsp;NULL)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;set&nbsp;the&nbsp;data&nbsp;format</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>SetDataFormat(</span><span style=color:#000>&</span><span style=color:#000>c_dfDIMouse)))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;set&nbsp;the&nbsp;coooperative&nbsp;mode</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>SetCooperativeLevel(hwnd,&nbsp;DISCL_FOREGROUND&nbsp;</span><span style=color:#000>|</span><span style=color:#000>&nbsp;DISCL_NONEXCLUSIVE)))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;acquire&nbsp;the&nbsp;device&nbsp;for&nbsp;use</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>Acquire()))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;everything&nbsp;well,&nbsp;so&nbsp;return&nbsp;a&nbsp;vaild&nbsp;pointer.</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;directinput_device;<br>}</span></div><br>要调用DirectInputDevice8::GetDeviceState，使用诸如相对移动和按键状态等鼠标的相关信息来填充 DIMOUSESTATE结构体。<br><br>DIMOUSESTATE结构体的定义如下：<br><br>Describes the state of a mouse device that has up to four buttons, or another device that is being accessed as if it were a mouse device. This structure is used with the IDirectInputDevice8::GetDeviceState method.<br><br><span style=font-weight:700;color:#208238>Syntax</span><br><br>typedef struct DIMOUSESTATE {<br>&nbsp;&nbsp;&nbsp; LONG lX;<br>&nbsp;&nbsp;&nbsp; LONG lY;<br>&nbsp;&nbsp;&nbsp; LONG lZ;<br>&nbsp;&nbsp;&nbsp; BYTE rgbButtons[4];<br>} DIMOUSESTATE, *LPDIMOUSESTATE;<br><br><span style=font-weight:700;color:#208238>Members</span><br><br>lX<br>X-axis.<br><br>lY<br>Y-axis.<br><br>lZ<br>Z-axis, typically a wheel. If the mouse does not have a z-axis, the value is 0.<br><br>rgbButtons<br>Array of buttons. The high-order bit of the byte is set if the corresponding button is down.<br><br><span style=font-weight:700;color:#208238>Remarks</span><br><br>You must prepare the device for mouse-style access by calling the IDirectInputDevice8::SetDataFormat method, passing the c_dfDIMouse global data format variable.<br><br>The mouse is a relative-axis device, so the absolute axis positions for mouse axes are accumulated relative motion. Therefore, the value of the absolute axis position is not meaningful except in comparison with other absolute axis positions.<br><br>If an axis is in relative mode, the appropriate member contains the change in position. If it is in absolute mode, the member contains the absolute axis position.<br><br><a href=http://www.cppblog.com/Files/lovedday/Mouse.rar><font color=#1b1b1b>点击下载源码和工程</font></a><br><br>完整源码示例：<br><br><div style="border-right:#fff 1px solid;padding-right:5px;border-top:#fff 1px solid;padding-left:4px;font-size:13px;padding-bottom:4px;border-left:#fff 1px solid;width:98%;padding-top:4px;border-bottom:#fff 1px solid;background-color:#fff"><span style=color:green>/*</span><span style=color:green>**************************************************************************************<br>PURPOSE:<br>&nbsp;&nbsp;&nbsp;&nbsp;Mouse&nbsp;device&nbsp;Demo<br>&nbsp;**************************************************************************************</span><span style=color:green>*/</span><span style=color:#000><br><br></span><span style=color:#00f>#define</span><span style=color:#000>&nbsp;DIRECTINPUT_VERSION&nbsp;0x0800</span><span style=color:#000><br><br>#include&nbsp;</span><span style=color:#000>&lt;</span><span style=color:#000>windows.h</span><span style=color:#000>></span><span style=color:#000><br>#include&nbsp;</span><span style=color:#000>&lt;</span><span style=color:#000>stdio.h</span><span style=color:#000>></span><span style=color:#000><br>#include&nbsp;</span><span style=color:#000>&lt;</span><span style=color:#000>dinput.h</span><span style=color:#000>></span><span style=color:#000><br>#include&nbsp;</span><span style=color:#000>"</span><span style=color:#000>resource.h</span><span style=color:#000>"</span><span style=color:#000><br><br>#pragma&nbsp;comment(lib,&nbsp;</span><span style=color:#000>"</span><span style=color:#000>dxguid.lib</span><span style=color:#000>"</span><span style=color:#000>)<br>#pragma&nbsp;comment(lib,&nbsp;</span><span style=color:#000>"</span><span style=color:#000>dinput8.lib</span><span style=color:#000>"</span><span style=color:#000>)<br><br>#pragma&nbsp;warning(disable&nbsp;:&nbsp;</span><span style=color:#000>4996</span><span style=color:#000>)<br><br></span><span style=color:#00f>#define</span><span style=color:#000>&nbsp;Safe_Release(p)&nbsp;if((p))&nbsp;(p)->Release();</span><span style=color:#000><br><br></span><span style=color:green>//</span><span style=color:green>&nbsp;window&nbsp;handles,&nbsp;class&nbsp;and&nbsp;caption&nbsp;text.</span><span style=color:green><br></span><span style=color:#000>HWND&nbsp;g_hwnd;<br></span><span style=color:#00f>char</span><span style=color:#000>&nbsp;g_class_name[]&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;</span><span style=color:#000>"</span><span style=color:#000>MouseClass</span><span style=color:#000>"</span><span style=color:#000>;<br><br>IDirectInput8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;g_directinput;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;directinput&nbsp;component</span><span style=color:green><br></span><span style=color:#000>IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;g_directinput_device;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;mouse&nbsp;device<br><br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------<br></span><span style=color:green>//</span><span style=color:green>&nbsp;Window&nbsp;procedure.<br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------</span><span style=color:green><br></span><span style=color:#00f>long</span><span style=color:#000>&nbsp;WINAPI&nbsp;Window_Proc(HWND&nbsp;hwnd,&nbsp;UINT&nbsp;msg,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>switch</span><span style=color:#000>(msg)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>case</span><span style=color:#000>&nbsp;WM_DESTROY:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostQuitMessage(</span><span style=color:#000>0</span><span style=color:#000>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;(</span><span style=color:#00f>long</span><span style=color:#000>)&nbsp;DefWindowProc(hwnd,&nbsp;msg,&nbsp;wParam,&nbsp;lParam);<br>}<br><br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------<br></span><span style=color:green>//</span><span style=color:green>&nbsp;Initialize&nbsp;mouse&nbsp;interface,&nbsp;return&nbsp;a&nbsp;mouse&nbsp;interface&nbsp;pointer.<br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------</span><span style=color:green><br></span><span style=color:#000>IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;Init_Mouse(HWND&nbsp;hwnd,&nbsp;IDirectInput8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;directinput)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;directinput_device;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;create&nbsp;the&nbsp;device&nbsp;object</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput</span><span style=color:#000>-></span><span style=color:#000>CreateDevice(GUID_SysMouse,&nbsp;</span><span style=color:#000>&</span><span style=color:#000>directinput_device,&nbsp;NULL)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;set&nbsp;the&nbsp;data&nbsp;format</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>SetDataFormat(</span><span style=color:#000>&</span><span style=color:#000>c_dfDIMouse)))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;set&nbsp;the&nbsp;coooperative&nbsp;mode</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>SetCooperativeLevel(hwnd,&nbsp;DISCL_FOREGROUND&nbsp;</span><span style=color:#000>|</span><span style=color:#000>&nbsp;DISCL_NONEXCLUSIVE)))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;acquire&nbsp;the&nbsp;device&nbsp;for&nbsp;use</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(directinput_device</span><span style=color:#000>-></span><span style=color:#000>Acquire()))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;everything&nbsp;well,&nbsp;so&nbsp;return&nbsp;a&nbsp;vaild&nbsp;pointer.</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;directinput_device;<br>}<br><br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------<br></span><span style=color:green>//</span><span style=color:green>&nbsp;Read&nbsp;mouse&nbsp;buffer.<br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------</span><span style=color:green><br></span><span style=color:#000>BOOL&nbsp;Read_Device(IDirectInputDevice8</span><span style=color:#000>*</span><span style=color:#000>&nbsp;directinput_device,&nbsp;</span><span style=color:#00f>void</span><span style=color:#000>*</span><span style=color:#000>&nbsp;buffer,&nbsp;</span><span style=color:#00f>long</span><span style=color:#000>&nbsp;buffer_size)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;HRESULT&nbsp;rv;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>while</span><span style=color:#000>(</span><span style=color:#000>1</span><span style=color:#000>)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;poll&nbsp;device</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device</span><span style=color:#000>-></span><span style=color:#000>Poll();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;read&nbsp;in&nbsp;state</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(SUCCEEDED(rv&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;g_directinput_device</span><span style=color:#000>-></span><span style=color:#000>GetDeviceState(buffer_size,&nbsp;buffer)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>break</span><span style=color:#000>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;return&nbsp;when&nbsp;an&nbsp;unknown&nbsp;error</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(rv&nbsp;</span><span style=color:#000>!=</span><span style=color:#000>&nbsp;DIERR_INPUTLOST&nbsp;</span><span style=color:#000>||</span><span style=color:#000>&nbsp;rv&nbsp;</span><span style=color:#000>!=</span><span style=color:#000>&nbsp;DIERR_NOTACQUIRED)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;FALSE;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;re-acquire&nbsp;and&nbsp;try&nbsp;again</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(FAILED(g_directinput_device</span><span style=color:#000>-></span><span style=color:#000>Acquire()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;FALSE;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;TRUE;<br>}<br><br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------<br></span><span style=color:green>//</span><span style=color:green>&nbsp;Main&nbsp;function,&nbsp;routine&nbsp;entry.<br></span><span style=color:green>//</span><span style=color:green>--------------------------------------------------------------------------------</span><span style=color:green><br></span><span style=color:#00f>int</span><span style=color:#000>&nbsp;WINAPI&nbsp;WinMain(HINSTANCE&nbsp;inst,&nbsp;HINSTANCE,&nbsp;LPSTR&nbsp;cmd_line,&nbsp;</span><span style=color:#00f>int</span><span style=color:#000>&nbsp;cmd_show)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;WNDCLASS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;win_class;<br>&nbsp;&nbsp;&nbsp;&nbsp;MSG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg;<br>&nbsp;&nbsp;&nbsp;&nbsp;DIMOUSESTATE&nbsp;&nbsp;&nbsp;&nbsp;mouse_state&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;{</span><span style=color:#000>0</span><span style=color:#000>};<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>char</span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text[</span><span style=color:#000>256</span><span style=color:#000>];<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>long</span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_pos&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>,&nbsp;y_pos&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;create&nbsp;window&nbsp;class&nbsp;and&nbsp;register&nbsp;it</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;win_class.style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;CS_HREDRAW&nbsp;</span><span style=color:#000>|</span><span style=color:#000>&nbsp;CS_VREDRAW;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpfnWndProc&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;Window_Proc;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.cbClsExtra&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.cbWndExtra&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;DLGWINDOWEXTRA;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.hInstance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;inst;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.hIcon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;LoadIcon(inst,&nbsp;IDI_APPLICATION);<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.hCursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;LoadCursor(NULL,&nbsp;IDC_ARROW);<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.hbrBackground&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;(HBRUSH)&nbsp;(COLOR_BTNFACE&nbsp;</span><span style=color:#000>+</span><span style=color:#000>&nbsp;</span><span style=color:#000>1</span><span style=color:#000>);<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpszMenuName&nbsp;&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;win_class.lpszClassName&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;g_class_name;&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(</span><span style=color:#000>!</span><span style=color:#000>&nbsp;RegisterClass(</span><span style=color:#000>&</span><span style=color:#000>win_class))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;FALSE;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;create&nbsp;the&nbsp;main&nbsp;window</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;g_hwnd&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;CreateDialog(inst,&nbsp;MAKEINTRESOURCE(IDD_MOUSE),&nbsp;</span><span style=color:#000>0</span><span style=color:#000>,&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;ShowWindow(g_hwnd,&nbsp;cmd_show);<br>&nbsp;&nbsp;&nbsp;&nbsp;UpdateWindow(g_hwnd);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;initialize&nbsp;directinput&nbsp;and&nbsp;get&nbsp;keyboard&nbsp;device</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;DirectInput8Create(inst,&nbsp;DIRECTINPUT_VERSION,&nbsp;IID_IDirectInput8,&nbsp;(</span><span style=color:#00f>void</span><span style=color:#000>&nbsp;</span><span style=color:#000>**</span><span style=color:#000>)&nbsp;</span><span style=color:#000>&</span><span style=color:#000>g_directinput,&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;initialize&nbsp;mouse</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device&nbsp;</span><span style=color:#000>=</span><span style=color:#000>&nbsp;Init_Mouse(g_hwnd,&nbsp;g_directinput);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;start&nbsp;message&nbsp;pump,&nbsp;waiting&nbsp;for&nbsp;signal&nbsp;to&nbsp;quit.</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;ZeroMemory(</span><span style=color:#000>&</span><span style=color:#000>msg,&nbsp;</span><span style=color:#00f>sizeof</span><span style=color:#000>(MSG));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>while</span><span style=color:#000>(msg.message&nbsp;</span><span style=color:#000>!=</span><span style=color:#000>&nbsp;WM_QUIT)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(PeekMessage(</span><span style=color:#000>&</span><span style=color:#000>msg,&nbsp;NULL,&nbsp;</span><span style=color:#000>0</span><span style=color:#000>,&nbsp;</span><span style=color:#000>0</span><span style=color:#000>,&nbsp;PM_REMOVE))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslateMessage(</span><span style=color:#000>&</span><span style=color:#000>msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispatchMessage(</span><span style=color:#000>&</span><span style=color:#000>msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;read&nbsp;in&nbsp;mouse&nbsp;and&nbsp;display&nbsp;coordinates</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Read_Device(g_directinput_device,&nbsp;</span><span style=color:#000>&</span><span style=color:#000>mouse_state,&nbsp;</span><span style=color:#00f>sizeof</span><span style=color:#000>(DIMOUSESTATE));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_pos&nbsp;</span><span style=color:#000>+=</span><span style=color:#000>&nbsp;mouse_state.lX;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y_pos&nbsp;</span><span style=color:#000>+=</span><span style=color:#000>&nbsp;mouse_state.lY;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>if</span><span style=color:#000>(mouse_state.lX&nbsp;</span><span style=color:#000>!=</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>&nbsp;</span><span style=color:#000>||</span><span style=color:#000>&nbsp;mouse_state.lY&nbsp;</span><span style=color:#000>!=</span><span style=color:#000>&nbsp;</span><span style=color:#000>0</span><span style=color:#000>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf(text,&nbsp;</span><span style=color:#000>"</span><span style=color:#000>%ld,&nbsp;%ld</span><span style=color:#000>"</span><span style=color:#000>,&nbsp;x_pos,&nbsp;y_pos);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetWindowText(GetDlgItem(g_hwnd,&nbsp;IDC_COORDINATES),&nbsp;text);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:green>//</span><span style=color:green>&nbsp;release&nbsp;directinput&nbsp;objects</span><span style=color:green><br></span><span style=color:#000>&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device</span><span style=color:#000>-></span><span style=color:#000>Unacquire();<br>&nbsp;&nbsp;&nbsp;&nbsp;g_directinput_device</span><span style=color:#000>-></span><span style=color:#000>Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;g_directinput</span><span style=color:#000>-></span><span style=color:#000>Release();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;UnregisterClass(g_class_name,&nbsp;inst);<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=color:#00f>return</span><span style=color:#000>&nbsp;(</span><span style=color:#00f>int</span><span style=color:#000>)&nbsp;msg.wParam;<br>}<br></span></div><br>运行截图:<br><br><img alt src=http://www.cppblog.com/images/cppblog_com/lovedday/4157/r_mouse1.jpg><br></div><footer class=post-footer><div class=post-button><a class=btn href=/post/using-directinput-for-interaction-part-3/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/using-directinput-for-interaction-part-2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectInput进行交互（2）"><meta itemprop=description content="设置数据格式每种设备都有一种用于读取数据的特定数据格式，需要考虑的东西也很多，包括键、鼠标按键、轴等。因此要使程序从设备读取数据，首先必须告诉DirectInput读取这种数据所采用的格式。通过 IDirectInputDevice8::SetDataFormat函数即可满足上述要求。Sets the data format for the Microsoft DirectInput device.SyntaxHRESULT SetDataFormat(LPCDIDATAFORMAT lpdf);ParameterslpdfAddress of a structure that describes the format of the data that the DirectInputDevice should return. An application can define its own DIDATAFORMAT structure or use one of the following predefined global variables: c_dfDIKeyboardc_dfDIMousec_dfDIMouse2c_dfDIJoystickc_dfDIJoystick2Return ValueIf the method succeeds, the return value is DI_OK.If the method fails, the return value can be one of the following error values:DIERR_ACQUIRED The operation cannot be performed while the device is acquired.DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.DIERR_NOTINITIALIZED The object has not been initialized.RemarksThe data format must be set before the device can be acquired by using the IDirectInputDevice8::Acquire method. It is necessary to set the data format only once. The data format cannot be changed while the device is acquired.If the application is using action mapping, the data format is set instead by the call to IDirectInputDevice8::SetActionMap.SetDataFormat函数只有一个参数，这个参数是一个指向DIDATAFORMAT结构体的指针，此结构体的定义如下：Describes a device&rsquo;s data format. This structure is used with the IDirectInputDevice8::SetDataFormat method.Syntaxtypedef struct DIDATAFORMAT {     DWORD dwSize;     DWORD dwObjSize;     DWORD dwFlags;     DWORD dwDataSize;     DWORD dwNumObjs;     LPDIOBJECTDATAFORMAT rgodf; } DIDATAFORMAT, *LPDIDATAFORMAT; typedef const DIDATAFORMAT *LPCDIDATAFORMAT;MembersdwSizeSize of this structure, in bytes. dwObjSizeSize of the DIOBJECTDATAFORMAT structure, in bytes. dwFlagsFlags describing other attributes of the data format. This value can be one of the following: DIDF_ABSAXISThe axes are in absolute mode. Setting this flag in the data format is equivalent to manually setting the axis mode property, using the IDirectInputDevice8::SetProperty method. This cannot be combined with DIDF_RELAXIS flag. DIDF_RELAXISThe axes are in relative mode. Setting this flag in the data format is equivalent to manually setting the axis mode property using the IDirectInputDevice8::SetProperty method. This cannot be combined with the DIDF_ABSAXIS flag. dwDataSizeSize of a data packet returned by the device, in bytes. This value must be a multiple of 4 and must exceed the largest offset value for an object&rsquo;s data within the data packet. dwNumObjsNumber of objects in the rgodf array.rgodfAddress to an array of DIOBJECTDATAFORMAT structures. Each structure describes how one object&rsquo;s data should be reported in the device data. Typical errors include placing two pieces of information in the same location and placing one piece of information in more than one location. RemarksApplications do not typically need to create a DIDATAFORMAT structure. An application can use one of the predefined global data format variables, c_dfDIMouse, c_dfDIMouse2, c_dfDIKeyboard, c_dfDIJoystick, or c_dfDIJoystick2.Applications that need to create a DIDATAFORMAT structure must first call IDirectInputDevice8::EnumObjects to determine the available objects for the current device. This is because the IDirectInputDevice8::SetDataFormat method will return DIERR_INVALIDPARAM if an an object is described in the DIDATAFORMAT structure but does not exist on the current device.设置协作级别首先必须面对一个事实，那就是每个程序都会使用许多输入设备。几乎每个程序都会使用键盘和鼠标，同时某些程序还会使用游戏杆。在处理的时候，必须同其他可能仍在运行的应用程序共享对这些设备的访问，或者应用程序独占对设备的所有访问，这样除非该应用程序结束了对设备的访问，否则就不允许其他应用程序控制这些设备。设置协作级别的函数是IDirectInputDevice8::SetCooperativeLevel。Establishes the cooperative level for this instance of the device. The cooperative level determines how this instance of the device interacts with other instances of the device and the rest of the system.SyntaxHRESULT SetCooperativeLevel(HWND hwnd,    DWORD dwFlags);ParametershwndWindow handle to be associated with the device. This parameter must be a valid top-level window handle that belongs to the process. The window associated with the device must not be destroyed while it is still active in a Microsoft DirectInput device. dwFlagsFlags that describe the cooperative level associated with the device. The following flags are defined: DISCL_BACKGROUNDThe application requires background access. If background access is granted, the device can be acquired at any time, even when the associated window is not the active window. DISCL_EXCLUSIVEThe application requires exclusive access. If exclusive access is granted, no other instance of the device can obtain exclusive access to the device while it is acquired. However, nonexclusive access to the device is always permitted, even if another application has obtained exclusive access. An application that acquires the mouse or keyboard device in exclusive mode should always unacquire the devices when it receives WM_ENTERSIZEMOVE and WM_ENTERMENULOOP messages. Otherwise, the user cannot manipulate the menu or move and resize the window. DISCL_FOREGROUNDThe application requires foreground access. If foreground access is granted, the device is automatically unacquired when the associated window moves to the background. DISCL_NONEXCLUSIVEThe application requires nonexclusive access. Access to the device does not interfere with other applications that are accessing the same device. DISCL_NOWINKEYDisable the Microsoft Windows logo key. Setting this flag ensures that the user cannot inadvertently break out of the application. Note, however, that DISCL_NOWINKEY has no effect when the default action mapping user interface (UI) is displayed, and the Windows logo key will operate normally as long as that UI is present. Return ValueIf the method succeeds, the return value is DI_OK.If the method fails, the return value can be one of the following error values:DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value. DIERR_NOTINITIALIZED The object has not been initialized. E_HANDLE The HWND parameter is not a valid top-level window that belongs to the process. RemarksApplications must specify either DISCL_FOREGROUND or DISCL_BACKGROUND; it is an error to specify both or neither. Similarly, applications must specify either DISCL_EXCLUSIVE or DISCL_NONEXCLUSIVE.If the system mouse is acquired in exclusive mode, the pointer is removed from the screen until the device is unacquired. This applies only to a mouse created by passing GUID_SysMouse to IDirectInput8::CreateDevice.Applications that select the background exclusive mode cooperative level are not guaranteed to retain access to the device if another application requests exclusive access. When a background exclusive mode application loses access, calls to DirectInput device methods will fail and return DIERR_NOTACQUIRED. The application can regain access to the device by manually unacquiring the device and reaquiring it.Applications must call this method before acquiring the device by using the IDirectInputDevice8::Acquire method.设置特殊属性设置设备的特殊属性，包括轴模式（axis mode），缓冲区（buffering）以及最大最小范围。对于轴模式，有两个选择：相对和绝对。绝对模式基于一个中心坐标来报告坐标。位于这个点左边或上面的值都报告成负值，同时位于这个点右边或下面的值都报告成正值。相对坐标就是当前位置同上一个位置之间的距离差。最后一个特殊性属性是设备的最小和最大范围设置。举例来说，将游戏杆推动到最左边就会产生最小值，而推动到最右边就会产生最大值。这两边产生何种值取决于具体的设置，只有游戏杆才会涉及到最小和最大范围设置。用于设置特殊属性的函数是 IDirectInputDevice8::SetProperty。Sets properties that define the device behavior. These properties include input buffer size and axis mode.SyntaxHRESULT SetProperty(REFGUID rguidProp,    LPCDIPROPHEADER pdiph);ParametersrguidPropReference to (C++) or address of (C) the globally unique identifier (GUID) identifying the property to be set. This can be one of the predefined values, or a pointer to a GUID that identifies the property. The following property values are predefined for an input device: DIPROP_APPDATASets the application-defined value associated with an in-game action, as a DIPROPPOINTER. DIPROP_AUTOCENTERSpecifies whether device objects are self centering. This setting applies to the entire device, rather than to any particular object, so the dwHow member of the associated DIPROPDWORD structure must be DIPH_DEVICE. The dwData member can be one of the following values. DIPROPAUTOCENTER_OFF: The device should not automatically center when the user releases the device. An application that uses force feedback should disable autocentering before playing effects. DIPROPAUTOCENTER_ON: The device should automatically center when the user releases the device. Not all devices support the autocenter property. DIPROP_AXISMODESets the axis mode. The value being set (DIPROPAXISMODE_ABS or DIPROPAXISMODE_REL) must be specified in the dwData member of the associated DIPROPDWORD structure. See the description of the pdiph parameter for more information. This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE. DIPROP_BUFFERSIZESets the input buffer size. The value being set must be specified in the dwData member of the associated DIPROPDWORD structure. See Remarks. This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE. DIPROP_CALIBRATIONPredefined property that allows the application to access the information that Microsoft DirectInput uses to manipulate axes that require calibration. This property exists primarily for applications of the control panel type. Normal applications should not need to deal with calibration information. You can access the calibration mode property for an axis by setting the dwHow member of the DIPROPHEADER structure to DIPH_BYID or to DIPH_BYOFFSET and setting the dwObj member to the object identifier (ID) or offset, respectively. Control panel applications that set new calibration data must also invoke the IDirectInputJoyConfig::SendNotify method to notify other applications of the change in calibration. For more information about IDirectInputJoyConfig::SendNotify, see the Microsoft DirectX Driver Development Kit (DDK). DIPROP_CALIBRATIONMODEEnables the application to specify whether DirectInput should retrieve calibrated or uncalibrated data from an axis. By default, DirectInput retrieves calibrated data. Setting the calibration mode for the entire device is equivalent to setting it for each axis individually. The dwData member of the DIPROPDWORD structure can be one of the following values: DIPROPCALIBRATIONMODE_COOKED: DirectInput should return data after applying calibration information. This is the default mode. DIPROPCALIBRATIONMODE_RAW: DirectInput should return raw, uncalibrated data. This mode is typically used only by applications of the control panel type. Note that raw data might include negative values. Setting a device into raw mode causes the dead zone, saturation, and range settings to be ignored. DIPROP_CPOINTSSets calibration points used for the adjustment of incoming raw data. The values being set must be specified as CPOINT types in the cp array of the associated DIPROPCPOINTS structure. This setting applies to individual device objects, so the dwHow member of the associated DIPROPHEADER structure must be set to either DIPH_BYID or DIPH_BYOFFSET. DIPROP_DEADZONESets the value for the dead zone of a joystick, in the range from 0 through 10,000, where 0 indicates that there is no dead zone, 5,000 indicates that the dead zone extends over 50 percent of the physical range of the axis on both sides of center, and 10,000 indicates that the entire physical range of the axis is dead. When the axis is within the dead zone, it is reported as being at the center of its range. This setting can be applied to either the entire device or to a specific axis. DIPROP_FFGAINSets the gain for the device. This setting applies to the entire device, rather than to any particular object, so the dwHow member of the associated DIPROPDWORD structure must be DIPH_DEVICE. The dwData member contains a gain value that is applied to all effects created on the device. The value is an integer in the range from 0 through 10,000, specifying the amount by which effect magnitudes should be scaled for the device. For example, a value of 10,000 indicates that all effect magnitudes are to be taken at face value. A value of 9,000 indicates that all effect magnitudes are to be reduced to 90 percent of their nominal magnitudes. DirectInput always checks the gain value before setting the gain property. If the gain is outside of the range (less than zero or greater than 10,000), IDirectInputDevice8::SetProperty will return DIERR_INVALIDPARAM. Otherwise, if successful, it will return DI_OK, even if the device does not support force feedback.Setting a gain value is useful when an application wants to scale down the strength of all force-feedback effects uniformly, based on user preferences. Unlike other properties, the gain can be set when the device is in an acquired state. DIPROP_INSTANCENAMEThis property exists for advanced applications that want to change the friendly instance name of a device (as returned in the tszInstanceName member of the DIDEVICEINSTANCE structure) to distinguish it from similar devices that are plugged in simultaneously. Most applications should have no need to change the friendly name. This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE. The pdiph parameter must be a pointer to the diph member of a DIPROPSTRING structure. DIPROP_PRODUCTNAMEThis property exists for advanced applications that want to change the friendly product name of a device (as returned in the tszProductName member of the DIDEVICEINSTANCE structure) to distinguish it from similar devices which are plugged in simultaneously. Most applications should have no need to change the friendly name. This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE. The pdiph parameter must be a pointer to the diph member of a DIPROPSTRING structure. Setting the product name is only useful for changing the user-defined name of an analog joystick on Microsoft Windows 98,Windows 2000, and Windows Millennium Edition (Windows Me) computers. In other cases, attempting to set this property will still return DI_OK. However, the name is not stored in a location used by IDirectInputDevice8::GetProperty. DIPROP_RANGESets the range of values an object can possibly report. The minimum and maximum values are taken from the lMin and lMax members of the associated DIPROPRANGE structure. For some devices, this is a read-only property. You cannot set a reverse range; lMax must be greater than lMin. DIPROP_SATURATIONSets the value for the saturation zones of a joystick, in the range from 0 through 10,000. The saturation level is the point at which the axis is considered to be at its most extreme position. For example, if the saturation level is set to 9,500, the axis reaches the extreme of its range when it has moved 95 percent of the physical distance from its center position (or from the dead zone). This setting can be applied to either the entire device or a specific axis. pdiphAddress of the DIPROPHEADER structure contained within the type-specific property structure. Return ValueIf the method succeeds, the return value is DI_OK or DI_PROPNOEFFECT.If the method fails, the return value can be one of the following error values.DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value. DIERR_NOTINITIALIZED The object has not been initialized. DIERR_OBJECTNOTFOUND The requested object does not exist. DIERR_UNSUPPORTED The function called is not supported at this time. This value is equal to the E_NOTIMPL standard COM return value. RemarksThe buffer size determines the amount of data that the buffer can hold between calls to the IDirectInputDevice8::GetDeviceData method before data is lost. This value may be set to 0 to indicate that the application does not read buffered data from the device. If the buffer size in the dwData member of the DIPROPDWORD structure is too large for the device to support it, then the largest possible buffer size is set. 在调用SetProperty函数时始终要使用的DIPROPHEADER结构体定义如下：Serves as a header for all property structures.Syntaxtypedef struct DIPROPHEADER {     DWORD    dwSize;     DWORD    dwHeaderSize;     DWORD    dwObj;     DWORD    dwHow; } DIPROPHEADER, *LPDIPROPHEADER;  typedef const DIPROPHEADER *LPCDIPROPHEADER;MembersdwSizeSize of the enclosing structure. This member must be initialized before the structure is used. dwHeaderSizeSize of the DIPROPHEADER structure. dwObjObject for which the property is to be accessed. The value set for this member depends on the value specified in the dwHow member.dwHowValue that specifies how the dwObj member should be interpreted. This value can be one of the following: DIPH_DEVICEThe dwObj member must be 0. DIPH_BYOFFSETThe dwObj member is the offset into the current data format of the object whose property is being accessed. DIPH_BYUSAGEThe dwObj member is the HID usage page and usage values in packed form. DIPH_BYIDThe dwObj member is the object type/instance identifier. This identifier is returned in the dwType member of the DIDEVICEOBJECTINSTANCE structure returned from a previous call to the IDirectInputDevice8::EnumObjects member. 获得设备在使用任何设备之前，首先必须获得设备。只有获得了设备才能确保程序能够访问设备，以及同其他程序共享访问还是完全控制设备。要注意的是其他程序可能会争夺并抢走对设备的控制权，要补救这种情况就必须重新获得设备。何时必须获得设备？第一种情况就是在创建接口的时候，原因在于使用设备之前必须首先获得它。另一种情况就是当另一个程序抢走了对设备的控制，同时 DirectInput通知了程序时。调用IDirectInputDevice8::Acquire函数即可获得设备。Obtains access to the input device.SyntaxHRESULT Acquire(VOID);Return ValueIf the method succeeds, the return value is DI_OK, or S_FALSE if the device was already acquired.If the method fails, the return value can be one of the following error values.DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value. DIERR_NOTINITIALIZED The object has not been initialized. DIERR_OTHERAPPHASPRIO Another application has a higher priority level, preventing this call from succeeding. This value is equal to the E_ACCESSDENIED standard COM return value. This error can be returned when an application has only foreground access to a device but is attempting to acquire the device while in the background. RemarksBefore a device can be acquired, a data format must be set by using the IDirectInputDevice8::SetDataFormat method or IDirectInputDevice8::SetActionMap method. If the data format has not been set, IDirectInputDevice8::Acquire returns DIERR_INVALIDPARAM.Devices must be acquired before calling the IDirectInputDevice8::GetDeviceState or IDirectInputDevice8::GetDeviceData methods for that device.Device acquisition does not use a reference count. Therefore, if an application calls the IDirectInputDevice8::Acquire method twice, then calls the IDirectInputDevice8::Unacquire method once, the device is unacquired.If IDirectInputDevice8::BuildActionMap succeeds but no actions have been mapped, a subsequent call to IDirectInputDevice8::SetActionMap will return DI_OK but a call to IDirectInputDevice8::Acquire will fail with DIERR_INVALIDPARAM.轮询设备轮询可以准备设备并在合适的情况下读取设备数据，因为数据可能具有临界时间。游戏杆就是这样的设备，要从设备读取数据，计算机需要发送一个电子脉冲给它。虽然轮询对于游戏杆输入而言是必须的，但是对键盘或鼠标来说却并不需要轮询。轮询设备需要使用IDirectInputDevice8::Poll函数。Retrieves data from polled objects on a Microsoft DirectInput device. If the device does not require polling, calling this method has no effect. If a device that requires polling is not polled periodically, no new data is received from the device. Calling this method causes DirectInput to update the device state, generate input events (if buffered data is enabled), and set notification events (if notification is enabled).SyntaxHRESULT Poll(VOID);Return ValueIf the method succeeds, the return value is DI_OK, or DI_NOEFFECT if the device does not require polling.If the method fails, the return value can be one of the following error values:DIERR_INPUTLOST Access to the input device has been lost. It must be reacquired. DIERR_NOTACQUIRED The operation cannot be performed unless the device is acquired. DIERR_NOTINITIALIZED The object has not been initialized. RemarksBefore a device data can be polled, the data format must be set by using the IDirectInputDevice8::SetDataFormat or IDirectInputDevice8::SetActionMap method, and the device must be acquired by using the IDirectInputDevice8::Acquire method.读取数据经过以上的步骤，就剩下最后一步了，那就是使用 IDirectInputDevice8::GetDeviceState函数读取设备数据。为了存储设备的信息，必须传递一个数据缓冲区给此函数，这样程序才能使用设备的信息，每种设备的数据各不相同。Retrieves immediate data from the device.SyntaxHRESULT GetDeviceState(DWORD cbData,    LPVOID lpvData);ParameterscbDataSize of the buffer in the lpvData parameter, in bytes. lpvDataAddress of a structure that receives the current state of the device. The format of the data is established by a prior call to the IDirectInputDevice8::SetDataFormat method. Return ValueIf the method succeeds, the return value is DI_OK.If the method fails, the return value can be one of the following error values:DIERR_INPUTLOST Access to the input device has been lost. It must be reacquired. DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value. DIERR_NOTACQUIRED The operation cannot be performed unless the device is acquired. DIERR_NOTINITIALIZED The object has not been initialized. E_PENDING Data is not yet available. RemarksBefore device data can be obtained, set the cooperative level by using the IDirectInputDevice8::SetCooperativeLevel method, then set the data format by using IDirectInputDevice8::SetDataFormat, and acquire the device by using the IDirectInputDevice8::Acquire method.The five predefined data formats require corresponding device state structures according to the following table:Data format State structure c_dfDIMouse DIMOUSESTATE c_dfDIMouse2 DIMOUSESTATE2 c_dfDIKeyboard array of 256 bytes c_dfDIJoystick DIJOYSTATE c_dfDIJoystick2 DIJOYSTATE2 For example, if you passed the c_dfDIMouse format to the IDirectInputDevice8::SetDataFormat method, you must pass a DIMOUSESTATE structure to the IDirectInputDevice8::GetDeviceState method.无论是哪种设备，下面的代码都能读取其数据。它们考虑了丢失设备并在适当的时刻重新获得设备的情况，必须传递一个指向缓冲区的指针给下面这个函数，缓冲区的大小要能够保存设备信息以及读取的数据量。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/using-directinput-for-interaction-part-2/ itemprop=url class=post-title-link>使用DirectInput进行交互（2）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月24日 21:50:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-24 21:50:00 +0800 +0800">2007年07月24日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:20:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:20:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/using-directinput-for-interaction-part-2/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><span style=font-weight:700>设置数据格式</span><br><br>每种设备都有一种用于读取数据的特定数据格式，需要考虑的东西也很多，包括键、鼠标按键、轴等。因此要使程序从设备读取数据，首先必须告诉DirectInput读取这种数据所采用的格式。通过 IDirectInputDevice8::SetDataFormat函数即可满足上述要求。<br><br>Sets the data format for the Microsoft DirectInput device.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT SetDataFormat(LPCDIDATAFORMAT lpdf);<br><br><span style=font-weight:700;color:#256429>Parameters</span><br><br>lpdf<br>Address of a structure that describes the format of the data that the DirectInputDevice should return. An application can define its own DIDATAFORMAT structure or use one of the following predefined global variables:<br> <br>c_dfDIKeyboard<br>c_dfDIMouse<br>c_dfDIMouse2<br>c_dfDIJoystick<br>c_dfDIJoystick2<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK.<br><br>If the method fails, the return value can be one of the following error values:<br><br>DIERR_ACQUIRED The operation cannot be performed while the device is acquired.<br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>The data format must be set before the device can be acquired by using the IDirectInputDevice8::Acquire method. It is necessary to set the data format only once. The data format cannot be changed while the device is acquired.<br><br>If the application is using action mapping, the data format is set instead by the call to IDirectInputDevice8::SetActionMap.<br><br>SetDataFormat函数只有一个参数，这个参数是一个指向DIDATAFORMAT结构体的指针，此结构体的定义如下：<br><br>Describes a device&rsquo;s data format. This structure is used with the IDirectInputDevice8::SetDataFormat method.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>typedef struct DIDATAFORMAT {<br>    DWORD dwSize;<br>    DWORD dwObjSize;<br>    DWORD dwFlags;<br>    DWORD dwDataSize;<br>    DWORD dwNumObjs;<br>    LPDIOBJECTDATAFORMAT rgodf;<br>} DIDATAFORMAT, *LPDIDATAFORMAT;<br> <br>typedef const DIDATAFORMAT *LPCDIDATAFORMAT;<br><br><span style=font-weight:700;color:#256429>Members</span><br><br>dwSize<br>Size of this structure, in bytes.<br><br>dwObjSize<br>Size of the DIOBJECTDATAFORMAT structure, in bytes.<br><br>dwFlags<br>Flags describing other attributes of the data format. This value can be one of the following:<br><br>DIDF_ABSAXIS<br>The axes are in absolute mode. Setting this flag in the data format is equivalent to manually setting the axis mode property, using the IDirectInputDevice8::SetProperty method. This cannot be combined with DIDF_RELAXIS flag.<br><br>DIDF_RELAXIS<br>The axes are in relative mode. Setting this flag in the data format is equivalent to manually setting the axis mode property using the IDirectInputDevice8::SetProperty method. This cannot be combined with the DIDF_ABSAXIS flag.<br><br>dwDataSize<br>Size of a data packet returned by the device, in bytes. This value must be a multiple of 4 and must exceed the largest offset value for an object&rsquo;s data within the data packet.<br><br>dwNumObjs<br>Number of objects in the rgodf array.<br><br>rgodf<br>Address to an array of DIOBJECTDATAFORMAT structures. Each structure describes how one object&rsquo;s data should be reported in the device data. Typical errors include placing two pieces of information in the same location and placing one piece of information in more than one location.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>Applications do not typically need to create a DIDATAFORMAT structure. An application can use one of the predefined global data format variables, c_dfDIMouse, c_dfDIMouse2, c_dfDIKeyboard, c_dfDIJoystick, or c_dfDIJoystick2.<br><br>Applications that need to create a DIDATAFORMAT structure must first call IDirectInputDevice8::EnumObjects to determine the available objects for the current device. This is because the IDirectInputDevice8::SetDataFormat method will return DIERR_INVALIDPARAM if an an object is described in the DIDATAFORMAT structure but does not exist on the current device.<br><br><span style=font-weight:700>设置协作级别</span><br><br>首先必须面对一个事实，那就是每个程序都会使用许多输入设备。几乎每个程序都会使用键盘和鼠标，同时某些程序还会使用游戏杆。在处理的时候，必须同其他可能仍在运行的应用程序共享对这些设备的访问，或者应用程序独占对设备的所有访问，这样除非该应用程序结束了对设备的访问，否则就不允许其他应用程序控制这些设备。<br><br>设置协作级别的函数是IDirectInputDevice8::SetCooperativeLevel。<br><br>Establishes the cooperative level for this instance of the device. The cooperative level determines how this instance of the device interacts with other instances of the device and the rest of the system.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT SetCooperativeLevel(HWND hwnd,<br>    DWORD dwFlags<br>);<br><br><span style=font-weight:700;color:#256429>Parameters</span><br><br><span style=font-weight:700>hwnd</span><br>Window handle to be associated with the device. This parameter must be a valid top-level window handle that belongs to the process. The window associated with the device must not be destroyed while it is still active in a Microsoft DirectInput device.<br><br><span style=font-weight:700>dwFlags</span><br>Flags that describe the cooperative level associated with the device. The following flags are defined:<br><br>DISCL_BACKGROUND<br>The application requires background access. If background access is granted, the device can be acquired at any time, even when the associated window is not the active window.<br><br>DISCL_EXCLUSIVE<br>The application requires exclusive access. If exclusive access is granted, no other instance of the device can obtain exclusive access to the device while it is acquired. However, nonexclusive access to the device is always permitted, even if another application has obtained exclusive access.<br><br>An application that acquires the mouse or keyboard device in exclusive mode should always unacquire the devices when it receives WM_ENTERSIZEMOVE and WM_ENTERMENULOOP messages. Otherwise, the user cannot manipulate the menu or move and resize the window.<br><br>DISCL_FOREGROUND<br>The application requires foreground access. If foreground access is granted, the device is automatically unacquired when the associated window moves to the background.<br><br>DISCL_NONEXCLUSIVE<br>The application requires nonexclusive access. Access to the device does not interfere with other applications that are accessing the same device.<br><br>DISCL_NOWINKEY<br>Disable the Microsoft Windows logo key. Setting this flag ensures that the user cannot inadvertently break out of the application. Note, however, that DISCL_NOWINKEY has no effect when the default action mapping user interface (UI) is displayed, and the Windows logo key will operate normally as long as that UI is present.<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK.<br><br>If the method fails, the return value can be one of the following error values:<br><br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br>E_HANDLE The HWND parameter is not a valid top-level window that belongs to the process.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>Applications must specify either DISCL_FOREGROUND or DISCL_BACKGROUND; it is an error to specify both or neither. Similarly, applications must specify either DISCL_EXCLUSIVE or DISCL_NONEXCLUSIVE.<br><br>If the system mouse is acquired in exclusive mode, the pointer is removed from the screen until the device is unacquired. This applies only to a mouse created by passing GUID_SysMouse to IDirectInput8::CreateDevice.<br><br>Applications that select the background exclusive mode cooperative level are not guaranteed to retain access to the device if another application requests exclusive access. When a background exclusive mode application loses access, calls to DirectInput device methods will fail and return DIERR_NOTACQUIRED. The application can regain access to the device by manually unacquiring the device and reaquiring it.<br><br>Applications must call this method before acquiring the device by using the IDirectInputDevice8::Acquire method.<br><br><span style=font-weight:700>设置特殊属性</span><br><br>设置设备的特殊属性，包括轴模式（axis mode），缓冲区（buffering）以及最大最小范围。对于轴模式，有两个选择：相对和绝对。绝对模式基于一个中心坐标来报告坐标。位于这个点左边或上面的值都报告成负值，同时位于这个点右边或下面的值都报告成正值。相对坐标就是当前位置同上一个位置之间的距离差。<br><br>最后一个特殊性属性是设备的最小和最大范围设置。举例来说，将游戏杆推动到最左边就会产生最小值，而推动到最右边就会产生最大值。这两边产生何种值取决于具体的设置，只有游戏杆才会涉及到最小和最大范围设置。<br><br>用于设置特殊属性的函数是 IDirectInputDevice8::SetProperty。<br><br>Sets properties that define the device behavior. These properties include input buffer size and axis mode.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT SetProperty(REFGUID rguidProp,<br>    LPCDIPROPHEADER pdiph<br>);<br><br><span style=font-weight:700;color:#256429>Parameters</span><br><br><span style=font-weight:700>rguidProp</span><br>Reference to (C++) or address of (C) the globally unique identifier (GUID) identifying the property to be set. This can be one of the predefined values, or a pointer to a GUID that identifies the property. The following property values are predefined for an input device:<br><br>DIPROP_APPDATA<br>Sets the application-defined value associated with an in-game action, as a DIPROPPOINTER.<br><br>DIPROP_AUTOCENTER<br>Specifies whether device objects are self centering. This setting applies to the entire device, rather than to any particular object, so the dwHow member of the associated DIPROPDWORD structure must be DIPH_DEVICE.<br>The dwData member can be one of the following values.<br><br>DIPROPAUTOCENTER_OFF: The device should not automatically center when the user releases the device. An application that uses force feedback should disable autocentering before playing effects.<br><br>DIPROPAUTOCENTER_ON: The device should automatically center when the user releases the device.<br><br>Not all devices support the autocenter property.<br><br>DIPROP_AXISMODE<br>Sets the axis mode. The value being set (DIPROPAXISMODE_ABS or DIPROPAXISMODE_REL) must be specified in the dwData member of the associated DIPROPDWORD structure. See the description of the pdiph parameter for more information.<br><br>This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE.<br><br>DIPROP_BUFFERSIZE<br>Sets the input buffer size. The value being set must be specified in the dwData member of the associated DIPROPDWORD structure. See Remarks. This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE.<br><br>DIPROP_CALIBRATION<br>Predefined property that allows the application to access the information that Microsoft DirectInput uses to manipulate axes that require calibration. This property exists primarily for applications of the control panel type. Normal applications should not need to deal with calibration information.<br>You can access the calibration mode property for an axis by setting the dwHow member of the DIPROPHEADER structure to DIPH_BYID or to DIPH_BYOFFSET and setting the dwObj member to the object identifier (ID) or offset, respectively.<br><br>Control panel applications that set new calibration data must also invoke the IDirectInputJoyConfig::SendNotify method to notify other applications of the change in calibration. For more information about IDirectInputJoyConfig::SendNotify, see the Microsoft DirectX Driver Development Kit (DDK).<br><br>DIPROP_CALIBRATIONMODE<br>Enables the application to specify whether DirectInput should retrieve calibrated or uncalibrated data from an axis. By default, DirectInput retrieves calibrated data.<br>Setting the calibration mode for the entire device is equivalent to setting it for each axis individually.<br><br>The dwData member of the DIPROPDWORD structure can be one of the following values:<br><br>DIPROPCALIBRATIONMODE_COOKED: DirectInput should return data after applying calibration information. This is the default mode.<br>DIPROPCALIBRATIONMODE_RAW: DirectInput should return raw, uncalibrated data. This mode is typically used only by applications of the control panel type. Note that raw data might include negative values.<br><br>Setting a device into raw mode causes the dead zone, saturation, and range settings to be ignored.<br><br>DIPROP_CPOINTS<br>Sets calibration points used for the adjustment of incoming raw data. The values being set must be specified as CPOINT types in the cp array of the associated DIPROPCPOINTS structure. This setting applies to individual device objects, so the dwHow member of the associated DIPROPHEADER structure must be set to either DIPH_BYID or DIPH_BYOFFSET.<br><br>DIPROP_DEADZONE<br>Sets the value for the dead zone of a joystick, in the range from 0 through 10,000, where 0 indicates that there is no dead zone, 5,000 indicates that the dead zone extends over 50 percent of the physical range of the axis on both sides of center, and 10,000 indicates that the entire physical range of the axis is dead. When the axis is within the dead zone, it is reported as being at the center of its range. This setting can be applied to either the entire device or to a specific axis.<br><br>DIPROP_FFGAIN<br>Sets the gain for the device. This setting applies to the entire device, rather than to any particular object, so the dwHow member of the associated DIPROPDWORD structure must be DIPH_DEVICE.<br>The dwData member contains a gain value that is applied to all effects created on the device. The value is an integer in the range from 0 through 10,000, specifying the amount by which effect magnitudes should be scaled for the device. For example, a value of 10,000 indicates that all effect magnitudes are to be taken at face value. A value of 9,000 indicates that all effect magnitudes are to be reduced to 90 percent of their nominal magnitudes.<br><br>DirectInput always checks the gain value before setting the gain property. If the gain is outside of the range (less than zero or greater than 10,000), IDirectInputDevice8::SetProperty will return DIERR_INVALIDPARAM. Otherwise, if successful, it will return DI_OK, even if the device does not support force feedback.<br><br>Setting a gain value is useful when an application wants to scale down the strength of all force-feedback effects uniformly, based on user preferences.<br><br>Unlike other properties, the gain can be set when the device is in an acquired state.<br><br>DIPROP_INSTANCENAME<br>This property exists for advanced applications that want to change the friendly instance name of a device (as returned in the tszInstanceName member of the DIDEVICEINSTANCE structure) to distinguish it from similar devices that are plugged in simultaneously. Most applications should have no need to change the friendly name.<br>This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE.<br><br>The pdiph parameter must be a pointer to the diph member of a DIPROPSTRING structure.<br><br>DIPROP_PRODUCTNAME<br>This property exists for advanced applications that want to change the friendly product name of a device (as returned in the tszProductName member of the DIDEVICEINSTANCE structure) to distinguish it from similar devices which are plugged in simultaneously. Most applications should have no need to change the friendly name.<br>This setting applies to the entire device, so the dwHow member of the associated DIPROPDWORD structure must be set to DIPH_DEVICE.<br><br>The pdiph parameter must be a pointer to the diph member of a DIPROPSTRING structure.<br><br>Setting the product name is only useful for changing the user-defined name of an analog joystick on Microsoft Windows 98,Windows 2000, and Windows Millennium Edition (Windows Me) computers. In other cases, attempting to set this property will still return DI_OK. However, the name is not stored in a location used by IDirectInputDevice8::GetProperty.<br><br>DIPROP_RANGE<br>Sets the range of values an object can possibly report. The minimum and maximum values are taken from the lMin and lMax members of the associated DIPROPRANGE structure.<br>For some devices, this is a read-only property.<br><br>You cannot set a reverse range; lMax must be greater than lMin.<br><br>DIPROP_SATURATION<br>Sets the value for the saturation zones of a joystick, in the range from 0 through 10,000. The saturation level is the point at which the axis is considered to be at its most extreme position. For example, if the saturation level is set to 9,500, the axis reaches the extreme of its range when it has moved 95 percent of the physical distance from its center position (or from the dead zone). This setting can be applied to either the entire device or a specific axis.<br><br><span style=font-weight:700>pdiph</span><br>Address of the DIPROPHEADER structure contained within the type-specific property structure.<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK or DI_PROPNOEFFECT.<br><br>If the method fails, the return value can be one of the following error values.<br><br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br>DIERR_OBJECTNOTFOUND The requested object does not exist.<br>DIERR_UNSUPPORTED The function called is not supported at this time. This value is equal to the E_NOTIMPL standard COM return value.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>The buffer size determines the amount of data that the buffer can hold between calls to the IDirectInputDevice8::GetDeviceData method before data is lost. This value may be set to 0 to indicate that the application does not read buffered data from the device. If the buffer size in the dwData member of the DIPROPDWORD structure is too large for the device to support it, then the largest possible buffer size is set.<br><br>在调用SetProperty函数时始终要使用的DIPROPHEADER结构体定义如下：<br><br>Serves as a header for all property structures.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>typedef struct DIPROPHEADER {<br>    DWORD    dwSize;<br>    DWORD    dwHeaderSize;<br>    DWORD    dwObj;<br>    DWORD    dwHow;<br>} DIPROPHEADER, *LPDIPROPHEADER;<br> <br>typedef const DIPROPHEADER *LPCDIPROPHEADER;<br><br><span style=font-weight:700;color:#256429>Members</span><br><br>dwSize<br>Size of the enclosing structure. This member must be initialized before the structure is used.<br><br>dwHeaderSize<br>Size of the DIPROPHEADER structure.<br><br>dwObj<br>Object for which the property is to be accessed. The value set for this member depends on the value specified in the dwHow member.<br><br>dwHow<br>Value that specifies how the dwObj member should be interpreted. This value can be one of the following:<br><br>DIPH_DEVICE<br>The dwObj member must be 0.<br><br>DIPH_BYOFFSET<br>The dwObj member is the offset into the current data format of the object whose property is being accessed.<br><br>DIPH_BYUSAGE<br>The dwObj member is the HID usage page and usage values in packed form.<br><br>DIPH_BYID<br>The dwObj member is the object type/instance identifier. This identifier is returned in the dwType member of the DIDEVICEOBJECTINSTANCE structure returned from a previous call to the IDirectInputDevice8::EnumObjects member.<br><br><span style=font-weight:700>获得设备</span><br><br>在使用任何设备之前，首先必须获得设备。只有获得了设备才能确保程序能够访问设备，以及同其他程序共享访问还是完全控制设备。要注意的是其他程序可能会争夺并抢走对设备的控制权，要补救这种情况就必须重新获得设备。何时必须获得设备？第一种情况就是在创建接口的时候，原因在于使用设备之前必须首先获得它。另一种情况就是当另一个程序抢走了对设备的控制，同时 DirectInput通知了程序时。<br><br>调用IDirectInputDevice8::Acquire函数即可获得设备。<br><br>Obtains access to the input device.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT Acquire(VOID);<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK, or S_FALSE if the device was already acquired.<br><br>If the method fails, the return value can be one of the following error values.<br><br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br>DIERR_OTHERAPPHASPRIO Another application has a higher priority level, preventing this call from succeeding. This value is equal to the E_ACCESSDENIED standard COM return value. This error can be returned when an application has only foreground access to a device but is attempting to acquire the device while in the background.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>Before a device can be acquired, a data format must be set by using the IDirectInputDevice8::SetDataFormat method or IDirectInputDevice8::SetActionMap method. If the data format has not been set, IDirectInputDevice8::Acquire returns DIERR_INVALIDPARAM.<br><br>Devices must be acquired before calling the IDirectInputDevice8::GetDeviceState or IDirectInputDevice8::GetDeviceData methods for that device.<br><br>Device acquisition does not use a reference count. Therefore, if an application calls the IDirectInputDevice8::Acquire method twice, then calls the IDirectInputDevice8::Unacquire method once, the device is unacquired.<br><br>If IDirectInputDevice8::BuildActionMap succeeds but no actions have been mapped, a subsequent call to IDirectInputDevice8::SetActionMap will return DI_OK but a call to IDirectInputDevice8::Acquire will fail with DIERR_INVALIDPARAM.<br><br><span style=font-weight:700>轮询设备</span><br><br>轮询可以准备设备并在合适的情况下读取设备数据，因为数据可能具有临界时间。游戏杆就是这样的设备，要从设备读取数据，计算机需要发送一个电子脉冲给它。虽然轮询对于游戏杆输入而言是必须的，但是对键盘或鼠标来说却并不需要轮询。<br><br>轮询设备需要使用IDirectInputDevice8::Poll函数。<br><br>Retrieves data from polled objects on a Microsoft DirectInput device. If the device does not require polling, calling this method has no effect. If a device that requires polling is not polled periodically, no new data is received from the device. Calling this method causes DirectInput to update the device state, generate input events (if buffered data is enabled), and set notification events (if notification is enabled).<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT Poll(VOID);<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK, or DI_NOEFFECT if the device does not require polling.<br><br>If the method fails, the return value can be one of the following error values:<br><br>DIERR_INPUTLOST Access to the input device has been lost. It must be reacquired.<br>DIERR_NOTACQUIRED The operation cannot be performed unless the device is acquired.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>Before a device data can be polled, the data format must be set by using the IDirectInputDevice8::SetDataFormat or IDirectInputDevice8::SetActionMap method, and the device must be acquired by using the IDirectInputDevice8::Acquire method.<br><br><span style=font-weight:700>读取数据</span><br><br>经过以上的步骤，就剩下最后一步了，那就是使用 IDirectInputDevice8::GetDeviceState函数读取设备数据。为了存储设备的信息，必须传递一个数据缓冲区给此函数，这样程序才能使用设备的信息，每种设备的数据各不相同。<br><br>Retrieves immediate data from the device.<br><br><span style=font-weight:700;color:#256429>Syntax</span><br><br>HRESULT GetDeviceState(DWORD cbData,<br>    LPVOID lpvData<br>);<br><br><span style=font-weight:700;color:#256429>Parameters</span><br><br>cbData<br>Size of the buffer in the lpvData parameter, in bytes.<br><br>lpvData<br>Address of a structure that receives the current state of the device. The format of the data is established by a prior call to the IDirectInputDevice8::SetDataFormat method.<br><br><span style=font-weight:700;color:#256429>Return Value</span><br><br>If the method succeeds, the return value is DI_OK.<br><br>If the method fails, the return value can be one of the following error values:<br><br>DIERR_INPUTLOST Access to the input device has been lost. It must be reacquired.<br><br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br><br>DIERR_NOTACQUIRED The operation cannot be performed unless the device is acquired.<br><br>DIERR_NOTINITIALIZED The object has not been initialized.<br><br>E_PENDING Data is not yet available.<br><br><span style=font-weight:700;color:#256429>Remarks</span><br><br>Before device data can be obtained, set the cooperative level by using the IDirectInputDevice8::SetCooperativeLevel method, then set the data format by using IDirectInputDevice8::SetDataFormat, and acquire the device by using the IDirectInputDevice8::Acquire method.<br><br>The five predefined data formats require corresponding device state structures according to the following table:<br><br>Data format State structure<br>c_dfDIMouse DIMOUSESTATE<br>c_dfDIMouse2 DIMOUSESTATE2<br>c_dfDIKeyboard array of 256 bytes<br>c_dfDIJoystick DIJOYSTATE<br>c_dfDIJoystick2 DIJOYSTATE2<br><br>For example, if you passed the c_dfDIMouse format to the IDirectInputDevice8::SetDataFormat method, you must pass a DIMOUSESTATE structure to the IDirectInputDevice8::GetDeviceState method.<br><br>无论是哪种设备，下面的代码都能读取其数据。它们考虑了丢失设备并在适当的时刻重新获得设备的情况，必须传递一个指向缓冲区的指针给下面这个函数，缓冲区的大小要能够保存设备信息以及读取的数据量。<br><br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/using-directinput-for-interaction-part-2/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/the-patriotic-calligrapher-and-his-fans/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="“爱国书法家”和他的粉丝"><meta itemprop=description content="　　很多中国人对中药充满了自信、中药也给他们带来很多“安全感”。这有些互惠互利的感觉：你相信我，我就给你安全感，而且让你担心一旦没有中医中药，中国一定会亡国亡种。这已经不是药了，也不是医学了，仿佛是中国人的寄主和守护神，而中国人则是中医中药的寄生虫。我又要批评那些支持中医的人数典忘祖了。在神农之前，生活在这片神奇土地上的原始人难道不是人么，怎么可以抹去中国没有中医的那段历史，原始中国人在山顶洞河姆渡男的狩猎女的采集的历史，你们怎么可以数典忘祖，轻松抹去中国原始人类没有中医的100多万年的历史？咦，原来没有中医，中国人居然也可以活下来，不但没亡种，而且还可以一直进化呢。中国人是突然蹦出来的么，是先有中医还是先有中国人？这道理就跟上帝造人说一样简单。先有了人类，人类再意淫出了上帝造人说。先有了中国人才有中医，中医是为了中国人活得更好而存在，当中医不再适应时代要求，则被残酷的淘汰。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/the-patriotic-calligrapher-and-his-fans/ itemprop=url class=post-title-link>“爱国书法家”和他的粉丝</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月24日 19:37:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-24 19:37:00 +0800 +0800">2007年07月24日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/capricethink/ itemprop=url rel=index><span itemprop=name>CapriceThink</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/the-patriotic-calligrapher-and-his-fans/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>　　很多中国人对中药充满了自信、中药也给他们带来很多“安全感”。这有些互惠互利的感觉：你相信我，我就给你安全感，而且让你担心一旦没有中医中药，中国一定会亡国亡种。这已经不是药了，也不是医学了，仿佛是中国人的寄主和守护神，而中国人则是中医中药的寄生虫。我又要批评那些支持中医的人数典忘祖了。在神农之前，生活在这片神奇土地上的原始人难道不是人么，怎么可以抹去中国没有中医的那段历史，原始中国人在山顶洞河姆渡男的狩猎女的采集的历史，你们怎么可以数典忘祖，轻松抹去中国原始人类没有中医的100多万年的历史？咦，原来没有中医，中国人居然也可以活下来，不但没亡种，而且还可以一直进化呢。中国人是突然蹦出来的么，是先有中医还是先有中国人？这道理就跟上帝造人说一样简单。先有了人类，人类再意淫出了上帝造人说。先有了中国人才有中医，中医是为了中国人活得更好而存在，当中医不再适应时代要求，则被残酷的淘汰。</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/the-patriotic-calligrapher-and-his-fans/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/using-directinput-for-interaction-part-1/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用DirectInput进行交互（1）"><meta itemprop=description content="DirectInput是一些COM对象的集合（和所有DirectX组件相同），这些COM对象描绘了输入系统和各个输入设备。最主要的对象是DirectInput8，它用于初始化系统以及创建输入设备接口。DirectInput COM对象：IDirectInput8：主要的DirectInput8 COM接口，其他所有接口都通过这个接口进行查询。DirectInputDevice8：用于输入设备的COM接口，每个设备都有自己单独的接口可供使用。DirectInputEffect：用于力反馈效果的 COM接口，比如某些游戏杆和某些鼠标上的力反馈效果。各种输入设备（比如键盘、鼠标和游戏杆）都使用相同的接口对象IDirectInputDevice8。某些设备，比如游戏杆和鼠标，能够通过查询各自的IDirectInputDevice8对象以得到另外一个接口IDirectInputEffect，这个接口用于控制设备的力反馈效果。IDirectInput8组件对象包含了很多用于初始化输入系统以及获得设备接口的函数，在这些函数中，常用的只有两个，它们是IDirectInput8::EnumDevices和IDirectInput8::CreateDevice。初始化DirectInput要使用DirectInput，需要确保包含了DInput.h和在工程中链接了DInput8.lib，一个IDirectInput8对象就代表了主要DirectInput对象。DirectInput提供了帮助函数DirectInput8Create用于初始化IDirectInput8接口。Creates a Microsoft DirectInput object and returns an IDirectInput8 or later interface.SyntaxHRESULT WINAPI DirectInput8Create(          HINSTANCE hinst,    DWORD dwVersion,    REFIID riidltf,    LPVOID ppvOut,    LPUNKNOWN punkOuter);ParametershinstInstance handle to the application or dynamic-link library (DLL) that is creating the DirectInput object. DirectInput uses this value to determine whether the application or DLL has been certified and to establish any special behaviors that might be necessary for backward compatibility. It is an error for a DLL to pass the handle to the parent application. For example, an Microsoft ActiveX control embedded in a Web page that uses DirectInput must pass its own instance handle, and not the handle to the browser. This ensures that DirectInput recognizes the control and can enable any special behaviors that might be necessary.dwVersionVersion number of DirectInput for which the application is designed. This value is normally DIRECTINPUT_VERSION. If the application defines DIRECTINPUT_VERSION before including Dinput.h, the value must be greater than 0x0800. For earlier versions, use DirectInputCreateEx, which is in Dinput.lib. riidltfUnique identifier of the desired interface. This value is IID_IDirectInput8A or IID_IDirectInput8W. Passing the IID_IDirectInput8 define selects the ANSI or Unicode version of the interface, depending on whether UNICODE is defined during compilation. ppvOutAddress of a pointer to a variable to receive the interface pointer if the call succeeds. punkOuterPointer to the address of the controlling object&rsquo;s IUnknown interface for Component Object Model (COM) aggregation, or NULL if the interface is not aggregated. Most calling applications pass NULL. If aggregation is requested, the object returned in ppvOut is a pointer to IUnknown, as required by COM aggregation. 使用DirectInput设备的步骤1、获取设备GUID，调用IDirectInput8::EnumDevice来实现。2、创建设备COM对象，调用IDirectInput8::CreateDevice来实现。3、设置数据格式，调用IDirectInputDevice8::SetDataFormat来实现。4、设置协作级别，调用IDirectInputDevice8::SetCooperativeLevel来实现。5、设置任何特殊属性，调用IDirectInputDevice8::SetProperty来实现。6、获得设备，调用IDirectInputDevice8::Acquire来实现。7、轮询设备，调用IDirectInputDevice8::Poll来实现。8、读取数据，调用IDirectInputDevice8::GetDeviceState来实现。在进行这些步骤前，要确保声明了一个IDirectInput设备对象，即IDirectInputDevice8对象。获取设备GUID每个安装的设备都有一个系统分配的全局惟一标识符（global unique identification, GUID）数字。要使用一个设备，首先必须知道它的GUID。对于连接到系统上的鼠标和键盘，得到他们的GUID非常容易，DirectInput分别为鼠标和键盘的GUID定义成GUID_SysKeyboard和GUID_SysMouse。要使用GUID_SysKeyboard或GUID_SysMouse，必须在所有其他的预处理程序指令前定义INITGUID，或者将DXGuid.lib库链接到项目中。至于其他设备，必须枚举出这些设备，才能得到需要的那些设备的GUID。枚举就是遍历一个含有数据项的列表的过程，数据项就是诸如游戏杆之类的输入设备。假设有5个游戏杆连接到了系统上，那么在枚举的过程中，DirectInput就会传递各个游戏杆的相关信息，而且每次只传递一个游戏杆的信息，直到所有的游戏杆都已经被列出来或者列举被强行终止。用于枚举设备的函数是IDirectInput8::EnumDevice。Enumerates available devices.SyntaxHRESULT EnumDevices(DWORD dwDevType,    LPDIENUMDEVICESCALLBACK lpCallback,    LPVOID pvRef,    DWORD dwFlags);ParametersdwDevTypeDevice type filter. To restrict the enumeration to a particular type of device, set this parameter to a DI8DEVTYPE_ value. See DIDEVICEINSTANCE. To enumerate a class of devices, use one of the following values. DI8DEVCLASS_ALLAll devices. DI8DEVCLASS_DEVICEAll devices that do not fall into another class. DI8DEVCLASS_GAMECTRLAll game controllers. DI8DEVCLASS_KEYBOARDAll keyboards. Equivalent to DI8DEVTYPE_KEYBOARD. DI8DEVCLASS_POINTERAll devices of type DI8DEVTYPE_MOUSE and DI8DEVTYPE_SCREENPOINTER. lpCallbackAddress of a callback function to be called once for each device enumerated. See DIEnumDevicesCallback. pvRefApplication-defined 32-bit value to be passed to the enumeration callback each time it is called. dwFlagsFlag value that specifies the scope of the enumeration. This parameter can be one or more of the following values: DIEDFL_ALLDEVICESAll installed devices are enumerated. This is the default behavior. DIEDFL_ATTACHEDONLYOnly attached and installed devices. DIEDFL_FORCEFEEDBACKOnly devices that support force feedback. DIEDFL_INCLUDEALIASESInclude devices that are aliases for other devices. DIEDFL_INCLUDEHIDDENInclude hidden devices. For more information about hidden devices, see DIDEVCAPS. DIEDFL_INCLUDEPHANTOMSInclude phantom (placeholder) devices. Return ValueIf the method succeeds, the return value is DI_OK.If the method fails, the return value can be one of the following error values.DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value. DIERR_NOTINITIALIZED The object has not been initialized. RemarksAll installed devices can be enumerated, even if they are not present. For example, a flight stick might be installed on the system but not currently plugged into the computer. Set the dwFlags parameter to indicate whether only attached or all installed devices should be enumerated. If the DIEDFL_ATTACHEDONLY flag is not present, all installed devices are enumerated. A preferred device type can be passed as a dwDevType filter so that only the devices of that type are enumerated.On Microsoft Windows XP, Microsoft DirectInput enumerates only one mouse and one keyboard device, referred to as the system mouse and the system keyboard. These devices represent the combined output of all mice and keyboards respectively on a system. For information about how to read from multiple mice or keyboards individually on Windows XP, see the WM_INPUT documentation.Note  The order in which devices are enumerated by DirectInput is not guaranteed.lpCallback是一个指向枚举函数的指针，在系统上每找到一个匹配的设备时，就会调用该函数。Application-defined callback function that receives Microsoft DirectInput devices as a result of a call to the IDirectInput8::EnumDevices method.SyntaxBOOL CALLBACK DIEnumDevicesCallback(LPCDIDEVICEINSTANCE lpddi,    LPVOID pvRef);ParameterslpddiAddress of a DIDEVICEINSTANCE structure that describes the device instance. pvRefThe application-defined value passed to IDirectInput8::EnumDevices or IDirectInput8::EnumDevicesBySemantics as the pvRef parameter. Return ValueReturns DIENUM_CONTINUE to continue the enumeration or DIENUM_STOP to stop the enumeration.RemarksIf a single hardware device can function as more than one DirectInput device type, it is enumerated as each device type that it supports. For example, a keyboard with a built-in mouse is enumerated twice: once as a keyboard and once as a mouse. The product globally unique identifier (GUID) is the same for each device, however.lpddi是一个指向DIDEVICEINSTANCE结构体的指针，此结构体包含了此次调用时当前枚举设备上的信息。Describes an instance of a Microsoft DirectInput device. This structure is used with the IDirectInput8::EnumDevices, IDirectInput8::EnumDevicesBySemantics, and IDirectInputDevice8::GetDeviceInfo methods.Syntaxtypedef struct DIDEVICEINSTANCE {     DWORD dwSize;     GUID  guidInstance;     GUID  guidProduct;     DWORD dwDevType;     TCHAR tszInstanceName[MAX_PATH];     TCHAR tszProductName[MAX_PATH];    GUID  guidFFDriver;    WORD  wUsagePage;     WORD  wUsage;} DIDEVICEINSTANCE, *LPDIDEVICEINSTANCE;  typedef const DIDEVICEINSTANCE  *LPCDIDEVICEINSTANCE;MembersdwSizeSize of this structure, in bytes. This member must be initialized before the structure is used. guidInstanceUnique identifier for the instance of the device. An application can save the instance globally unique identifier (GUID) into a configuration file and use it at a later time. Instance GUIDs are specific to a particular computer. An instance GUID obtained from one computer is unrelated to instance GUIDs on another. guidProductUnique identifier for the product. This identifier is established by the manufacturer of the device. dwDevTypeDevice type specifier. The least-significant byte of the device type description code specifies the device type. The next-significant byte specifies the device subtype. This value can also be combined with DIDEVTYPE_HID, which specifies a Human Interface Device (HID). tszInstanceNameFriendly name for the instance. For example, &ldquo;Joystick 1.&rdquo; tszProductNameFriendly name for the product. guidFFDriverUnique identifier for the driver being used for force feedback. The driver&rsquo;s manufacturer establishes this identifier. wUsagePageIf the device is a Human Interface Device (HID), this member contains the HID usage page code. wUsageIf the device is a Human Interface Device (HID), this member contains the HID usage code. 创建设备COM对象有了设备GUID，就能创建实际的IDirectInputDevice8 COM对象了，用于创建此COM对象的函数是IDirectInput8::CreateDevice。Creates and initializes an instance of a device based on a given globally unique identifier (GUID), and obtains an IDirectInputDevice8 interface. SyntaxHRESULT CreateDevice(REFGUID rguid,    LPDIRECTINPUTDEVICE *lplpDirectInputDevice,    LPUNKNOWN pUnkOuter);ParametersrguidReference to (C++) or address of (C) the instance GUID for the desired input device (see Remarks). The GUID is retrieved through the IDirectInput8::EnumDevices method, or it can be one of the predefined GUIDs listed below. For the following GUID values to be valid, your application must define INITGUID before all other preprocessor directives at the beginning of the source file, or link to Dxguid.lib. GUID_SysKeyboardThe default system keyboard. GUID_SysMouseThe default system mouse. lplpDirectInputDeviceAddress of a variable to receive the IDirectInputDevice8 interface pointer if successful. pUnkOuterAddress of the controlling object&rsquo;s IUnknown interface for Component Object Model (COM) aggregation, or NULL if the interface is not aggregated. Most calling applications pass NULL. Return ValueIf the method succeeds, the return value is DI_OK.If the method fails, the return value can be one of the following:DIERR_DEVICENOTREG： The device or device instance is not registered with Microsoft DirectInput. This value is equal to the REGDB_E_CLASSNOTREG standard COM return value. DIERR_INVALIDPARAM： An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard COM return value. DIERR_NOINTERFACE： The specified interface is not supported by the object. This value is equal to the E_NOINTERFACE standard COM return value. DIERR_NOTINITIALIZED： The object has not been initialized. DIERR_OUTOFMEMORY： The DirectInput subsystem couldn&rsquo;t allocate sufficient memory to complete the call. This value is equal to the E_OUTOFMEMORY standard COM return value. RemarksCalling this method with pUnkOuter = NULL is equivalent to creating the object by CoCreateInstance (&amp;CLSID_DirectInputDevice, NULL, CLSCTX_INPROC_SERVER, riid, lplpDirectInputDevice) and then initializing it with Initialize.Calling this method with pUnkOuter != NULL is equivalent to creating the object by CoCreateInstance (&amp;CLSID_DirectInputDevice, punkOuter, CLSCTX_INPROC_SERVER, &amp;IID_IUnknown, lplpDirectInputDevice). The aggregated object must be initialized manually."></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/using-directinput-for-interaction-part-1/ itemprop=url class=post-title-link>使用DirectInput进行交互（1）</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月24日 01:23:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-24 01:23:00 +0800 +0800">2007年07月24日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:21:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:21:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/using-directinput-for-interaction-part-1/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>DirectInput是一些COM对象的集合（和所有DirectX组件相同），这些COM对象描绘了输入系统和各个输入设备。最主要的对象是DirectInput8，它用于初始化系统以及创建输入设备接口。<br><br>DirectInput COM对象：<br><br>IDirectInput8：主要的DirectInput8 COM接口，其他所有接口都通过这个接口进行查询。<br>DirectInputDevice8：用于输入设备的COM接口，每个设备都有自己单独的接口可供使用。<br>DirectInputEffect：用于力反馈效果的 COM接口，比如某些游戏杆和某些鼠标上的力反馈效果。<br><br>各种输入设备（比如键盘、鼠标和游戏杆）都使用相同的接口对象IDirectInputDevice8。某些设备，比如游戏杆和鼠标，能够通过查询各自的IDirectInputDevice8对象以得到另外一个接口IDirectInputEffect，这个接口用于控制设备的力反馈效果。IDirectInput8组件对象包含了很多用于初始化输入系统以及获得设备接口的函数，在这些函数中，常用的只有两个，它们是IDirectInput8::EnumDevices和IDirectInput8::CreateDevice。<br><br><span style=font-weight:700>初始化DirectInput</span><br><br>要使用DirectInput，需要确保包含了DInput.h和在工程中链接了DInput8.lib，一个IDirectInput8对象就代表了主要DirectInput对象。<br>DirectInput提供了帮助函数DirectInput8Create用于初始化IDirectInput8接口。<br><br>Creates a Microsoft DirectInput object and returns an IDirectInput8 or later interface.<br><br style=color:#5c4436><span style=font-weight:700;color:#3e764c>Syntax</span><br><br>HRESULT WINAPI DirectInput8Create(          HINSTANCE hinst,<br>    DWORD dwVersion,<br>    REFIID riidltf,<br>    LPVOID <em>ppvOut,<br>    LPUNKNOWN punkOuter<br>);<br><br><span style=font-weight:700;color:#3e764c>Parameters</span><br><br><span style=font-weight:700>hinst</span><br>Instance handle to the application or dynamic-link library (DLL) that is creating the DirectInput object. DirectInput uses this value to determine whether the application or DLL has been certified and to establish any special behaviors that might be necessary for backward compatibility.<br><br>It is an error for a DLL to pass the handle to the parent application. For example, an Microsoft ActiveX control embedded in a Web page that uses DirectInput must pass its own instance handle, and not the handle to the browser. This ensures that DirectInput recognizes the control and can enable any special behaviors that might be necessary.<br><br><span style=font-weight:700>dwVersion</span><br>Version number of DirectInput for which the application is designed. This value is normally DIRECTINPUT_VERSION. If the application defines DIRECTINPUT_VERSION before including Dinput.h, the value must be greater than 0x0800. For earlier versions, use DirectInputCreateEx, which is in Dinput.lib.<br><br><span style=font-weight:700>riidltf</span><br>Unique identifier of the desired interface. This value is IID_IDirectInput8A or IID_IDirectInput8W. Passing the IID_IDirectInput8 define selects the ANSI or Unicode version of the interface, depending on whether UNICODE is defined during compilation.<br><br><span style=font-weight:700>ppvOut</span><br>Address of a pointer to a variable to receive the interface pointer if the call succeeds.<br><br><span style=font-weight:700>punkOuter</span><br>Pointer to the address of the controlling object&rsquo;s IUnknown interface for Component Object Model (COM) aggregation, or NULL if the interface is not aggregated. Most calling applications pass NULL. If aggregation is requested, the object returned in ppvOut is a pointer to IUnknown, as required by COM aggregation.<br><br><span style=font-weight:700>使用DirectInput设备的步骤</span><br><br>1、获取设备GUID，调用IDirectInput8::EnumDevice来实现。<br>2、创建设备COM对象，调用IDirectInput8::CreateDevice来实现。<br>3、设置数据格式，调用IDirectInputDevice8::SetDataFormat来实现。<br>4、设置协作级别，调用IDirectInputDevice8::SetCooperativeLevel来实现。<br>5、设置任何特殊属性，调用IDirectInputDevice8::SetProperty来实现。<br>6、获得设备，调用IDirectInputDevice8::Acquire来实现。<br>7、轮询设备，调用IDirectInputDevice8::Poll来实现。<br>8、读取数据，调用IDirectInputDevice8::GetDeviceState来实现。<br><br>在进行这些步骤前，要确保声明了一个IDirectInput设备对象，即IDirectInputDevice8对象。<br><br><span style=font-weight:700>获取设备GUID</span><br><br>每个安装的设备都有一个系统分配的全局惟一标识符（global unique identification, GUID）数字。要使用一个设备，首先必须知道它的GUID。对于连接到系统上的鼠标和键盘，得到他们的GUID非常容易，DirectInput分别为鼠标和键盘的GUID定义成GUID_SysKeyboard和GUID_SysMouse。要使用GUID_SysKeyboard或GUID_SysMouse，必须在所有其他的预处理程序指令前定义INITGUID，或者将DXGuid.lib库链接到项目中。至于其他设备，必须枚举出这些设备，才能得到需要的那些设备的GUID。枚举就是遍历一个含有数据项的列表的过程，数据项就是诸如游戏杆之类的输入设备。假设有5个游戏杆连接到了系统上，那么在枚举的过程中，DirectInput就会传递各个游戏杆的相关信息，而且每次只传递一个游戏杆的信息，直到所有的游戏杆都已经被列出来或者列举被强行终止。<br><br>用于枚举设备的函数是IDirectInput8::EnumDevice。<br><br>Enumerates available devices.<br><br><span style=font-weight:700;color:#3e764c>Syntax</span><br><br>HRESULT EnumDevices(DWORD dwDevType,<br>    LPDIENUMDEVICESCALLBACK lpCallback,<br>    LPVOID pvRef,<br>    DWORD dwFlags<br>);<br><br><span style=font-weight:700;color:#3e764c>Parameters</span><br><br><span style=font-weight:700>dwDevType</span><br>Device type filter.<br><br>To restrict the enumeration to a particular type of device, set this parameter to a DI8DEVTYPE_</em> value. See DIDEVICEINSTANCE.<br><br>To enumerate a class of devices, use one of the following values.<br><br>DI8DEVCLASS_ALL<br>All devices.<br><br>DI8DEVCLASS_DEVICE<br>All devices that do not fall into another class.<br><br>DI8DEVCLASS_GAMECTRL<br>All game controllers.<br><br>DI8DEVCLASS_KEYBOARD<br>All keyboards. Equivalent to DI8DEVTYPE_KEYBOARD.<br><br>DI8DEVCLASS_POINTER<br>All devices of type DI8DEVTYPE_MOUSE and DI8DEVTYPE_SCREENPOINTER.<br><br><span style=font-weight:700>lpCallback</span><br>Address of a callback function to be called once for each device enumerated. See DIEnumDevicesCallback.<br><br><span style=font-weight:700>pvRef</span><br>Application-defined 32-bit value to be passed to the enumeration callback each time it is called.<br><br><span style=font-weight:700>dwFlags</span><br>Flag value that specifies the scope of the enumeration. This parameter can be one or more of the following values:<br><br>DIEDFL_ALLDEVICES<br>All installed devices are enumerated. This is the default behavior.<br><br>DIEDFL_ATTACHEDONLY<br>Only attached and installed devices.<br><br>DIEDFL_FORCEFEEDBACK<br>Only devices that support force feedback.<br><br>DIEDFL_INCLUDEALIASES<br>Include devices that are aliases for other devices.<br><br>DIEDFL_INCLUDEHIDDEN<br>Include hidden devices. For more information about hidden devices, see DIDEVCAPS.<br><br>DIEDFL_INCLUDEPHANTOMS<br>Include phantom (placeholder) devices.<br><br><span style=font-weight:700;color:#3e764c>Return Value</span><br><br>If the method succeeds, the return value is DI_OK.<br><br>If the method fails, the return value can be one of the following error values.<br><br>DIERR_INVALIDPARAM An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard Component Object Model (COM) return value.<br>DIERR_NOTINITIALIZED The object has not been initialized.<br><br><span style=font-weight:700;color:#3e764c>Remarks</span><br><br>All installed devices can be enumerated, even if they are not present. For example, a flight stick might be installed on the system but not currently plugged into the computer. Set the dwFlags parameter to indicate whether only attached or all installed devices should be enumerated. If the DIEDFL_ATTACHEDONLY flag is not present, all installed devices are enumerated.<br><br>A preferred device type can be passed as a dwDevType filter so that only the devices of that type are enumerated.<br><br>On Microsoft Windows XP, Microsoft DirectInput enumerates only one mouse and one keyboard device, referred to as the system mouse and the system keyboard. These devices represent the combined output of all mice and keyboards respectively on a system. For information about how to read from multiple mice or keyboards individually on Windows XP, see the WM_INPUT documentation.<br><br>Note  The order in which devices are enumerated by DirectInput is not guaranteed.<br><br>lpCallback是一个指向枚举函数的指针，在系统上每找到一个匹配的设备时，就会调用该函数。<br><br>Application-defined callback function that receives Microsoft DirectInput devices as a result of a call to the IDirectInput8::EnumDevices method.<br><br><span style=font-weight:700;color:#3e764c>Syntax</span><br><br>BOOL CALLBACK DIEnumDevicesCallback(LPCDIDEVICEINSTANCE lpddi,<br>    LPVOID pvRef<br>);<br><br><span style=font-weight:700;color:#3e764c>Parameters</span><br><br><span style=font-weight:700>lpddi</span><br>Address of a DIDEVICEINSTANCE structure that describes the device instance.<br><br><span style=font-weight:700>pvRef</span><br>The application-defined value passed to IDirectInput8::EnumDevices or IDirectInput8::EnumDevicesBySemantics as the pvRef parameter.<br><br><span style=font-weight:700;color:#3e764c>Return Value</span><br><br>Returns DIENUM_CONTINUE to continue the enumeration or DIENUM_STOP to stop the enumeration.<br><br><span style=font-weight:700;color:#3e764c>Remarks</span><br><br>If a single hardware device can function as more than one DirectInput device type, it is enumerated as each device type that it supports. For example, a keyboard with a built-in mouse is enumerated twice: once as a keyboard and once as a mouse. The product globally unique identifier (GUID) is the same for each device, however.<br><br>lpddi是一个指向DIDEVICEINSTANCE结构体的指针，此结构体包含了此次调用时当前枚举设备上的信息。<br><br>Describes an instance of a Microsoft DirectInput device. This structure is used with the IDirectInput8::EnumDevices, IDirectInput8::EnumDevicesBySemantics, and IDirectInputDevice8::GetDeviceInfo methods.<br><br><span style=font-weight:700;color:#3e764c>Syntax</span><br><br>typedef struct DIDEVICEINSTANCE {<br>    DWORD dwSize;<br>    GUID  guidInstance;<br>    GUID  guidProduct;<br>    DWORD dwDevType;<br>    TCHAR tszInstanceName[MAX_PATH];<br>    TCHAR tszProductName[MAX_PATH];<br>    GUID  guidFFDriver;<br>    WORD  wUsagePage;<br>    WORD  wUsage;<br>} DIDEVICEINSTANCE, *LPDIDEVICEINSTANCE;<br> <br>typedef const DIDEVICEINSTANCE  *LPCDIDEVICEINSTANCE;<br><br><span style=font-weight:700;color:#3e764c>Members</span><br><br>dwSize<br>Size of this structure, in bytes. This member must be initialized before the structure is used.<br><br>guidInstance<br>Unique identifier for the instance of the device. An application can save the instance globally unique identifier (GUID) into a configuration file and use it at a later time. Instance GUIDs are specific to a particular computer. An instance GUID obtained from one computer is unrelated to instance GUIDs on another.<br><br>guidProduct<br>Unique identifier for the product. This identifier is established by the manufacturer of the device.<br><br>dwDevType<br>Device type specifier. The least-significant byte of the device type description code specifies the device type. The next-significant byte specifies the device subtype. This value can also be combined with DIDEVTYPE_HID, which specifies a Human Interface Device (HID).<br><br>tszInstanceName<br>Friendly name for the instance. For example, &ldquo;Joystick 1.&rdquo;<br><br>tszProductName<br>Friendly name for the product.<br><br>guidFFDriver<br>Unique identifier for the driver being used for force feedback. The driver&rsquo;s manufacturer establishes this identifier.<br><br>wUsagePage<br>If the device is a Human Interface Device (HID), this member contains the HID usage page code.<br><br>wUsage<br>If the device is a Human Interface Device (HID), this member contains the HID usage code.<br><br><span style=font-weight:700>创建设备COM对象</span><br><br>有了设备GUID，就能创建实际的IDirectInputDevice8 COM对象了，用于创建此COM对象的函数是IDirectInput8::CreateDevice。<br><br>Creates and initializes an instance of a device based on a given globally unique identifier (GUID), and obtains an IDirectInputDevice8 interface.<br><br><span style=font-weight:700;color:#3e764c>Syntax</span><br><br>HRESULT CreateDevice(REFGUID rguid,<br>    LPDIRECTINPUTDEVICE *lplpDirectInputDevice,<br>    LPUNKNOWN pUnkOuter<br>);<br><br><span style=font-weight:700;color:#3e764c>Parameters</span><br><br><span style=font-weight:700>rguid</span><br>Reference to (C++) or address of (C) the instance GUID for the desired input device (see Remarks). The GUID is retrieved through the IDirectInput8::EnumDevices method, or it can be one of the predefined GUIDs listed below. For the following GUID values to be valid, your application must define INITGUID before all other preprocessor directives at the beginning of the source file, or link to Dxguid.lib.<br><br>GUID_SysKeyboard<br>The default system keyboard.<br><br>GUID_SysMouse<br>The default system mouse.<br><br><span style=font-weight:700>lplpDirectInputDevice</span><br>Address of a variable to receive the IDirectInputDevice8 interface pointer if successful.<br><br><span style=font-weight:700>pUnkOuter</span><br>Address of the controlling object&rsquo;s IUnknown interface for Component Object Model (COM) aggregation, or NULL if the interface is not aggregated. Most calling applications pass NULL.<br><br><span style=font-weight:700;color:#3e764c>Return Value</span><br><br>If the method succeeds, the return value is DI_OK.<br><br>If the method fails, the return value can be one of the following:<br><br>DIERR_DEVICENOTREG： The device or device instance is not registered with Microsoft DirectInput. This value is equal to the REGDB_E_CLASSNOTREG standard COM return value.<br><br>DIERR_INVALIDPARAM： An invalid parameter was passed to the returning function, or the object was not in a state that permitted the function to be called. This value is equal to the E_INVALIDARG standard COM return value.<br><br>DIERR_NOINTERFACE： The specified interface is not supported by the object. This value is equal to the E_NOINTERFACE standard COM return value.<br><br>DIERR_NOTINITIALIZED： The object has not been initialized.<br><br>DIERR_OUTOFMEMORY： The DirectInput subsystem couldn&rsquo;t allocate sufficient memory to complete the call. This value is equal to the E_OUTOFMEMORY standard COM return value.<br><br><span style=font-weight:700;color:#3e764c>Remarks</span><br><br>Calling this method with pUnkOuter = NULL is equivalent to creating the object by CoCreateInstance (&amp;CLSID_DirectInputDevice, NULL, CLSCTX_INPROC_SERVER, riid, lplpDirectInputDevice) and then initializing it with Initialize.<br><br>Calling this method with pUnkOuter != NULL is equivalent to creating the object by CoCreateInstance (&amp;CLSID_DirectInputDevice, punkOuter, CLSCTX_INPROC_SERVER, &amp;IID_IUnknown, lplpDirectInputDevice). The aggregated object must be initialized manually.<br></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/using-directinput-for-interaction-part-1/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/the-grid-model-in-d3d/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="D3D中网格模型的运用"><meta itemprop=description content="
    Excerpt

点击下载源码和资源在最底层的层次中，Direct3D并不使用网格模型，而只是使用多边形。D3DX增强了 Direct3D系统的功能性，添加了一系列负责处理网格模型的容器和进行渲染的对象。.X文件是微软公司所开发的，高度通用的三维模型存储格式。它是模板驱动并完全可扩展，这就意味着可以使用它来满足文件存"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/the-grid-model-in-d3d/ itemprop=url class=post-title-link>D3D中网格模型的运用</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月22日 23:27:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-22 23:27:00 +0800 +0800">2007年07月22日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年08月27日 17:22:00 CST" itemprop="dateModified dateLastmod" datetime="2007-08-27 17:22:00 +0800 +0800">2007年08月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span>
</a></span></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/the-grid-model-in-d3d/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><blockquote><h2 id=excerpt>Excerpt
<a class=header-anchor href=#excerpt></a></h2><p>点击下载源码和资源在最底层的层次中，Direct3D并不使用网格模型，而只是使用多边形。D3DX增强了 Direct3D系统的功能性，添加了一系列负责处理网格模型的容器和进行渲染的对象。.X文件是微软公司所开发的，高度通用的三维模型存储格式。它是模板驱动并完全可扩展，这就意味着可以使用它来满足文件存</p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/the-grid-model-in-d3d/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/gaming-industry-reflection/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="一篇令所有游戏圈的兄弟汗颜的文章"><meta itemprop=description content="一篇很久的文章了,看看现在的游戏圈还是这样子的,在发表出来希望对做游戏的同志们有所帮助.1、无休止的抄袭
　　回想起上个世纪末，华人游戏圈还处于原始阶段，那时候随便竖几条枪占个山头就敢说自己是做游戏的，拿出来的东西勉强有个模样就不错了，Bug少点那得是国货精品。真正的国货精品又怎么样？一些玩家说：“玩过FF6我才知道我们的精品（《仙剑奇侠传》）跟人家的差得那么远。”那还是跟FF6比，现在的仙剑奇侠传3跟FF7又是什么差距呢？天晓得。但在中国，人们就认为《仙剑奇侠传》是最好的RPG。总结这种现象的时候，很多人不约而同地把“中国语言和地道的民族题材”当作最重要的一条，这就是他们所认为的“中文游戏优势”。中文游戏是什么呢？在大部分中国游戏制作人眼里，它等同外国游戏套中国皮。很多人叫嚷的“中国要有自己的AD&amp;D”就是这么回事——把圣灵与黑暗改成“阴阳”，魔法师唤作“道士”，属性相克略加修改成了“五行变化”。整个游戏只有命名是自己的，除了抄你还做了些什么呢？ 
　　没错，用本土语言和本土题材创作是一种优势，但这种优势只在特定的文化、地域界限之内起作用。随便哪个挂名“勇者斗恶龙”的游戏在日本都能热卖，但同样的东西拿到欧美去则只能惨淡收场。土星版的《仙剑奇侠传》在日本卖不好，正好从另一个侧面说明了这一点。更为关键的是，所谓的本土优势纯粹是市场判定，它体现出来的是游戏产品在语言文化上的优势而不是游戏本身的优势。所以本土优势与游戏作品的素质其实并无关系，跟游戏是否原创也没有关系。用这个标准来看，自中国大陆游戏业早期推出的《官渡》、《中国球王》以降，又有几个游戏称得上是原创的？冒昧地说，“中国人自己的垃圾游戏”和“垃圾游戏”大抵没有本质上的区别，垃圾游戏就是垃圾游戏。 
　　中国游戏行业每年都在抄，而且每年都有人跳出来说，中国游戏不抄不行。为什么不抄不行，是因为没钱吗？可不是。中国游戏缺钱的年代已经过去了，网络游戏让世人看到原来在中国做游戏也能赚钱。靠游戏赚钱并不是什么稀奇现象，但对接触过游戏行业的中国人来说，这简直就是黑色幽默——在中国做游戏也能赚钱，太不可思议了。不仅能赚钱，丁磊为此还作过一个贴切的形容：“网络游戏是每天睡觉都可以有成千上万收入的行当。” 现在这个行业每年有亿万资金往里面涌，正说明梦想着“轻松赚大钱”的投资者不在少数。 
　　钱永远不是万能的。有了钱，这个行业还是只能拿出那么点皮毛。这个年头，谁有了钱谁就使出吃奶的力气赶紧圈地，广告费能砸多少是多少，什么费用都不能省，除了制作经费。没办法，现在这个市场明摆着就是你扔多少广告费你就有多少回报——要是在运营之初没有足够的在线人数撑着，什么事情都不好办。陈天桥有一句名言：“我们要让大家知道，《传奇》是个烂游戏，但盛大是个好公司。”这话放哪都绝对是语不惊人死不休——甭管《传奇》是不是你作的，作为一家游戏公司你拿出来的东西都不是什么好货，你还有什么脸面说自己是好公司？但在中国，“好公司”做烂游戏，这就是铁一样的事实。《传奇世界》制作六个月就开始测试，从设计者的角度来看，六个月意味着这个游戏差不多没有前期策划，这种情况下全部代码能写完都已经是奇迹了，游戏本身当然是惨不忍睹——但这样的东西在中国还能挺得住，这就说明问题了。 
　　本来我还以为网游大潮能够给一些思路不够开阔的同仁醒醒脑，但现在连一些本来头脑还算清醒的家伙都开始晕头转向了。很多人见到我就大谈在线人数、资本操作，但他们明明是一线制作人员——这几年你们都干嘛去了？一个欣欣向荣的行业不但要有充足的资金，还要有务实的技术人员，但在中国这就产生了一个怪现象：在大家都朝不保夕的年代，讨论技术的气氛很是浓厚，但行业越阔，谈游戏就谈得越少。是啊，现在“好公司”都靠烂游戏挣钱，谁还会去关心游戏做得怎么样。 
　　2、荒唐的自信 
　　你哪里来的自信？ 
　　这句话我很想拿出来问问每一个游戏从业人员。凭什么靠烂游戏发家的公司能自称是“好公司”？凭什么对游戏行业的发展和现状的接近一无所知的人能够站在这侃侃而谈？凭什么，中国这么多人在网游的大道上充满自信地昂首阔步，一会声称自己是“好公司”，一会宣布自己的目标是“网上迪斯尼”？他们究竟对这个行业的现状了解有多少？ 
　　中国网游在销售渠道上已经显现出了过度营销的迹象。点卡搭售和炒货现象状况非常普遍，特别是点卡搭售——运营商用热门游戏的点卡硬性搭售冷门游戏的点卡，这意味着很多网游的实际销售额有一部分并不是通过正常销售完成的，搭售出去的点卡往往就烂在渠道的手里，或者通过一些别的手段处理掉。这表明现在市场上已经存在大量劣质游戏，而且运营商还用尽一切手段把这些游戏推出市场。这种情形让人不禁想起ATARI Shock：就在1984年的圣诞节，在美国处于家用机垄断地位的ATARI平台上因为充斥着大量虚有其表，内容雷同的游戏，导致整个美国的绝大部分玩家对游戏产业产生不信任感，销售渠道和消费者同时拒绝游戏软件，使得大量的游戏厂商破产，无数从业人员失业，整个美国游戏市场濒临崩溃。 
　　中国的游戏本身的问题比它在渠道上的表现还要严重得多。像《传奇世界》这样做了几个月就开始测试的游戏遍地都是，而同样是做游戏，暴雪光是测试就会用几个月时间。这还是看表面，看看游戏内容——不看不知道，一看吓一跳，所谓的中国原创网游几乎等同MMORPG，题材搞来搞去就那几套，表现手法几乎一摸一样，全是Diablo或者UO的劣质仿制品。这还算是原创吗？但是中国人还是有办法把这些东西卖出去的，其中一种手段就是五花八门的广告词：什么完美、高度逼真的全3D游戏世界，什么多种族，多职业，灵活的角色设定，什么严谨的政治、经济、权力结构，什么独特的XX系统，同类型产品的共同点被吹成“特色”，与同类型产品稍有不同的特点就成了天大的优点。 
　　如果说中国游戏行业领先于世界，那么以上这些问题可能都不是问题——但事情是这样的吗？正当我们这么些厂商正在用雷同的产品上作重复劳动的时候，无论是日本，还是欧美都在用我们难以想象的加速度继续赶超我们。回到开篇时候我的那句话，当年的仙剑奇侠传跟FF6有距离，但这个距离还是可见的；就现在，即使同样是火热滚烫的网络游戏，眼下国内搞的这么些东西，跟CAPCOM将要推出的《铁骑大战》、已经推出的《Biohazard Outbreak》，还有全民高尔夫Online等PS2 BB Network上的游戏又怎么能比呢？业内有个执行企划甚至这样告诉我：“我不敢多玩这些游戏，因为每玩一个我就感到深深的绝望。”为什么绝望？因为即使是在中国市场大红大紫、叫中国人无可奈何的韩国网游，也远不能够和这些日本游戏相提并论。 
　　除了圈地，中国游戏行业就显得非常不会花钱。网游大潮带来的投资往往大规模流入媒体和渠道，对制作的投入一般就停留在“买引擎”、“挖角”、“投资散兵游勇”（也就是那些做出个游戏毛坯四处兜售等着吃饭的行业新兵）的层次上面，这对一线制作水平的提高是非常有限的——总之不管有钱也好，没钱也罢，中国游戏行业总是在无休止地抄袭，即使现在的大好时光也不过是搭建在对几个里程碑式游戏的抄袭之上。所以，这个行业无论对外如何使用广告枪文，对内如何宣传各种远称不上合理的说法，都掩盖不住以下的事实：放眼世界，中国游戏行业不但技不如人，而且在萌芽阶段就开始了各种恶性竞争。游戏厂商普遍不以游戏为本，倒是绞尽脑汁用游戏制作以外的手段抢夺市场——如果不是这样，还能怎么解释某个没有背景音乐的游戏获得“年度最佳游戏音乐奖”？怎么解释某个网游还没公开测试（更别说正式运营）就得了奖？ 
　　在这种环境之下，技术人员不肯脚踏实地做事，明眼人不去揭穿皇帝的新衣，倒是一个接一个的外行敢于口出妄言。打个比方说，有篇叫做《酷经济》的文章，大谈中国游戏为何落后于别人，开篇就来一句“中国的网络游戏市场，让韩国、日本游戏占领了，是游戏开发技术不如人吗？是我们的游戏企业能力不如人吗？其实都不是。”天啊，连技术落后都不肯承认，接下来恐怕什么实事都用不着讲了，尽管放卫星就是。业外人胡说八道并不可怕，令人担忧的是很多小有名气的业内新兵也在胡言乱语，刚刚一脚踏进盛大的唐骏就属此类。在搜狐聊天室举办的一次活动里面，一个网友曾问他：“盛大网络游戏一个“传奇世界”、一个“热血传奇”，您玩不玩网络游戏？对网络游戏了解吗？”唐骏说:“我对网络游戏了解，但不是高手。”笔者在游戏方面的有着多年钻研，深知要对电子游戏达到“了解”的程度，进而对网络游戏达到“了解”的程度要花多少的精力，要耗费多少的资源。试问你唐骏搞IT搞了那么多年，要是说你也同样花了那么多的精力和资源在游戏上面，可能吗？果然，再接下来的问答中他露出了马脚： 
　　主持人陈拥军说:因为传奇和传奇世界在中国是非常有代表性的，您对这两块游戏怎么看？包括前景。 
　　唐骏说:传奇是带动整个中国网络游戏的产业，传奇是中国第一款真正具有实力的自主开发的游戏（笔者注：天啊，这句话用的都是什么语法？传奇怎么又变成你盛大自主研发的东西了？）。这都是非常具有代表意义的，也是未来有非常大发展前景的。加大更多的自主开发，来满足更多玩家的需求。 
　　唐骏说:我们讲到迪斯尼，如果你在美国，我们看到迪斯尼是什么？第一，它拥有品牌，这个品牌是所有娱乐也好，包括电视、电影、主题公园里面、相关的产品包括媒体等等都是迪斯尼品牌推出来的。这是我们现实生活当中的品牌，我们希望网上迪斯尼就是让人们在网上也同时能够感受到娱乐带来的快乐，比如网上电影、网上电视、网上主题公园等等，这都是我们对未来网上迪斯尼的构想。 
　　拜托，请不要拿盛大和Disney相提并论好不好？Disney品牌是靠像蓝猫那种水平的烂动画支撑起来的吗？不是的，人家靠的是米老鼠，白雪公主，小飞侠，阿拉丁这种实实在在的好动画支撑起来的。盛大的研发实力怎么样，产品放到世界属于第几流，这是路人皆知的事情，用这样的烂游戏、烂公司来做品牌，又能有什么前景？试想想，要是任天堂推出一个传奇一样的垃圾（把任天堂和传奇放在同一个句子里面的时候我不得不用这个字眼），它可能明天就要倒闭了！同样是这个盛大，有这大笔充裕的流动资金也还要流血上市，一上市包括陈天桥在内的内部人士就狂抛45％股票，这像是在做“网上Disney”吗？难道不是投机逃跑吗？ 
　　现在似乎只有两种说法能够解释中国游戏行业发展的现状： 
　　第一种说法是大家都在争先恐后地抓紧时间捞一票，最后看看谁能够在彻底搞垮这个市场之前收手走人。为什么搞烂游戏的反而是“好公司”？因为现在好公司的标准是在短时间内不顾后果、不择手段地暴发。什么原创游戏，什么民族工业，扯淡。 
　　第二种说法是很多人每天都在做着“网上迪斯尼”的美梦，至于游戏行业在国外发展得怎么样，在中国的现状又是怎么样，他们非但一无所知而且还根本没有去看。有的人瞄了两眼，说：是啊，这些东西挺好的，但是在中国行不通。我真没发现这些东西有什么行不通的，前提是足够便宜——例如跟CS似的，只卖三十八块钱（嗯，我承认这是天方夜谈）。所谓的行不通还有一种可能，就是借助中国固有的排外观念和政府保护加以抵制——我们的东西不好没关系，把门一关,不准洋货进来,我大清的煤油灯再不亮,我也不用你的电灯，甚至凡是比煤油灯亮的都不许点,反对的就是汉奸。只可惜现在说这个已经太晚了，任天堂投下了神游机，SONY将引进了PS2，眼下一个已经汉化的《命运传说2》也能把中国所有的RPG打得人仰马翻（BTW：然而很多中国人还以为自己很懂RPG！）。 
　　与国外一流游戏厂商的较量已经迫在眉睫，人家骑在你头上只是早晚的事情，但国内的游戏制作仍然活在“你再强也奈我不何”的鸵鸟政策之下。网游的兴起让许多人开始关注游戏行业，也催生了不少张口就是运营，闭口就是资本操作的“专家”，他们胸有成竹地对一个他么完全不了解的行业指指点点。而我看到的，只是几个暴发户在前面领跑，后面一大群人陆续跟上。日本人中村彰宪曾指出中国游戏行业是“完全的资本主义”，参照现在的现状，我们不难理解他在说什么：从单机时代到网游时代，上到业界红人下至网吧老板，绝大部分投身游戏行业的中国人一直把游戏行业视作是一个纯粹的投机项目，倒是极少见有谁把它当作一个既有现在亦有将来的产业来对待。人人都奉行机会主义而妄顾行业的生死存亡，这正是电子游戏登陆中国以来所以出现这么多莫名其妙的争端，引发诸多社会问题，行业成长如此缓慢的根本原因 
3、成本问题 
　　中国游戏行业所以成这样子，跟盗版的泛滥也不无关系。面对中国市场，所有的世界一流厂商都只是在谨慎的投石问路，其中最大的原因就是恐惧盗版。像FC，在中国从来没有过行货主机和行货软件，但其兼容机销售是上亿台，盗版卡带销售更是不计其数，这样的市场谁能不怕？所以说，是盗版——不如说，是中国人的消费观念问题过早的把这个行业逼上了绝路。绝大多数的中国玩家认为买盗版是理所当然的，因为正版贵，他们买不起——尽管在中国发售的正版游戏都不过是在几十块钱上下，他们仍然宁愿买盗版。同样是这些人，他们可以一年换几个手机，可以花几百块钱去看演唱会，但偏偏就在游戏问题上，他们说他们消费不起。他们就是觉得买不起正版游戏所以用盗版是理所当然的，因为他们要玩——这听上去像是农民因为没饭吃所以要造反。用Adobe的CEO皮卓丁的话来说，有的人就是以为Photoshop就值几块钱，你有什么办法？ 
　　但玩家就是这样认为的，他们一边买着盗版，一边整天嚷着正版软件定价不合理，非要到每个游戏才几十块钱的时候才能接受。可是等游戏卖到几十块钱的时候这又是怎样一种景况？Warcraft 3卖几十块钱，这合理吗？像那种规模的游戏，几十块钱里面仅仅包含了中国代理上贡给暴雪的一点版费，这点版费跟研发费用想比只能是九牛一毛。换句话说，那些定价让中国人觉得负担得起的正版外国游戏在中国几乎是以倾销的形式推出：Warcraft 3卖几十块钱，FIFA2004卖几十块钱，CS卖几十块钱，文明3也是卖几十块钱，但中国人即使有能力做这样的游戏，制作成本加推广成本还不止这几十块钱。到了中国人真的做出些卖几十块钱的游戏，又怎么可能跟“几十块钱游戏”相提并论？就目前来看，除了韩国网游以外的外国游戏根本就没办法在中国市场收回成本，所以在中国卖几十块钱的收益不过够他们报销茶水费。所以，外国厂商在正版定价问题上照顾了没有尊严的中国玩家，但与此同时也有意无意地压缩了中国游戏行业的原创空间——技术含量低，游戏理念落后的中国游戏只能靠在中国卖几十块钱获利，但是EA等厂商的游戏有在外国卖几百块钱的获利作后盾。事实就是，中国游戏生下来便要和这种“几十块钱游戏”在中国市场上同台竞争。 
　　然而，我们经常说的单机游戏跟唱片、电影一样是靠卖拷贝赚钱的，它的制作成本绝大部分属于可摊成本，通俗的说就是拷贝数卖得越多每张拷贝数的成本就越低，钱就赚得越多。但是不说不知道，其实整个中国大陆地区的单机游戏消费能力，乐观估计也就是跟台湾一个省持平，兴许还要低一些。游戏的销售成本也是个问题。如果考虑到中国物流系统效率较低，中国地域跨度广造成的软件销售覆盖面广，覆盖到某些地区的边际成本高，这个市场就更为有限了。盗版猖獗更使得某些地区常产生盗版比正版先到，盗版到了正版没到的现象。所以，新游戏卖个几十万就已经算是商业奇迹，在这种环境下谁都知道老老实实做游戏赚钱是行不通的，结果就是大家一轮哄抢，从血狮到仙剑2，最后只剩下如今的一潭死水。 
　　分析一下单机游戏在中国的失败，我们就不难理解网络游戏今日的风行：1.网络游戏的销售对中国现有的物流系统依赖较少，点卡销售可轻易普及到便利店，网上销售点卡和网吧销售点卡也极大的提高了资金回收效率，同时避免了盗版问题。2.网络游戏依存的平台发展赶上中国发展互联网的顺风车，宽带上网的普及、网吧雨后春笋般地出现极大方便了服务器端的架设和推动了客户端的普及。虽然网络游戏制作成本并不比单机游戏要低，而且它还多出了架设服务器的成本和养活一大堆维护人员和客服人员所产生的成本，但是上述的便利使得网络游戏发展每个客户的边际成本很低并且忽略了地域跨度——相比起在制作成本这简直可以忽略不计。 
　　中国人还太穷了，所以在市场上我们常见到层出不穷的价格战，成本问题几乎决定了一切。就我数年的观察，中国游戏行业确实有一些决心要为梦想，要为这个行业努力的热血青年，他们总想以牺牲自己的方式来跨越成本问题。但问题是一个行业不可能只由热血青年来支撑，再说热血青年自己也没有喝风屙烟的本领——资本家可不会跟着你一起跳河。资本家只会考虑两点：假定你所要做的游戏真的是好游戏，首先你能不能真的做出来？等你做出来了，它能不能带来相当的利润？我要为之冒多大的风险？不得不承认，当前的中国资本家果真解决了成本问题，并且给了热血青年一个响亮的耳光，“《传奇》是个烂游戏，但盛大是个好公司。”。 
　　人家说中国游戏行业是“完全的资本主义”大抵是没有错的，资本的力量在游戏行业里面膨胀得太厉害，起了的作用太过大了，制作力量完全望其项背。整个中国社会听到的那些来自游戏行业的声音，关于游戏行业利好的消息事实上都是资本家的声音，游戏制作者或因为专业水准低下、或因为在行业地位低下完全被冷落在一旁。说句粗俗的话，现在唐骏这个游戏行业新兵便是放个屁都比游戏制作人说话响亮，这正常么？这跟游戏名制作人一呼百应的日本恰好完全相反那，比尔盖茨在日本首发XBOX发售的时候就没敢声称自己“了解电子游戏”。你以为人家是傻子吗？人家就知道，解决了成本问题不等于解决了一切问题。 
　　4、平台玩人人 
　　国家标准化管理委员会今年曾委托某大学做了一份关于游戏产业的调研报告，报告中提到不支持PS2之类的主机进入中国的若干理由，其中有两点：1、这类主机的硬件体系是封闭的、专用的、非通用的；2、这类主机的软件体系是封闭的，采用了非市场化的授权体系。 
　　看到这段文字的同时，我还看到一位业界研究专家模样的人落了这样的旁注： 
　　“绝大多数电视游戏玩家可能都无法接受这两点理由，的确，厂商有权保护自己的知识产权，有权利用自己的知识产权去牟取利益，即使这种利益是建立在垄断的基础上。但我还是要举双手赞同该报告的结论，在对待高技术产业上，政府最应该关心的是能否形成自己的知识产权开发功能，能否通过自身的创新能力，形成产业化规模。” 
　　假如除了电脑以外的游戏平台仅仅是能玩游戏的简化版电脑，我也举双手赞成以上的说法，但问题是游戏机远远不是“简化版电脑”那么简单。对于一个能够被称之为“产业”的游戏行业来说，作为游戏主机的PS、XBOX等不过是实体化的前端硬件（家用机的英文“Console”的原意），而同样名为PS、XBOX的游戏平台（Platform）的含义则超出“游戏主机”一词所包括的内容。 
　　从街机时代开始，日本的游戏硬件制作已经有了20多年的积累，不但拥有大量专利还拥有大批人才：从如何应用电子技术制作越来越小巧、性能越来越强的家用机，到如何利用机械技术打造各种巨型的体感游戏机台；在整体方面思考怎么样的家用机手柄才能满足现在的各种游戏、未来的各种游戏需要的，在细微之处考虑一台街机应该用多厚的木板，应该剪裁为何种形状才能在节省材料和美化外形之间找到平衡。中国勉强算得上有游戏软件研发，但中国人对游戏硬件研发则几近一无所知。纯粹对应软件的游戏研发尚停留在程序开发层面，很多制作人甚至连鼠标＋键盘的操作方式都没吃得透，这就是不重视游戏硬件的恶果。“一个软件开发人员的成熟期大概需要3年，但是一个硬件开发人员则需要花上大约5～6年的时间来熟悉那些调试错误和积累开发经验。”SEGA AM2的铃木久司社长如是说。用这个标准来衡量，日本已经有了好几代这方面的人才，而中国在这方面的数字约等于零。 
　　在游戏机通过非正式渠道进入中国以来，中国社会对游戏硬件不但没有投入应有关注，还肆意把许多社会问题推到某些游戏硬件上面来（例如街机、家用游戏机）：曾经有一段时间，同样是学生玩游戏，在电脑上玩不算是什么坏事，但放到了游戏机上似乎就是十恶不赦的罪过；街机曾经被人人喊打。政府迫于公众压力，曾在2000年6月授权文化部等7部委执行的《关于电子游戏场所管理的通知》，在这份通知的第四部分内容明确规定，除了来料加工以供出口的游戏机生产外，凡是面向国内的游戏机零配件的生产经营销售和进口活动一律停止。具有讽刺意味的是，等到DDR在中国变成流行的时候，有记者就说：“这么简单的东西，为什么中国人就想不出来？”他怎么不想想，难道有识之士会投身到一个被渲染成像造假药、酿假酒那样害人不浅的行业来吗？曾几何时我们有过仿冒8位游戏机、16位游戏机的历史。姑且不论其合法性，那段历史至少还证明当时我们在某方面的硬件制造技术跟外国不是相差很远。但从32位机开始，中国玩家只能享受从非法渠道过来的“原装进口”外国主机，国内的仿冒生产仅限于手柄、光枪、电源等科技含量较低外设（研发能力还是没有的）。 
　　在游戏平台的构成里面，硬件制造处于最底层，硬件授权体系和软件发行体系作在其之上。诚如前文的那些专家所言，游戏平台的硬件体系和软件体系都是封闭的，但是他们没有去看到封闭意味着什么。封闭的硬件体系首先改善了游戏运行环境，像游戏机，至少玩家不必担心它的操作系统稳定性以及硬件兼容性，制作者也无需为硬件的频繁变动而增加DEBUG流程。更重要的是，硬件授权体系的封闭才能够像任天堂似的应用诸如mini-DVD这样的非主流数据储存载体，从根本上杜绝盗版的存在。据最新消息称，连微软也正在寻求一种管理下一代Xbox游戏机光盘设计和开发的工程师。对于这个工作职位的说明进一步提到，在新的游戏磁盘规格的关键因素列表中，反盗版是排在第一位的。不错，在完全开放的PC平台上做游戏无疑是很轻松的，但轻松的代价就是从开始就要与盗版作战。中国人在这方面积累了很多“宝贵经验”：把一张光盘的数据用非压缩格式做成两张甚至三张；使用对盘片和光驱要求甚高的加密格式。不得不说，这些努力很大程度上是瞎忙：盗版者“帮”制作人压缩数据放在一张盗版光盘上；加密格式也只能“争取几个星期的发行时间”。至于盗版的危害，恐怕就无需我多言了——本都保不住，怎么原创？ 
　　很少人意识到我们在游戏硬件上的距离跟外国越拉越远，也只有更少的人意识到发展游戏硬件制造和硬件体系的必要。网络游戏夺去了所有人的眼球，连一些政府官员也不例外。在不久前的第二届中国互联网大会上，文化部市场司庹祖海副司长也着重强调，最近有一些游戏机想进入国内市场，而国家2000年的“通知”并未变更，在规定变更前相关部门会继续按照这个政策执行，这些游戏机存在合法性问题。庹祖海副司长还谈到，就整个游戏产业来讲，国家认为应该发展。但是游戏产业分很多种产品，发展的先后主次，都需要研究。他表示，是否发展其他游戏产业，文化部和有关部委将进行调研，待国家批准后进行。观察一下现在舆论的导向，我们不难推测出副司长说这番话的原因：网络游戏绕开了盗版问题，而且中国人有能力做网络游戏（且不说中国人还有能力让次品赚钱），所以为它就是当今中国游戏行业的救命稻草，像PS2等游戏硬件则可以推迟发展。对于大部分人来说，这已经是一个很完美的答案，但在我看来它还不够完美。尽管现在许多调查机构出台了各种各样的数据，政府也出台了各种各样的政策，表面上看它们预示着前途一切光明，但却从来没有人针对“网络作为游戏平台的前景”做一个贯穿游戏软件、游戏硬件的发展历史、发展现状的技术分析，然而这恰是不可缺少的一环——日本游戏行业每年都会就游戏的技术发展开会，不开会的时候也有不少像山内溥、岩田聪这样的行业大腕就游戏技术发展说很多危言耸听的话。笔者自知学识浅薄，却也要开一个先例，在这里也要试一下做这样的技术分析： 
　　Namco的岩谷徹（闻名于世的Pac-Man创造者）在接受记者采访时曾说，现在看来网络只是游戏的扩展手段，还不能说网络时代已经到来了。这话八九不离十地道出网络游戏的现状：网络作为游戏平台至今无法脱离其他平台的影响，而且网络游戏在很大程度上是PC游戏应用网络技术之后的成果。我们以公认为网络游戏里程碑的《网络创世纪》（大家所熟知的UO）为例，最原始的《创世纪》是一个文字游戏，连图像都是用文字“拼”出来的，而它若干后续作不断的引进了不同的图像技术之后，变成现在玩家广泛接触到的《创世纪》系列，应用网络技术的《创世纪》就是《网络创世纪》。我相信有些人会对这个说法有异议。的确，作为网络游戏里程碑的《网络创世纪》在游戏系统上奠定了网络游戏的虚拟社会组织、虚拟经济体系，但是在直接面向玩家的部分，例如界面、基本操作、人物设定和世界观等等却是《创世纪》系列的延续。用非专业的方式来看待这个问题，则可以这样表达：如果说《网络创世纪》是MMO RPG（即大型多人在线角色扮演游戏），作为RPG（Role-Playing Game）的《创世纪》就是《网络创世纪》的游戏原型，MMO（Massively Multiplayer Online）则是这个原型的网络扩展形态。纵观现在所有的网络游戏，我们可无一例外地用类似的方法找到它的原型，而且这个原型不是在网络游戏平台上原创出来的。然而，发展多年的欧美和日本游戏行业拥有不同的发展方向，在不同的发展方向影响下拥有各自不同的游戏原型，这些可以说是它们各自的积累，不但有知识经验的积累还有人才的积累。中国游戏行业在单机时代是抄，在网游时代也是抄，并没有自己的游戏原型，更没有什么积累。游戏原型不可能在一种“好公司做烂游戏”的业界氛围中诞生，实际上也不可能在网络游戏开发中诞生——网络游戏更多的制作投入是在前面所说的“MMO”，即多人在线环境的扩展形态部分，在游戏原型方面能够有相当程度的引入已经不错了，游戏原型的原创是一个网络游戏项目在人力和物力上所不能承受的。 
　　必须承认，现在我们看到的游戏原型引入还很有限，也就固定在RPG等几种，这是因为现有的网络无法提供很多游戏原型引入所需要的带宽和反应速度。随着网络技术的发展，游戏原型的引入将在未来为网络游戏发展的一条必经之路。在这条必经之路上，无论是欧美还是日本都有它们的筹码，因为他们有在非网络游戏平台上发展下来的游戏原型基础，而中国本来在游戏原型方面就是纯粹靠照抄，如果现在就放弃发展一切非网络游戏平台（也就是等于放弃非网络游戏平台游戏），到时候将败得不可翻身。除了RPG等少数游戏原型就不能做（应该说是不能模仿、照抄）的中国游戏制作者看到《铁骑大战》这样引入了顶尖3D技术，最前卫的游戏原型以及最过硬的游戏硬件制造技术的网络游戏之后，试问又有谁能不绝望？ 
　　以上仅仅谈及游戏平台的软件发展，要是从游戏硬件的发展来讲，网络游戏平台更不是可供整个游戏行业立足的地方。街机平台的硬件核心在于大型框架机体，家用机平台的硬件核心在于游戏主机，而网络游戏平台的硬件核心在于互联网。然而，大型框架机体和游戏主机的主要功能是玩游戏，因此它的设计、制造或者售卖很大程度上在游戏行业自身操控之下。相反，互联网不是娱乐专用设备，它属于一个国家或地区的基础设施，游戏行业完全不能干预它的运作。这会引发两个严重的问题： 
　　A. 互联网的稳定性与网络游戏平台运转直接挂钩，平台运行风险大增。 
　　非网络游戏平台只受电力供应影响，而且即使电力供应出问题也不至于酿成严重后果。网络游戏平台在依赖电力供应的同时，更依赖互联网的稳定。一旦互联网的运作出现重大问题（病毒泛滥、设施损坏等等），整个网络游戏平台的状况就会变得极坏。这种情景在中国已经出现过了。 
　　B. 因为完全在其控制范围之外，游戏业界无法控制网络游戏平台的发展。 
　　无论是“MGS改变世界”，还是“N64将改变游戏”，证明的都是同一条道理：游戏研发不可能脱离硬件支持或者软件开发而存在，硬件技术支持和软件开发技术必须同步发展。历史上。在家用机发展发展史上，我们可看到某项重要机能的缺失会导致整个主机缺乏软件支持（想想SS和PS之争）；又或是尽管有比对手优秀的机能，但是不符合实际应用的高性能带来的高成本妨碍主机普及，进一步妨碍第三方厂商支持，导致高性能主机成为高性能废铁。各种封闭的硬件体系引发开放的竞争，进而互相淘汰，这样才有了游戏业界自身引发的一轮轮技术革命和游戏理念革命，游戏平台才得以如此迅速的发展。这种竞争的背后肯定涉及厂商的利益，但最终受惠的将是消费者。 
　　反观被视为将是中国游戏行业主流平台的PC和手机，这些平台实际上是计算机、计算机网络的延续，游戏行业不但无法掌握它的发展脉络，更无法影响其发展。如果说真正的游戏产业是“人人玩平台”，游戏厂商有机会建立属于自己的封闭体系互相竞争，那么依赖游戏行业无法改变的游戏平台最终导致游戏行业成为其他行业的附庸，属于“平台玩人人”。我们可以用更实际的例子说明这个问题：为了让赛车游戏有进一步的发展，在街机上我们可以用全新的理念为赛车游戏做一个专门的框架，但PC平台就做不到——PC游戏平台的标配外设就是键盘鼠标，如果你还想你的游戏要有销路，你就不能要求每个人为了你的游戏买特殊外设。一个 “人人玩平台”的游戏行业能够主宰自己的发展，主机性能不满足新游戏的发展可以淘汰一代主机，机能过剩可以通过价格竞争予以削平避免引起机能滥用。游戏制作人亦可随时考虑加入新的外设实现新的设计，即使是GBA这样的掌机，也可以用如《我的太阳》（KONAMI）似的加入太阳感应器实现新的设计。我们更可以看到，那些所谓封闭式游戏平台的更新换代已经开始威胁电脑作为网络游戏终端的存在，支持WI－FI的NDS和PSP就要摆上货价了。但是游戏行业可以为了原创淘汰一代电子计算机，淘汰一代互联网技术吗？显然是不可能的。 
　　比起其他的平台， PC、手机都不是稳固的游戏平台，更不是最佳游戏平台。现在它们之所以变成了中国的主流游戏平台，其实与中国的现状有关。近日NVIDIA的CEO王仁勋在中国媒体的采访中发表了这样的见解：“在中国，由于居住空间有限，PC经常被用来玩游戏、看电视或是DVD。在美国，PC就是PC，游戏机就是游戏机。两个地方的文化背景差异很大，这也导致了消费者对产品的诉求存在差异。”我完全赞同以上的观察，不过我还要补充一点就是，除了消费能力、生活空间、文化差异方面，它跟当前整个中国社会状息息相关。中国开放得非常快，人们很快就用上了用各种各样的新产品，但他们的意识特别是消费观念完全没跟上，价值取向稀奇古怪——如果是算起经济帐来，同样是玩盗版，买1000多块钱的PS2无疑比买同样是1000多块钱的电脑显卡划算，但就是很多人没法接受用1000多块钱买一个提供单纯娱乐功能的游戏机，他们就是宁愿买同样价值的显卡凑合那些日益粗制滥造的PC游戏。同样荒谬的事情还发生在移动电话领域，不过我也不必多言，毕竟不比别人富的中国人三天两头换一个手机已经不是什么新鲜事了。现在的中国社会还是一个高效率的趋同放大器（不过也不止是中国），从文凭到手机，人们热衷于追求那些“你有我也有”的东西，这些东西本身价值几何倒是其次。所以，依靠那些高品质游戏、那些外国人所说的“Must Have”Software去推游戏平台根本是不可行的，即使是Mario、Zelda这些瞬间能带动几十万平台销量的游戏也不例外。更何况一个游戏折合人民币几百块钱在中国人眼里就是天文数字，同样一个月花销几百、一千多块钱玩网络游戏他们却觉得毫不稀奇。 
　　长期从事PC和网络游戏研发的中国人既不懂游戏平台的发展，也不懂站在游戏平台之上的游戏行业运作。“平台玩人人”的游戏行业注定被其他行业决定的“流行配置”、“网络环境”牵着鼻子走，在这些“不得不考虑的问题”面前中国人有再好的原创游戏理念也只能无条件屈从。这样下去电子游戏根本无法在中国发展为产业。中国人要在世界游戏行业扎根就必须要有自己的东西，但游戏平台是原创的立足点——如果连立足点都不是自己可以影响的，那么这个丝毫不能主宰自己命运的行业还谈什么原创？还谈什么“自身的创新能力，形成产业化规模”？中国政府正在与其他国家一同推动全球化进程，这是非常明智的，但一些民间人士看待行业（不止游戏行业）成长的时候往往就不那么明智了：我中华大国就是什么都要有，比你好的要有，不比你的好我也要有——不比你好我也一定要用自己的，没有电灯我点蜡烛，反对的就是汉奸。狭隘的民族主义情绪早就让这些人失去了分析问题的能力，他们就是坚持中国就是什么都要有，也不管这些东西以后中国人实际上有没有得到好处。我在这里提醒他们一下：须知游戏行业在中国的行业结构上处于边缘地位，这点它远不如汽车工业。汽车工业都可以开放到现在这种地步，游戏行业为什么不可以？退一步说，中国人没有自己掌控之下的游戏平台也不是什么有损国体的事。欧洲人也没有自己制定的游戏平台，就没听说过谁出来大喊大叫说，欧洲没有自己的游戏平台，欧盟就要不行了。鄙人极爱游戏，也极希望看到中国游戏行业真正兴旺起来，但我还是要说，既然承认了游戏行业是娱乐行业，就得同时承认游戏这东西不能当饭吃，在中国人的生活质量还远比不上欧洲人的情况下，真有余力就应该投入到其他能改善国计民生的行业去。而且，一个娱乐行业的发展要在中国生根发芽，第一步就是要打造一个形成良性循环的生存环境。像现在似的，沸沸扬扬地搞出一大堆靠低质游戏，对这个行业根本有百害而无一利。中国人在游戏行业里面还是个小学生，现在搞出这么个所谓的游戏产业其实大半是泡沫，小半是从别人那抄过来的“非自主知识产权”——“有自主知识产权的游戏产业”这玩意儿在中国就从来没有存在过——没有游戏硬件制造专利、没有出过世界级里程碑式游戏、到现在还有不少人把游戏机视作洪水猛兽的国家又有什么资格声称自己拥有“有自主知识产权”的“游戏产业”？ 
　　很多人认为，我们现阶段应该保护某些从事开放性平台游戏开发厂商的利益，拒绝其他平台在中国落地生根。但开放性平台的“平台玩人人”性质决定这些厂商无法成为游戏行业的中流砥柱。我们不可能闭门造车自己搞出一个跟得上世界的游戏平台。为了今后游戏行业的发展，就应该让代表当今世界游戏行业发展的游戏平台进入中国市场，培养中国游戏行业成为在世界游戏行业格局中举足轻重的第三方厂商群体，借此参与到世界游戏产业的共同发展，以实力而非地方保护主义取得在世界游戏产业中的话语权。以前关起国门来保护的还有汽车行业，结果呢？中国人因此得到什么好处了吗？把全部精力放在所谓大有前途的网络游戏平台或者其他开放性平台实际上是一次没有胜算的豪赌，它葬送的将是中国游戏行业的全部未来 
5、行业自律 
　　如果说封闭的硬件授权体系仅仅是为游戏质量和厂商的盈利提供了保障，封闭的软件授权体系则属于行业自律，它是直接影响到市场活跃程度的根本。前面提到的ATARI Shock几乎摧毁了美国游戏行业，表面上看是因为低质量软件的泛滥，但如果从经营的角度去看，不难发现ATARI作为第三方软件授权模式的开创者并没有运用这种模式保证发行软件的质量和档期，从而直接引发ATARI Shock这样的恶果。其后，任天堂实行了“任天堂官方质量封条”（Official Nintendo Seal of Quality）政策：在收取授权费（权利金）的同时，对所有的授权软件实行品质上的、数量上的严格监控，所有的游戏发行档期由任天堂一手安排。如此一来，内容、形式雷同的游戏可以通过档期安排错开发行避免互相影响，质量低劣的垃圾游戏则一定无法通过审查。“任天堂官方质量封条”代表着在ATARI和开放平台上游戏制作和发行方被忽略的，游戏行业应有的自律。事实证明采用这样的授权体系是一个相当英明的决定：任天堂因此站稳了脚跟，开始了长达10年的任天堂时代。不论是在游戏行业的次时代争霸，还是现在的三国鼎立时代，各硬件厂商一直沿用着这种软件授权体系，曾击败任天堂的SCE也只是将其软件授权政策制定得略为松绑而已。 
　　封闭不等于是非市场化的，由ATARI时代冒出水面、SCE用以打败任天堂的第三方模式就是软件开发授权市场化的最佳证据。在NGC、PS2、XBOX三国鼎立的今天，争取第三方厂商支持早已成为除了主机普及率以外最重要的事情，过去任天堂靠第一方软件和第二方模式打天下的日子已经不再了：任天堂曾经凭借自社开发的《Zelda64》把N64的销量从每周3000台以下的冰点急速跃升到15万台以上，但最后仍旧因为缺乏第三方支持而无法突破PS的第三方软件潮水式防御。事后任天堂名制作人宫本茂（Mario、Zelda之父）惋惜地说：“如果那时我们能得到哪怕一点点协助，可能未来的局势就会完全不同。”同年，ENIX宣布加盟PS并为其推出《DQVII》（勇者斗恶龙7）的时候，SCE副社长德中晖久激动地喃喃说道：“有了《DQ》的保障，我们的事业有如头上的青天那样安如磐石。” “磐石”指的是什么？就是作为第三方厂商游戏的《DQ》这个日本国民游戏对于PS2而言的市场价值。第三方厂商的支持已经成为一个游戏主机生存状况的决定性因素，各硬件厂商为了争取第三方的支持在软件授权和主机设计上拼个你死我活，为此竞相开出比对方更加优惠的授权条件，例如授权金的优惠，技术支持，黄金发售档期——还有什么授权体系比这更市场化的？“这种利益是建立在垄断的基础上”云云更是睁眼说瞎话。把PS2的影响力说得再夸张都好，NGC、XBOX还是它当前实实在在的竞争者。跟操作系统领域的微软、芯片制造领域的Intel相比，游戏行业的SONY不过算是一马当先。 
　　回过头来看看那些根本没有软件授权体系的平台又怎么样呢？回忆一下近年来世界范围内出现的FPS浪潮、RTS浪潮，国内的中文RPG浪潮吧，不管是国外还是国内，正因为PC平台、网络游戏平台完全没有软件授权体系约束游戏软件的制作发行，所以每当这些平台上有一个类型的经典只作问世，不久之后无数同类型游戏将同时出现。游戏公司把制作那些看上去一摸一样的游戏当作票房保证，并且有意通过各种手段（包括媒体宣传，各种的所谓世界级大赛）引导消费者来保证这种票房，游戏厂商则在这几种类型上重复劳动，坐享其成。在这种重复劳动的竞争里面，创造力得不到分数，获胜的总是获投资更多者，结果就是大者恒大，坐大者靠继续做同一类型游戏来吸引投资，继续坐大。ID Software就是典型例子：这家公司堪称FPS的创始者，但是他们一直以来只做FPS——不但如此，这些年他们每次拿出的新作品的时候从来不宣传新游戏加入了什么设计让游戏更加有趣，而是宣传这个游戏加进了这个特效还是那个特效，让你的显卡大显神威。可是，近年来最火红的FPS就不是Quake3，而是由游戏爱好者做的，采用的不过是Half Life引擎（技术水平介于Quake2和Quake3）的——不用我说，大家都知道这东西就是CS（Counter Strike）。造就CS成功的其中一个重要因素正是CS在同类型游戏的游戏模式上有着了不起的创新（著名的“反恐行动”），ID Software这样可谓财大气粗的公司反而在这方面原地踏步。毫无节制的重复投资把PC游戏制作拖进了死循环，不少当初锐意创新的开拓者在如此资本冲击之下成为年复一年，日复一日制作雷同游戏的赚钱机器。不少好的游戏原案被称为是“冒太大风险”予以否决，像《大刀》这样虚有其表的项目反而能骗来大笔投资，PC游戏制作被这样拖入了死气沉沉的境地：暴雪的Diablo主要制作人员出走，牛蛙、Westwood、黑岛等著名小组纷纷解散，CS的出现也不过是拜游戏爱好者所赐。这就解释了为什么我们看到的大多数PC游戏比起家用机游戏不但缺乏新意而且品质低劣——即使是同类型游戏的面对面较量，在PC平台上热卖的FIFA、NFS之流也不能与家用机上的WE（实况足球/胜利十一人）、GT（现在的官方中文翻译是《跑车浪漫旅》）相提并论，所以前者的市场停滞不前，后者的市场却在扩大。 
　　中国游戏从业人员还不懂得什么是行业自律，他们借助开放游戏平台的开放性低价引进外国游戏冲击本国市场，生产低质量游戏搞恶性竞争，任由各方胡乱炒作制造更多的泡沫。这些人还普遍把行业发展寄托于国家对网络游戏平台这样的开放性平台的支持，其中一点就是提议国家牵头搞类似韩国那样的软件通用引擎模式。引用一些媒体的话就是：韩国游戏过去买不起游戏引擎，就由韩国政府出资，韩国科技振兴院出面负责购买国外的优秀的引擎，然后再把这些游戏引擎改良制作成可通用化的程序，再以相对低廉的价格卖给制作小组，名曰“支持韩国游戏行业发展”。前阵子报道说，国家真的就为此时搞了一个“863计划”。国家支持游戏行业发展我们当然欢迎，可这种做法实际上就是搞所谓的“非市场化的授权体系”，而且此类授权的作用就是用行政手段把游戏制作的门槛放得更低。问题是，低级产品的大量出现会在市场和投资方两头堵塞原创空间，再说中国游戏行业现在根本不缺低级产品，更用不着再引入更多的人造出更多低级产品。有人说这是学韩国，但其实韩国游戏即使比中国强，它的发展方向已经注定了只有本国市场、中国市场和东南亚市场能够消化它的产品，而且它的热销很大程度上是因为其他非开放游戏平台在这些国家发展程度低（例如一度视游戏机为洪水猛兽的中国）。在高品质的日本、欧美游戏面前，韩国游戏根本无竞争力可言。韩国人自己的本土市场没等行业发展起来就已经饱和了，于是他们只能在中国和背水一战，学他们肯定是死路一条。 
　　封闭的授权体系背后实际上是行业的高度自律。在过去它重新激活了美国市场，保证了电子游戏行业的健康发展。有了它的间接支持，CERO（日本的“电脑娱乐评级机构”）、ESRP（美国的“娱乐软件评级部”）才得以顺利运行，在行业内部解决了“游戏软件分级”这种让政府觉得左右为难的问题。在中国网游发展得轰轰烈烈的今天，业内抄袭、投机风潮正盛，以往由其他游戏平台间接造成的社会问题显然已经通通转嫁给了网络游戏平台。冒昧问一句，现在又有哪位中国游戏界名人能够少说几句“投资运营”，提及一下关乎业界未来存亡的“行业自律”？很可惜，如今在游戏圈内游弋的资本家们并不会在乎这些，他们还沉浸在“游戏行业能赚钱”的欢乐之中。 

　　6、游戏行业是娱乐行业 
　　网络游戏赚钱了——区别于以前的街机房和盗版水货游戏机制造贩卖，这次是很体面地以“互联网增值服务”之名赚钱了。所以，中国大部分人开始认同游戏行业是娱乐行业，认为应该给予其发展的空间。但大家别忘了，娱乐行业其实也分三六九等，像歌剧、相声、小品，地位就是比摇滚、蹦D高得多。游戏无疑属于下等娱乐：街机房、网吧向来是重点稽查对象之一，理由是三教九流混迹常混迹于此；游戏是廉价的，应该说，要是你敢不廉价我就去买盗版；游戏还是值得被怀疑的，它曾经是电子海洛因——现在虽然“不是了”，但家长们仍然有足够的理由认为它有损未成年人的身心健康；玩家群体是弱势的，主流媒体上玩家群体总是集体失语，由得那些不玩游戏的人爱怎么说就怎么说——按他们的说法，凡是做游戏的都应该以“制造、贩卖海洛因”论处。有人说，网络游戏的时代来了，我们终于正名了，行业终于有发展的希望了。我想，事情没那么简单。 
　　任天堂社长岩田聪在今年的东京游戏展强调：“所有的娱乐都在争夺用户有限的时间，并为此展开了激烈的竞争。”此言道出了日本游戏软件市场自1997年达到颠峰之后不断萎缩的重要原因之一：近年移动电话的普及以及移动电话性能的大幅度提升造就了新的游戏平台（最新的DoCoMo手机已经可以运行Final Fantasy、Dragon Quest 复刻版）和新的娱乐咨询平台，这使得个人可支配资金减少，且人们的部分注意力不免会从游戏机转移至移动电话。与此同时，宽带网络在日本国内的逐渐普及催生了许多免费小游戏网站（以Flash游戏为主），这样的游戏方式便利而且不花钱，也无疑会对现有的游戏软件市场产生影响。参考这样的情况仔细想想，难道网络游戏真的能幸免于盗版的影响吗？真的可以因为幸免于盗版而幸免于其他平台的冲击吗？ 
　　中国经济在增长，借助游戏媒体的发展和互联网的普及，人们的眼界也日渐开阔，现在玩游戏机的人已经比起FC时代是有过之而无不及。假设我们为封闭体系的游戏平台进入中国设置障碍，那些循非正式渠道流入中国的游戏主机势必持续扩散，而这些主机的软件主要来源就是几块钱一张的盗版。在这种模式下，玩游戏只需要游戏主机这个一次性投资，软件几乎是不花钱的。也就是说，中国游戏行业乃至各行各业在这个过程中非但没有占到任何的便宜，反而会被影响力日益扩大的家用机游戏占去用户娱乐时间——也就是中国游戏行业的生存空间。这种情况会比某些人所说的“中国拥有自主知识产权的游戏产业将受到抑制，导致中国信息产业遭受重创”更坏，因为你的对手根本就不是对手本人，而是对手的一个极廉价倾销版本，所有的行业保护手段都将不适用，这意味着你不会有任何与对手讨价还价的机会。介时你有多少本土优势，多少宣传优势也是白搭，因为通过中国的一个极为严重的漏洞——盗版搞出来的东西有两个无法超越的优势：第一是价格，即使是每小时几毛钱的网游，也不可能跟5块钱玩几个星期、一个月的游戏抗衡；第二是软件品质的差距，这种差距在前文已经说到过——完全是石器时代和后工业时代的差距。要彻底解决这个问题的办法就是灭绝中国的一切盗版，但这在很长时间内都是不可能的——且不讨论灭绝盗版的可行性，就以中国现在的状况，灭绝盗版绝对会影响计算机的普及。当然，还有一种办法就是政府立法彻底禁止中国人谈论游戏主机，不过我想这会是社会大退步。 
　　我曾经有一个理想，虽然说现在我已经放弃它了，但是我还是想带着几分羞耻把它说出来：我要用自己的努力和天赋为中国电子游戏行业打造一个稳固的根基，因为电子游戏是娱乐行业，它在中国不但有过去，现在，还有未来——它是中国从来没有过的新事物，它代表了新世纪的那种崭新的、上进的、充满了交流的娱乐观念，能够让一度闭关自守的中国人通过一个新的途径把自己与世界连接起来。对于我来说这是一个伟大的理想，但在有些人看来，它更像是一个夜总会老板的豪言壮语。在这里，我也不敢坚持我是对的，因为一个自己认为是好的事物竟然在中国屡屡成了什么性交易、杀父弑母的导火索，我也不好意思坚持自己在人格上是不可被怀疑的。但在外国，游戏却没什么不好，围绕它出现的社会问题并不比电影多——我觉得游戏没有错，错的是玩游戏的人和做游戏的人，是他们出了问题。 
7、什么人在做游戏 
　　做游戏的人问题本来就多了，刮了“自主研发风”以后问题就更多了，多得不禁让人倒抽一口凉气——游戏圈内正流行着这么一句话：现在自称能当企划的人能绕地球两圈半。一个知名游戏企业在上海公开招聘的时候只要求应征者写十个游戏名称，但即使如此，上千个前来应征的人也多的是写不完的。其他行业会拿十个书名，十个品牌名来做题目吗？考验难度如此之低，也还是有不少人无法通过。这还仅仅是应征，如果在看这篇文章的诸位曾目睹过现在网络游戏都是由一些怎么样的人，用怎么样的方法来做，你们一定会觉得问题比这严重得多。 
　　在我们的常识里面，开飞机要专业的，要经过训练的；做会计也是要专业的，要拿到证书的。我想说，做游戏也是要专业的，难道不是吗？好比说，你自称比较擅长RPG设计，或者说你想在这方面有所发展，那你对FF（最终幻想系列）要有个基本了解吧，对DQ（勇者斗恶龙系列）要有基本了解吧，对MM（魔法门）系列等世界公认的经典有所了解吧。这种要求在我看来一点都不过分——好比你自称很懂白话文就应该看过《阿Q正传》，自称精通中国文化总要看过四书五经，连这都没看过算什么懂了？但在那段人人踊跃做RPG的时期（现在只有圈内老人还记得了），还有现在MMRPG的自主研发时代，有多少年轻人光玩过一个仙剑奇侠传就燃起胸中无比热情跑进游戏圈来做游戏啊？有多少年轻人光玩过一个传奇就自以为很懂网络游戏跑来做游戏啊？虽然这里缺乏切实的数据，但是我凭我那么多年的观察可以判断，在这两个自主研发沸沸扬扬的年代，圈内一线制作的搞游戏设计、游戏策划的人里面大部分都是这种货色，而且一代不如一代。 
　　自中国人开始做游戏起，年年都有人问“中国游戏怎么了”、“中国游戏路在何方”，同时年年都有尚不知游戏为何物、对游戏行业缺乏基本了解的人挤进游戏圈来。现在不要求你已经懂得了游戏是什么，但如果说连个约莫认识都没有是说不过去的。其实无知并不重要，重要的是要承认自己无知。但现在有谁承认自己无知了？有谁认真去学习了？别的我不敢说，就整个圈子搞设计策划的这批人来说，大部分都以为自己懂得的已经够够了，甚至可以开班收徒弟了。其实在日本同行面前，大家都是小学生，顶多就是一年级跟二年级的区别。现在圈内的资本家、领导者所以表现得如此无知，搞设计搞策划的这些人也有责任：无知而且自满，告诉人家自己什么都能做，其实除了抄袭就什么都不能做，甚至连抄都抄不过来。等资本家知道自己当了冤大头，项目多半已经完蛋了，这种事情在业内难道还少吗？日本游戏行业也不见得公司领导层里都是游戏方面的行家，人家所以还能搞得蒸蒸日上，因为底下搞制作的这些人很有专业水平，很靠得住。现在做游戏的人所以普遍给人印象是职业水平低下的、靠不住的，说到底是因为这帮人里面混杂了许多外行，他们根本是来混饭的。 
　　我不是在苛求中国游戏制作者，而是，虽然有些事情你在中国确实做不到，要么要做到就要付出极高的代价。其他的还罢，首先要玩懂一些在游戏发展历史上占有重要地位的游戏，对于很多人来说就不是容易的事情：这些游戏通常都没有中文版本，要不就是翻译得极其糟糕（在我看来）。想要真正的玩懂，在玩的过程中领会许多游戏设计技巧，就必须扔开一切可供参考的所谓游戏攻略，实实在在看懂游戏中的每一段对白，老老实实地把游戏玩一遍而不是依据什么指南“过”一遍。这首先需要时间，其次需要至少一门外语的一定的语文水平（这里是指语文水平——也就是说，仅仅有哑巴外语、应试外语的水平是不够的）。更有某些特殊的平台上特殊的游戏让人不得不买正版，就对财力有所要求了。再说，在中国玩游戏还一度跟吸食海洛因是同等性质的，如何能避免家里人要死要活地劝说，还得看个人的造化修为。 
　　坦白的说，我基本具备了上述条件，但正因为我有这样的条件，我才知道要达到这种程度有多不容易。有些事情他们做不到也不怪他们，因为这些事情是根本没办法单靠游戏业内的改变去解决的。 
　　李敖先生曾说，其实没有台湾问题，根本是个美国问题，中国跟美国的问题。我在此也要说，其实没有中国游戏行业发展问题，只有中国教育问题。教育跟游戏制作有关系吗？有的。所谓“幸福源于参差多态”（罗素语），电子游戏的乐趣也是源于参差多态的。如果所有的游戏都是一种思路做出来的，就没有现在的电子游戏行业了。游戏行业还很年轻，不存在这样或者那样的登山宝训或者权威理论，只有着思想与思想之间碰撞产生的火花，巨大的成功与惨痛的失败。即使是游戏行业已经高度发展的日本，游戏制作的职业培训也尚未成熟，特别是很多游戏理念、游戏理论的认同仍然需要靠山内溥、三上真司这样的业界精神领袖来维系。真因为如此，在游戏行业从事一线研发有着许多不确定性，但同时这也是一种没有各种思维上的条条框框限制的工作。经验靠自己积累，现象靠自己观察，问题要自己解决，在游戏行业要做好事情就必须保持良好的理解能力，严谨的分析能力和不拘一格的创造能力。可惜，这些内容并不为中国应试教育所关注。 
　　存在就是合理，应试教育在多少人的非议下还能纹丝不动是有道理的：中国国土面积大，人口众多，地区贫富悬殊，地方对教育的投入也极其悬殊。面对这种情况，教育制度的定制就只能就低不就高，力求用最小的投入产出最多的效果。应试教育就完全符合以上所有条件：它可以高效的，批量的产出人才（典型的填鸭式教育），又可以用比较低的成本检验成果（分数代表一切）。这是一种无差异化的教育，产出的人才会有同样的优势，例如世界一直公认中国学生算术做得好（但大数学家却屈指可数），也会有同样的缺陷，其中一点就是现在人们经常提起的群体性知识缺陷，群体性能力缺陷。例如，老一辈人常说，现在的人语文真是差劲。的确，应试教育能够让几岁的孩子背完唐诗三百首，能够让高考学生大篇大篇的背诵范文，但这显然丝毫不能促进他们对祖国语言有多少了解。原因很简单，因为理解能力的提高不是靠死记硬背别人的解释（包括段落大意、中心思想等等），而是要经过各种关于活学活用的锻炼。的确，我不怀疑他们背的东西都是经典，但是学习经典的最终目的不是要变成重复古人话语的留声机，变成自己思想中的条条框框，而是通过熟悉经典而达到引经据典、为我所用的境界。说到这里，我禁不住要提出一个奇怪的现象：游戏行业本身并没有产生出什么理论权威，没有产生出什么条条框框，但居于世界游戏行业底层的、玩游戏或者做游戏的中国人总是企图为游戏设立什么条条框框。《电子游戏软件》上出现的“天师现象”算是一个典型：对某一种、某一类的游戏总是有着近乎天生的、莫名其妙的仇恨，声称非某某游戏不玩，非某某公司出品不玩等，声称只有某些游戏才是经典，其他游戏一律是不入流的货色。这里姑且不怀疑这些游戏究竟是不是经典——本来玩玩经典游戏不是什么坏事，但某些人玩经典玩中毒了，他就是认为游戏就是要做成某一个游戏那样才叫做好玩、有趣，乃至到了不是经典不玩，不像经典就不玩，唯经典是瞻的地步。等这样的人进了游戏公司，事情就麻烦了，你会发现你他们对游戏设计根本没有任何理解能力，跟他们谈许多设计问题简直就是对牛弹琴，因为他们根本不曾接触经典以外的游戏，哪怕是一些尽管不够经典但是很有设计参考价值的游戏。在学生时代习惯于从经典里面不加理解地找绝对真理的他们，把这种习惯完完全全地搬到游戏行业里面——此处已经排除了他们借鉴的经典不够“经典”的可能，那种由于借鉴了一个坏的设计导致整个项目乱七八糟的情况我是见过的。 
　　没有理解就更没有分析。可以被称之为“玩家”的中国人在游戏杂志里，平日的言谈里总是离不开这三个字：可玩性。游戏好玩他们就说有“可玩性”，游戏不好玩就是没有“可玩性”，甚至说一个游戏好玩是因为它有“可玩性”，不好玩是因为它没有——“可玩性”之于游戏就仿佛如那玩意儿之于人——要判断游戏好玩不好玩跟判别男女同样简单，只需往裤裆下面伸手一摸就知道了。请问事情有那么简单吗？“可玩性”是一种已经成为共识的概念吗？我从未见过有人对这个词作过相关的论证。而且，爱用“可玩性”说事的人都忽略了一个问题，就是游戏受众问题。有的游戏你觉得好玩，我觉得不好玩，这时候你跟我谈“可玩性”就没有意义了。我在拙文《谈谈游戏作品分析》里写道过，“无论他们举出多少游戏设计去支撑他们的“可玩性”，都无外乎是证明了“可玩性”这样的出身：在他们有精力、有时间、有机会玩到的游戏里面，挑选出他们可以理解的、认为好玩的，再使用这样或那样的方法归纳出他们认为这些游戏好玩的地方。说到底，‘可玩’即是说话人‘可以玩’，‘可玩性’对说话人是没要求的。”请问这种模棱两可的概念拿得出来分析论证问题吗？应试教育经常给出“诚信”、“民族大义”这样的题目让学生们“自由发挥”，但却丝毫没有培养他们的逻辑思维，更没有给予他们最基本的哲学素养。没有逻辑思维的脑袋就是不觉得“好玩的游戏就有可玩性，有可玩性的游戏就好玩”有什么问题；没有哲学素养的结果就是搞了半天都不知道“可玩性”只是一个他们自己搞出来蒙自己的概念——我却见过不知多少做了数年游戏的人张嘴闭嘴就是“可玩性”！ 
　　很久以前，有个游戏圈的前辈跟我说过，他觉得做游戏最重要就是从别人的游戏中学习。这话大抵没错——游戏行业太新了，如果不能从别人做的游戏里面学你根本就什么都不知道。但看看做游戏的这些人，多数一没有理解能力二没有分析能力，你让他们怎么去学。如果说他们什么都不用学就能创造，这就更扯淡了——脱离有效率的学习和借鉴之创造纯属异想天开，更何况中国学生创造能力全球倒数已经不是什么新闻了。不明白行业状况的读者可能会说，我这是在抹黑同行。但我哪里是在抹黑同行，我刚才说的这些人已经是真的为游戏行业动过脑筋的人了，他们已经算是真正做游戏的人了。刮“自主研发风”以后，因为找不到工作跑到游戏行业来混饭的大学生们问题更多，我根本不敢放到文章里面谈。 
　　发达国家的教育重视培养人对人的理解，中国现在的应试教育强调的是培养人对死物的理解。中国的官样文章里面有句话形容现在的教育现状，叫做“片面追求升学率”，意思是说追求升学率是件好事，但片面就不好了。我却以为，不以人为本的教育完全就是误人子弟。诸位，你们可能跟我一样都看到以下状况——很多的游戏制作人，他们把自己做的东西吹得天花乱坠，但绝口不提一点，就是他们的东西是做给人玩的。玩过国产游戏的都应该懂我的意思，有些国产游戏第一个场景就叫人如入地狱，看上去这种游戏更像是做给制作人自己玩的。游戏是做给人玩的，这是最显浅的道理，但很多人就是不这样认为，他们就是觉得游戏是做给猪玩的。持这样的理解做游戏只好做出一些不知道给谁玩的东西出来——相比起来什么理解能力、创造能力的缺失反而是末节。我们的应试教育只承认人的一种天赋，就是吸收知识然后把它写在纸上的天赋。但游戏行业要发展，就需要有着各种各样不同天赋的人，去做各种不同的事情，各样不同的游戏。有着大概一摸一样能力、大致一摸一样的想法的人注定只能做本质上一摸一样的东西，就像工厂流水线里做出来的东西一样——在游戏行业，同质化加上粗制滥造的产品是经不起考验的，一旦和别人的好东西面对面较量，立马就要摧枯拉朽。今日中国游戏行业过度营销背后的游戏产品正是这样的东西，但很多人觉得这还不够，还要加把劲“自主研发”。 
　　可能你们会以为我扯得太远了，游戏行业和教育大概没有这么多直接关系。但事实上，游戏制作的进行极为依靠集中脑力劳动的人力资源，教育对于游戏制作来说实在是太重要了，我国教育的现状限制了我国游戏行业的发展。最近《南方日报》里面的一篇叫做《不能让一个大学生因贫失学》的文章谈到了一些很有说服力的事实： 
　　“人是一个国家最宝贵的财富。日本、德国、瑞士等自然资源贫乏的国家之所以繁荣富强，高素质的国民是最为关键的原因，而这又源于政府对教育的重视。一年前热播的电视剧《走向共和》又一个经典场面，甲午战争后日本获得巨额赔款，首相要求用一部分改善国民生活，天皇坚决拒绝，说：‘全部用来办教育。’二次大战后，日本国民一度食不果腹，但政府对教育拨款却从不吝啬。” 
　　“反观我国，重视教育年年都说，可一到编制政府预算的时候就总要打折扣。‘九五’计划规定教育支出占GDP的比重到20世纪末要达到4％（世界平均水平是5.1％），可是现在要编制“十一五”计划了，这个目标还是没有实现。与此同时，贫困大学生的比例越来越高，因贫失学的压力越来越大。” 
　　有了这样的数目的、这样持续的教育投入去支持日本游戏行业的人力资源，日本游戏行业从一无是处到今日的如日中天。我们一度有“大力提倡素质教育”那么一说，最后又怎么样呢？我国就这样的教育投入，要等着低成本的应试教育模式垮台可以说是遥遥无期。然而，这种教育产出的人力资源根本不适合游戏行业，无法有效转化为游戏行业的人力资本。在以研发制作为核心的游戏行业，没有人力资本方面的优势就等同没有核心竞争力，这才是中国游戏行业的发展问题所在。 
　　游戏行业不行，游戏产品有责任；游戏产品不行，做游戏的有责任。做游戏的人太差劲，教育有责任。别看中国人多，几千万文盲摆在那里，拿了大学文凭的人素质可能还不如别人高中生，全国适合做游戏的人加起来大概还没有日本一个省适合做游戏的人多。人力资源贬乏直接造成了游戏行业人力资本的贬乏，此时大力发展游戏产业必定会加速产业空洞化。我承认，自己不但给文章起了个“没有明天”的题目，还通篇用描写“大炼钢铁”的方式去写现在吹得沸沸扬扬的“自主研发”，大有诋毁现在游戏行业发展形势一片大好的险恶用心。然而，我有很多朋友在年轻的时候也是头脑发热跑进游戏圈做事，到了现在已过而立之年，弄得不上不下，唯有在游戏圈撕混下去。现在有很多同样头脑发热的大学生纷纷涌进游戏行业做事，他们比起上一代的这些“愤青”对游戏了解得更少。同样的事情眼见再次发生，我就觉得，如果现在中国游戏行业能萧条下来，让这些至少受过教育的年轻人致力于其他行业，对中国，对中国游戏行业在数十年后的发展，都会是好事一件。 
　　8、什么人在玩游戏 
　　根据现在中国大众传媒的定义，在FC时代甚至更早时候就开始玩游戏的人已经完全被排除在“游戏玩家”这个群体以外——要被称为游戏玩家，电子游戏你要玩实况足球，电脑游戏你玩CS、星际争霸，网络游戏你要玩什么《传奇》、《RO》……按照某种说法，这是前网游时代玩家与网游时代玩家的区别。笔者作为前者中的一员，万万不敢证明自己就有什么优越性，甚至我认为这两个群体在本质上是非常相似的，那就是他们其实不懂得什么才是娱乐，游戏的吸引力又太大——还没等他们对什么是娱乐，什么是游戏有一个基本了解，就掉进游戏里面去了。在以前，街机房简直是一个令父母家长闻之色变的地方，现在的网吧则直接取替了它的地位，仅此而已。 
　　作为过来人，我也有玩游戏玩得天昏地暗的时候，也有偷遛进街机房被学校抓到通报批评的时候。当年我在学校大会上挨批，面红耳赤地站着听台上的学校领导训话，心里就暗想：十年以后，我们一定可以光明正大地玩游戏。十年过去了，我已不再年轻，才明白这种想法有多么幼稚。 
　　王小波曾言，“正常的性心理是把性当作生活中一件重要的事，但不是全部。不正常则要么不承认有这回事，要么除此之外什么都不想。假如一个社会的性心理不正常，那就会两样都占全。”在这里，我们可以顺理成章地把“性”替换成“游戏”，因为中国人的游戏心理同样不正常。早在许多年前，胡适就曾写文章批评中国人玩麻将没日没夜，浪费了时间耽误了中国人。时至今日，中国人对待娱乐方面的态度仍然没有多大改善，整个中国社会仍未从舆论、教育、学术方面对此作出反思，每次发现问题就是迫不及待地去查，去堵，没有人真真正正地像胡适这样去观察、去发现问题，更没有谁实实在在地去解决问题。问题长期不解决的恶果就是久治不愈：主角换了，由麻将换成了家用机、街机游戏再到今天的网络游戏，以前有欠下赌债卖房子卖儿女，今日有为了个把“武器”出卖肉体、自杀、甚至杀父弑母。问题重重复复地出现，政府每次又重复地花费大量的社会资源去查堵。我不打算在这篇文章里谈社会问题——我更想以同为前游戏时代的玩家的身份，向前游戏时代的玩家们说一些我们正在亲身经历的事情。 
　　我们是中国接触电子游戏最早的一批人，但我们中的许多人还是那样的不够水准。网游时代的玩家也是多数很不够水准，但是摆在他们面前的游戏跟我们玩过的游戏完全不一样。当年我们玩的都是什么？电子游戏是Super Mario，是Pacman，是FF，DQ，FE（火炎之纹章），是魂斗罗，Battle City（坦克大战）；PC上是三国志，大富翁，大航海时代1/2，信长之野望；街机上是SF2，恶狼传说系列、侍魂系列还有吞食天地、1942。就连那些为许多人所不齿的18禁游戏，例如当时红极一时的同级生系列也是世界级品质的东西，其中同级生更是恋爱游戏的“始祖鸟”，现在ILLUSION的那些丫丫乌出品绝不可以与之相提并论。我们玩了那么多一流的游戏。有言道，一流的读者不是天生的，他是培养出来的。我们赶上了时候，玩到了那么多第一流的，名声如雷贯耳的游戏，我们本来应该是第一流的玩家。可事实并不如此。 
　　现在我们中的绝大多数人正在用一种莫名其妙的态度去对待游戏。很多玩家对某些公司，例如暴雪、SQUARE有着狂热的忠诚，“不许说它们坏话”。然而他们绝大部分人的支持仅仅是“在精神上”的，自称是FANS但是从来没有买过这些公司的一个正版。买盗版本身是偷窃行为，是对创作人利益的漠视——我看不出做游戏的人因为盗版得了什么FANS的支持——唯一的解释就是，在盗版问题上他们得了不同程度的精神分裂：声称热爱游戏，喜欢某个游戏制作人，私底下却在做着损人利己的勾当。他们还认为，活在中国最幸福的事情之一就是可以无拘无束地用盗版。日本和欧美的游戏定价都很高，新游戏平均50美元的定价对于平民百姓来说也不算低，每个玩家每年平均下来也就是买几个游戏。但人家就把这样的地方当作是必争之地。中国玩家买盗版每年动辄就是几十张上百张游戏（全是盗版），涉猎的范围是世界级的，对厂商名、系列名如数家珍——可是人家根本不相信你会真的为这些游戏掏钱，这也是我们老是等不到一流游戏出汉化版的原因之一。 
　　玩游戏玩得多却不等于玩得好。中国人玩游戏，囫囵吞枣恐怕也是世界之最。以RPG游戏为例，中国玩家普遍的“玩过”标准是，匆匆看过对白甚至不看对白，对照着攻略过一遍就算是玩过。值得指出的是，与一般人的了解不同，他们所以不怎么认真对待对白不是因为语言问题，我就见过不少人放着英文版不买跑去买日文版，只因为一个很小的理由：日文版的字看上去更好看。对白？看着太累了，他们宁愿在通关以后买本游戏杂志看看所谓“小说攻略”。这是游戏态度问题。游戏对于中国人来说太廉价了，平均起来也就是五块钱一张，所以他们也用着仅价值5块钱的态度对待游戏。体验游戏是如此，思考任何关于游戏的问题也是如此。养成了这种恶劣的游戏习惯，游戏玩得越多，玩得越滥，就越容易造成游戏品味方面的“阳痿”，觉得个个游戏都差不多，也不想想其实是他自己的游戏体验出问题了。 
　　谈到这里，诸位大概也明白了我的意思：要构成一个够水准的游戏行业，除了游戏制作者要够水准，玩家也要够水准。山内溥一度豪情万丈地说：“消费者追求的是从游戏中体会道独创的乐趣，因此才会买下游戏主机。这个道理，我们从过去一直到将来都不能有片刻的忘怀。”说归说，如果玩家不卖帐，任天堂也就只好倒闭了，很多好游戏我们就玩不到了。我们的水准还很不够，本应是第一流玩家的我们没有能力像日本玩家那样积极投身游戏行业，左右游戏行业的发展——我们甚至没有左右其他中国人对游戏的看法，游戏被打压的时候我们总是保持集体沉默，背后或唉声叹气，或暴跳如雷。 
　　最近我在游戏店碰到一个玩游戏的漂亮女孩，她被人问到了一个古怪的问题：你为什么不买正版？她笑着说，游戏是短暂的。而我，多年以来坚持，游戏虽然短暂，可它带来了感动——而且是游戏制作人带来了感动。感动是永恒的，游戏制作人理应得到尊重。好好玩一个游戏，掏钱买自己认为值得玩的游戏，这才是尊重别人的表现，才是成年人应该有的游戏态度。忽然感觉自己老了。过了一个十年，我们已经不在年轻，中国人对待游戏的态度却依然是那样的幼稚。我们是不是应该问问自己，甚至问问每一个玩游戏的人：游戏对于我们来说究竟是什么？ 
　　说到这里离题有点远了——思考这个问题不仅仅是为了游戏行业，更是因为我们已经是成年人了，已经玩了很多很多的游戏，所以我们要明白我们之前做了些什么，还有以后怎么做。如果连我们也不能保有正常的游戏心理，如果连我们继续玩游戏玩得那么不够水准，很难象游戏在我们成为社会主流的明日会有什么好名声。我再重申，只因为我们是成年人了，为自己以前做过的事情承担责任，为以后要做的事情承担义务，对于我们来说是理所当然的事情——假如我们还想我们和我们的子孙在这方面有不被干涉的自由，不会再有一个以“救救孩子”为口号的愚蠢声音朝着我们乱吼。 
　　断言中国游戏行业没有明天可能还为之过早，但这个明天也决不会是什么都不做、什么都不想就能够等来的明天。 "></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/post/gaming-industry-reflection/ itemprop=url class=post-title-link>一篇令所有游戏圈的兄弟汗颜的文章</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年07月18日 13:49:00 CST" itemprop="dateCreated datePublished" datetime="2007-07-18 13:49:00 +0800 +0800">2007年07月18日
</time></span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/gaming-industry-reflection/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>一篇很久的文章了,看看现在的游戏圈还是这样子的,在发表出来希望对做游戏的同志们有所帮助.<br><br>1、无休止的抄袭</p><p><strong>　　回想起上个世纪末，华人游戏圈还处于原始阶段，那时候随便竖几条枪占个山头就敢说自己是做游戏的，拿出来的东西勉强有个模样就不错了，Bug少点那得是国货精品。真正的国货精品又怎么样？一些玩家说：“玩过FF6我才知道我们的精品（《仙剑奇侠传》）跟人家的差得那么远。”那还是跟FF6比，现在的仙剑奇侠传3跟FF7又是什么差距呢？天晓得。但在中国，人们就认为《仙剑奇侠传》是最好的RPG。总结这种现象的时候，很多人不约而同地把“中国语言和地道的民族题材”当作最重要的一条，这就是他们所认为的“中文游戏优势”。中文游戏是什么呢？在大部分中国游戏制作人眼里，它等同外国游戏套中国皮。很多人叫嚷的“中国要有自己的AD&amp;D”就是这么回事——把圣灵与黑暗改成“阴阳”，魔法师唤作“道士”，属性相克略加修改成了“五行变化”。整个游戏只有命名是自己的，除了抄你还做了些什么呢？</strong></p><p><strong>　　没错，用本土语言和本土题材创作是一种优势，但这种优势只在特定的文化、地域界限之内起作用。随便哪个挂名“勇者斗恶龙”的游戏在日本都能热卖，但同样的东西拿到欧美去则只能惨淡收场。土星版的《仙剑奇侠传》在日本卖不好，正好从另一个侧面说明了这一点。更为关键的是，所谓的本土优势纯粹是市场判定，它体现出来的是游戏产品在语言文化上的优势而不是游戏本身的优势。所以本土优势与游戏作品的素质其实并无关系，跟游戏是否原创也没有关系。用这个标准来看，自中国大陆游戏业早期推出的《官渡》、《中国球王》以降，又有几个游戏称得上是原创的？冒昧地说，“中国人自己的垃圾游戏”和“垃圾游戏”大抵没有本质上的区别，垃圾游戏就是垃圾游戏。</strong></p><p><strong>　　中国游戏行业每年都在抄，而且每年都有人跳出来说，中国游戏不抄不行。为什么不抄不行，是因为没钱吗？可不是。中国游戏缺钱的年代已经过去了，网络游戏让世人看到原来在中国做游戏也能赚钱。靠游戏赚钱并不是什么稀奇现象，但对接触过游戏行业的中国人来说，这简直就是黑色幽默——在中国做游戏也能赚钱，太不可思议了。不仅能赚钱，丁磊为此还作过一个贴切的形容：“网络游戏是每天睡觉都可以有成千上万收入的行当。” 现在这个行业每年有亿万资金往里面涌，正说明梦想着“轻松赚大钱”的投资者不在少数。</strong></p><p><strong>　　钱永远不是万能的。有了钱，这个行业还是只能拿出那么点皮毛。这个年头，谁有了钱谁就使出吃奶的力气赶紧圈地，广告费能砸多少是多少，什么费用都不能省，除了制作经费。没办法，现在这个市场明摆着就是你扔多少广告费你就有多少回报——要是在运营之初没有足够的在线人数撑着，什么事情都不好办。陈天桥有一句名言：“我们要让大家知道，《传奇》是个烂游戏，但盛大是个好公司。”这话放哪都绝对是语不惊人死不休——甭管《传奇》是不是你作的，作为一家游戏公司你拿出来的东西都不是什么好货，你还有什么脸面说自己是好公司？但在中国，“好公司”做烂游戏，这就是铁一样的事实。《传奇世界》制作六个月就开始测试，从设计者的角度来看，六个月意味着这个游戏差不多没有前期策划，这种情况下全部代码能写完都已经是奇迹了，游戏本身当然是惨不忍睹——但这样的东西在中国还能挺得住，这就说明问题了。</strong></p><p><strong>　　本来我还以为网游大潮能够给一些思路不够开阔的同仁醒醒脑，但现在连一些本来头脑还算清醒的家伙都开始晕头转向了。很多人见到我就大谈在线人数、资本操作，但他们明明是一线制作人员——这几年你们都干嘛去了？一个欣欣向荣的行业不但要有充足的资金，还要有务实的技术人员，但在中国这就产生了一个怪现象：在大家都朝不保夕的年代，讨论技术的气氛很是浓厚，但行业越阔，谈游戏就谈得越少。是啊，现在“好公司”都靠烂游戏挣钱，谁还会去关心游戏做得怎么样。</strong></p><p><br><strong>　　2、荒唐的自信</strong></p><p><strong>　　你哪里来的自信？</strong></p><p><strong>　　这句话我很想拿出来问问每一个游戏从业人员。凭什么靠烂游戏发家的公司能自称是“好公司”？凭什么对游戏行业的发展和现状的接近一无所知的人能够站在这侃侃而谈？凭什么，中国这么多人在网游的大道上充满自信地昂首阔步，一会声称自己是“好公司”，一会宣布自己的目标是“网上迪斯尼”？他们究竟对这个行业的现状了解有多少？</strong></p><p><strong>　　中国网游在销售渠道上已经显现出了过度营销的迹象。点卡搭售和炒货现象状况非常普遍，特别是点卡搭售——运营商用热门游戏的点卡硬性搭售冷门游戏的点卡，这意味着很多网游的实际销售额有一部分并不是通过正常销售完成的，搭售出去的点卡往往就烂在渠道的手里，或者通过一些别的手段处理掉。这表明现在市场上已经存在大量劣质游戏，而且运营商还用尽一切手段把这些游戏推出市场。这种情形让人不禁想起ATARI Shock：就在1984年的圣诞节，在美国处于家用机垄断地位的ATARI平台上因为充斥着大量虚有其表，内容雷同的游戏，导致整个美国的绝大部分玩家对游戏产业产生不信任感，销售渠道和消费者同时拒绝游戏软件，使得大量的游戏厂商破产，无数从业人员失业，整个美国游戏市场濒临崩溃。</strong></p><p><strong>　　中国的游戏本身的问题比它在渠道上的表现还要严重得多。像《传奇世界》这样做了几个月就开始测试的游戏遍地都是，而同样是做游戏，暴雪光是测试就会用几个月时间。这还是看表面，看看游戏内容——不看不知道，一看吓一跳，所谓的中国原创网游几乎等同MMORPG，题材搞来搞去就那几套，表现手法几乎一摸一样，全是Diablo或者UO的劣质仿制品。这还算是原创吗？但是中国人还是有办法把这些东西卖出去的，其中一种手段就是五花八门的广告词：什么完美、高度逼真的全3D游戏世界，什么多种族，多职业，灵活的角色设定，什么严谨的政治、经济、权力结构，什么独特的XX系统，同类型产品的共同点被吹成“特色”，与同类型产品稍有不同的特点就成了天大的优点。</strong></p><p><strong>　　如果说中国游戏行业领先于世界，那么以上这些问题可能都不是问题——但事情是这样的吗？正当我们这么些厂商正在用雷同的产品上作重复劳动的时候，无论是日本，还是欧美都在用我们难以想象的加速度继续赶超我们。回到开篇时候我的那句话，当年的仙剑奇侠传跟FF6有距离，但这个距离还是可见的；就现在，即使同样是火热滚烫的网络游戏，眼下国内搞的这么些东西，跟CAPCOM将要推出的《铁骑大战》、已经推出的《Biohazard Outbreak》，还有全民高尔夫Online等PS2 BB Network上的游戏又怎么能比呢？业内有个执行企划甚至这样告诉我：“我不敢多玩这些游戏，因为每玩一个我就感到深深的绝望。”为什么绝望？因为即使是在中国市场大红大紫、叫中国人无可奈何的韩国网游，也远不能够和这些日本游戏相提并论。</strong></p><p><strong>　　除了圈地，中国游戏行业就显得非常不会花钱。网游大潮带来的投资往往大规模流入媒体和渠道，对制作的投入一般就停留在“买引擎”、“挖角”、“投资散兵游勇”（也就是那些做出个游戏毛坯四处兜售等着吃饭的行业新兵）的层次上面，这对一线制作水平的提高是非常有限的——总之不管有钱也好，没钱也罢，中国游戏行业总是在无休止地抄袭，即使现在的大好时光也不过是搭建在对几个里程碑式游戏的抄袭之上。所以，这个行业无论对外如何使用广告枪文，对内如何宣传各种远称不上合理的说法，都掩盖不住以下的事实：放眼世界，中国游戏行业不但技不如人，而且在萌芽阶段就开始了各种恶性竞争。游戏厂商普遍不以游戏为本，倒是绞尽脑汁用游戏制作以外的手段抢夺市场——如果不是这样，还能怎么解释某个没有背景音乐的游戏获得“年度最佳游戏音乐奖”？怎么解释某个网游还没公开测试（更别说正式运营）就得了奖？</strong></p><p><strong>　　在这种环境之下，技术人员不肯脚踏实地做事，明眼人不去揭穿皇帝的新衣，倒是一个接一个的外行敢于口出妄言。打个比方说，有篇叫做《酷经济》的文章，大谈中国游戏为何落后于别人，开篇就来一句“中国的网络游戏市场，让韩国、日本游戏占领了，是游戏开发技术不如人吗？是我们的游戏企业能力不如人吗？其实都不是。”天啊，连技术落后都不肯承认，接下来恐怕什么实事都用不着讲了，尽管放卫星就是。业外人胡说八道并不可怕，令人担忧的是很多小有名气的业内新兵也在胡言乱语，刚刚一脚踏进盛大的唐骏就属此类。在搜狐聊天室举办的一次活动里面，一个网友曾问他：“盛大网络游戏一个“传奇世界”、一个“热血传奇”，您玩不玩网络游戏？对网络游戏了解吗？”唐骏说:“我对网络游戏了解，但不是高手。”笔者在游戏方面的有着多年钻研，深知要对电子游戏达到“了解”的程度，进而对网络游戏达到“了解”的程度要花多少的精力，要耗费多少的资源。试问你唐骏搞IT搞了那么多年，要是说你也同样花了那么多的精力和资源在游戏上面，可能吗？果然，再接下来的问答中他露出了马脚：</strong></p><p><strong>　　主持人陈拥军说:因为传奇和传奇世界在中国是非常有代表性的，您对这两块游戏怎么看？包括前景。</strong></p><p><strong>　　唐骏说:传奇是带动整个中国网络游戏的产业，传奇是中国第一款真正具有实力的自主开发的游戏（笔者注：天啊，这句话用的都是什么语法？传奇怎么又变成你盛大自主研发的东西了？）。这都是非常具有代表意义的，也是未来有非常大发展前景的。加大更多的自主开发，来满足更多玩家的需求。</strong></p><p><strong>　　唐骏说:我们讲到迪斯尼，如果你在美国，我们看到迪斯尼是什么？第一，它拥有品牌，这个品牌是所有娱乐也好，包括电视、电影、主题公园里面、相关的产品包括媒体等等都是迪斯尼品牌推出来的。这是我们现实生活当中的品牌，我们希望网上迪斯尼就是让人们在网上也同时能够感受到娱乐带来的快乐，比如网上电影、网上电视、网上主题公园等等，这都是我们对未来网上迪斯尼的构想。</strong></p><p><strong>　　拜托，请不要拿盛大和Disney相提并论好不好？Disney品牌是靠像蓝猫那种水平的烂动画支撑起来的吗？不是的，人家靠的是米老鼠，白雪公主，小飞侠，阿拉丁这种实实在在的好动画支撑起来的。盛大的研发实力怎么样，产品放到世界属于第几流，这是路人皆知的事情，用这样的烂游戏、烂公司来做品牌，又能有什么前景？试想想，要是任天堂推出一个传奇一样的垃圾（把任天堂和传奇放在同一个句子里面的时候我不得不用这个字眼），它可能明天就要倒闭了！同样是这个盛大，有这大笔充裕的流动资金也还要流血上市，一上市包括陈天桥在内的内部人士就狂抛45％股票，这像是在做“网上Disney”吗？难道不是投机逃跑吗？</strong></p><p><strong>　　现在似乎只有两种说法能够解释中国游戏行业发展的现状：</strong></p><p><strong>　　第一种说法是大家都在争先恐后地抓紧时间捞一票，最后看看谁能够在彻底搞垮这个市场之前收手走人。为什么搞烂游戏的反而是“好公司”？因为现在好公司的标准是在短时间内不顾后果、不择手段地暴发。什么原创游戏，什么民族工业，扯淡。</strong></p><p><strong>　　第二种说法是很多人每天都在做着“网上迪斯尼”的美梦，至于游戏行业在国外发展得怎么样，在中国的现状又是怎么样，他们非但一无所知而且还根本没有去看。有的人瞄了两眼，说：是啊，这些东西挺好的，但是在中国行不通。我真没发现这些东西有什么行不通的，前提是足够便宜——例如跟CS似的，只卖三十八块钱（嗯，我承认这是天方夜谈）。所谓的行不通还有一种可能，就是借助中国固有的排外观念和政府保护加以抵制——我们的东西不好没关系，把门一关,不准洋货进来,我大清的煤油灯再不亮,我也不用你的电灯，甚至凡是比煤油灯亮的都不许点,反对的就是汉奸。只可惜现在说这个已经太晚了，任天堂投下了神游机，SONY将引进了PS2，眼下一个已经汉化的《命运传说2》也能把中国所有的RPG打得人仰马翻（BTW：然而很多中国人还以为自己很懂RPG！）。</strong></p><p><strong>　　与国外一流游戏厂商的较量已经迫在眉睫，人家骑在你头上只是早晚的事情，但国内的游戏制作仍然活在“你再强也奈我不何”的鸵鸟政策之下。网游的兴起让许多人开始关注游戏行业，也催生了不少张口就是运营，闭口就是资本操作的“专家”，他们胸有成竹地对一个他么完全不了解的行业指指点点。而我看到的，只是几个暴发户在前面领跑，后面一大群人陆续跟上。日本人中村彰宪曾指出中国游戏行业是“完全的资本主义”，参照现在的现状，我们不难理解他在说什么：从单机时代到网游时代，上到业界红人下至网吧老板，绝大部分投身游戏行业的中国人一直把游戏行业视作是一个纯粹的投机项目，倒是极少见有谁把它当作一个既有现在亦有将来的产业来对待。人人都奉行机会主义而妄顾行业的生死存亡，这正是电子游戏登陆中国以来所以出现这么多莫名其妙的争端，引发诸多社会问题，行业成长如此缓慢的根本原因</strong></p><p><strong>3、成本问题</strong></p><p><strong>　　中国游戏行业所以成这样子，跟盗版的泛滥也不无关系。面对中国市场，所有的世界一流厂商都只是在谨慎的投石问路，其中最大的原因就是恐惧盗版。像FC，在中国从来没有过行货主机和行货软件，但其兼容机销售是上亿台，盗版卡带销售更是不计其数，这样的市场谁能不怕？所以说，是盗版——不如说，是中国人的消费观念问题过早的把这个行业逼上了绝路。绝大多数的中国玩家认为买盗版是理所当然的，因为正版贵，他们买不起——尽管在中国发售的正版游戏都不过是在几十块钱上下，他们仍然宁愿买盗版。同样是这些人，他们可以一年换几个手机，可以花几百块钱去看演唱会，但偏偏就在游戏问题上，他们说他们消费不起。他们就是觉得买不起正版游戏所以用盗版是理所当然的，因为他们要玩——这听上去像是农民因为没饭吃所以要造反。用Adobe的CEO皮卓丁的话来说，有的人就是以为Photoshop就值几块钱，你有什么办法？</strong></p><p><strong>　　但玩家就是这样认为的，他们一边买着盗版，一边整天嚷着正版软件定价不合理，非要到每个游戏才几十块钱的时候才能接受。可是等游戏卖到几十块钱的时候这又是怎样一种景况？Warcraft 3卖几十块钱，这合理吗？像那种规模的游戏，几十块钱里面仅仅包含了中国代理上贡给暴雪的一点版费，这点版费跟研发费用想比只能是九牛一毛。换句话说，那些定价让中国人觉得负担得起的正版外国游戏在中国几乎是以倾销的形式推出：Warcraft 3卖几十块钱，FIFA2004卖几十块钱，CS卖几十块钱，文明3也是卖几十块钱，但中国人即使有能力做这样的游戏，制作成本加推广成本还不止这几十块钱。到了中国人真的做出些卖几十块钱的游戏，又怎么可能跟“几十块钱游戏”相提并论？就目前来看，除了韩国网游以外的外国游戏根本就没办法在中国市场收回成本，所以在中国卖几十块钱的收益不过够他们报销茶水费。所以，外国厂商在正版定价问题上照顾了没有尊严的中国玩家，但与此同时也有意无意地压缩了中国游戏行业的原创空间——技术含量低，游戏理念落后的中国游戏只能靠在中国卖几十块钱获利，但是EA等厂商的游戏有在外国卖几百块钱的获利作后盾。事实就是，中国游戏生下来便要和这种“几十块钱游戏”在中国市场上同台竞争。</strong></p><p><strong>　　然而，我们经常说的单机游戏跟唱片、电影一样是靠卖拷贝赚钱的，它的制作成本绝大部分属于可摊成本，通俗的说就是拷贝数卖得越多每张拷贝数的成本就越低，钱就赚得越多。但是不说不知道，其实整个中国大陆地区的单机游戏消费能力，乐观估计也就是跟台湾一个省持平，兴许还要低一些。游戏的销售成本也是个问题。如果考虑到中国物流系统效率较低，中国地域跨度广造成的软件销售覆盖面广，覆盖到某些地区的边际成本高，这个市场就更为有限了。盗版猖獗更使得某些地区常产生盗版比正版先到，盗版到了正版没到的现象。所以，新游戏卖个几十万就已经算是商业奇迹，在这种环境下谁都知道老老实实做游戏赚钱是行不通的，结果就是大家一轮哄抢，从血狮到仙剑2，最后只剩下如今的一潭死水。</strong></p><p><strong>　　分析一下单机游戏在中国的失败，我们就不难理解网络游戏今日的风行：1.网络游戏的销售对中国现有的物流系统依赖较少，点卡销售可轻易普及到便利店，网上销售点卡和网吧销售点卡也极大的提高了资金回收效率，同时避免了盗版问题。2.网络游戏依存的平台发展赶上中国发展互联网的顺风车，宽带上网的普及、网吧雨后春笋般地出现极大方便了服务器端的架设和推动了客户端的普及。虽然网络游戏制作成本并不比单机游戏要低，而且它还多出了架设服务器的成本和养活一大堆维护人员和客服人员所产生的成本，但是上述的便利使得网络游戏发展每个客户的边际成本很低并且忽略了地域跨度——相比起在制作成本这简直可以忽略不计。</strong></p><p><strong>　　中国人还太穷了，所以在市场上我们常见到层出不穷的价格战，成本问题几乎决定了一切。就我数年的观察，中国游戏行业确实有一些决心要为梦想，要为这个行业努力的热血青年，他们总想以牺牲自己的方式来跨越成本问题。但问题是一个行业不可能只由热血青年来支撑，再说热血青年自己也没有喝风屙烟的本领——资本家可不会跟着你一起跳河。资本家只会考虑两点：假定你所要做的游戏真的是好游戏，首先你能不能真的做出来？等你做出来了，它能不能带来相当的利润？我要为之冒多大的风险？不得不承认，当前的中国资本家果真解决了成本问题，并且给了热血青年一个响亮的耳光，“《传奇》是个烂游戏，但盛大是个好公司。”。</strong></p><p><strong>　　人家说中国游戏行业是“完全的资本主义”大抵是没有错的，资本的力量在游戏行业里面膨胀得太厉害，起了的作用太过大了，制作力量完全望其项背。整个中国社会听到的那些来自游戏行业的声音，关于游戏行业利好的消息事实上都是资本家的声音，游戏制作者或因为专业水准低下、或因为在行业地位低下完全被冷落在一旁。说句粗俗的话，现在唐骏这个游戏行业新兵便是放个屁都比游戏制作人说话响亮，这正常么？这跟游戏名制作人一呼百应的日本恰好完全相反那，比尔盖茨在日本首发XBOX发售的时候就没敢声称自己“了解电子游戏”。你以为人家是傻子吗？人家就知道，解决了成本问题不等于解决了一切问题。</strong></p><p><strong>　　4、平台玩人人</strong></p><p><strong>　　国家标准化管理委员会今年曾委托某大学做了一份关于游戏产业的调研报告，报告中提到不支持PS2之类的主机进入中国的若干理由，其中有两点：1、这类主机的硬件体系是封闭的、专用的、非通用的；2、这类主机的软件体系是封闭的，采用了非市场化的授权体系。</strong></p><p><strong>　　看到这段文字的同时，我还看到一位业界研究专家模样的人落了这样的旁注：</strong></p><p><strong>　　“绝大多数电视游戏玩家可能都无法接受这两点理由，的确，厂商有权保护自己的知识产权，有权利用自己的知识产权去牟取利益，即使这种利益是建立在垄断的基础上。但我还是要举双手赞同该报告的结论，在对待高技术产业上，政府最应该关心的是能否形成自己的知识产权开发功能，能否通过自身的创新能力，形成产业化规模。”</strong></p><p><strong>　　假如除了电脑以外的游戏平台仅仅是能玩游戏的简化版电脑，我也举双手赞成以上的说法，但问题是游戏机远远不是“简化版电脑”那么简单。对于一个能够被称之为“产业”的游戏行业来说，作为游戏主机的PS、XBOX等不过是实体化的前端硬件（家用机的英文“Console”的原意），而同样名为PS、XBOX的游戏平台（Platform）的含义则超出“游戏主机”一词所包括的内容。</strong></p><p><strong>　　从街机时代开始，日本的游戏硬件制作已经有了20多年的积累，不但拥有大量专利还拥有大批人才：从如何应用电子技术制作越来越小巧、性能越来越强的家用机，到如何利用机械技术打造各种巨型的体感游戏机台；在整体方面思考怎么样的家用机手柄才能满足现在的各种游戏、未来的各种游戏需要的，在细微之处考虑一台街机应该用多厚的木板，应该剪裁为何种形状才能在节省材料和美化外形之间找到平衡。中国勉强算得上有游戏软件研发，但中国人对游戏硬件研发则几近一无所知。纯粹对应软件的游戏研发尚停留在程序开发层面，很多制作人甚至连鼠标＋键盘的操作方式都没吃得透，这就是不重视游戏硬件的恶果。“一个软件开发人员的成熟期大概需要3年，但是一个硬件开发人员则需要花上大约5～6年的时间来熟悉那些调试错误和积累开发经验。”SEGA AM2的铃木久司社长如是说。用这个标准来衡量，日本已经有了好几代这方面的人才，而中国在这方面的数字约等于零。</strong></p><p><strong>　　在游戏机通过非正式渠道进入中国以来，中国社会对游戏硬件不但没有投入应有关注，还肆意把许多社会问题推到某些游戏硬件上面来（例如街机、家用游戏机）：曾经有一段时间，同样是学生玩游戏，在电脑上玩不算是什么坏事，但放到了游戏机上似乎就是十恶不赦的罪过；街机曾经被人人喊打。政府迫于公众压力，曾在2000年6月授权文化部等7部委执行的《关于电子游戏场所管理的通知》，在这份通知的第四部分内容明确规定，除了来料加工以供出口的游戏机生产外，凡是面向国内的游戏机零配件的生产经营销售和进口活动一律停止。具有讽刺意味的是，等到DDR在中国变成流行的时候，有记者就说：“这么简单的东西，为什么中国人就想不出来？”他怎么不想想，难道有识之士会投身到一个被渲染成像造假药、酿假酒那样害人不浅的行业来吗？曾几何时我们有过仿冒8位游戏机、16位游戏机的历史。姑且不论其合法性，那段历史至少还证明当时我们在某方面的硬件制造技术跟外国不是相差很远。但从32位机开始，中国玩家只能享受从非法渠道过来的“原装进口”外国主机，国内的仿冒生产仅限于手柄、光枪、电源等科技含量较低外设（研发能力还是没有的）。</strong></p><p><strong>　　在游戏平台的构成里面，硬件制造处于最底层，硬件授权体系和软件发行体系作在其之上。诚如前文的那些专家所言，游戏平台的硬件体系和软件体系都是封闭的，但是他们没有去看到封闭意味着什么。封闭的硬件体系首先改善了游戏运行环境，像游戏机，至少玩家不必担心它的操作系统稳定性以及硬件兼容性，制作者也无需为硬件的频繁变动而增加DEBUG流程。更重要的是，硬件授权体系的封闭才能够像任天堂似的应用诸如mini-DVD这样的非主流数据储存载体，从根本上杜绝盗版的存在。据最新消息称，连微软也正在寻求一种管理下一代Xbox游戏机光盘设计和开发的工程师。对于这个工作职位的说明进一步提到，在新的游戏磁盘规格的关键因素列表中，反盗版是排在第一位的。不错，在完全开放的PC平台上做游戏无疑是很轻松的，但轻松的代价就是从开始就要与盗版作战。中国人在这方面积累了很多“宝贵经验”：把一张光盘的数据用非压缩格式做成两张甚至三张；使用对盘片和光驱要求甚高的加密格式。不得不说，这些努力很大程度上是瞎忙：盗版者“帮”制作人压缩数据放在一张盗版光盘上；加密格式也只能“争取几个星期的发行时间”。至于盗版的危害，恐怕就无需我多言了——本都保不住，怎么原创？</strong></p><p><strong>　　很少人意识到我们在游戏硬件上的距离跟外国越拉越远，也只有更少的人意识到发展游戏硬件制造和硬件体系的必要。网络游戏夺去了所有人的眼球，连一些政府官员也不例外。在不久前的第二届中国互联网大会上，文化部市场司庹祖海副司长也着重强调，最近有一些游戏机想进入国内市场，而国家2000年的“通知”并未变更，在规定变更前相关部门会继续按照这个政策执行，这些游戏机存在合法性问题。庹祖海副司长还谈到，就整个游戏产业来讲，国家认为应该发展。但是游戏产业分很多种产品，发展的先后主次，都需要研究。他表示，是否发展其他游戏产业，文化部和有关部委将进行调研，待国家批准后进行。观察一下现在舆论的导向，我们不难推测出副司长说这番话的原因：网络游戏绕开了盗版问题，而且中国人有能力做网络游戏（且不说中国人还有能力让次品赚钱），所以为它就是当今中国游戏行业的救命稻草，像PS2等游戏硬件则可以推迟发展。对于大部分人来说，这已经是一个很完美的答案，但在我看来它还不够完美。尽管现在许多调查机构出台了各种各样的数据，政府也出台了各种各样的政策，表面上看它们预示着前途一切光明，但却从来没有人针对“网络作为游戏平台的前景”做一个贯穿游戏软件、游戏硬件的发展历史、发展现状的技术分析，然而这恰是不可缺少的一环——日本游戏行业每年都会就游戏的技术发展开会，不开会的时候也有不少像山内溥、岩田聪这样的行业大腕就游戏技术发展说很多危言耸听的话。笔者自知学识浅薄，却也要开一个先例，在这里也要试一下做这样的技术分析：</strong></p><p><strong>　　Namco的岩谷徹（闻名于世的Pac-Man创造者）在接受记者采访时曾说，现在看来网络只是游戏的扩展手段，还不能说网络时代已经到来了。这话八九不离十地道出网络游戏的现状：网络作为游戏平台至今无法脱离其他平台的影响，而且网络游戏在很大程度上是PC游戏应用网络技术之后的成果。我们以公认为网络游戏里程碑的《网络创世纪》（大家所熟知的UO）为例，最原始的《创世纪》是一个文字游戏，连图像都是用文字“拼”出来的，而它若干后续作不断的引进了不同的图像技术之后，变成现在玩家广泛接触到的《创世纪》系列，应用网络技术的《创世纪》就是《网络创世纪》。我相信有些人会对这个说法有异议。的确，作为网络游戏里程碑的《网络创世纪》在游戏系统上奠定了网络游戏的虚拟社会组织、虚拟经济体系，但是在直接面向玩家的部分，例如界面、基本操作、人物设定和世界观等等却是《创世纪》系列的延续。用非专业的方式来看待这个问题，则可以这样表达：如果说《网络创世纪》是MMO RPG（即大型多人在线角色扮演游戏），作为RPG（Role-Playing Game）的《创世纪》就是《网络创世纪》的游戏原型，MMO（Massively Multiplayer Online）则是这个原型的网络扩展形态。纵观现在所有的网络游戏，我们可无一例外地用类似的方法找到它的原型，而且这个原型不是在网络游戏平台上原创出来的。然而，发展多年的欧美和日本游戏行业拥有不同的发展方向，在不同的发展方向影响下拥有各自不同的游戏原型，这些可以说是它们各自的积累，不但有知识经验的积累还有人才的积累。中国游戏行业在单机时代是抄，在网游时代也是抄，并没有自己的游戏原型，更没有什么积累。游戏原型不可能在一种“好公司做烂游戏”的业界氛围中诞生，实际上也不可能在网络游戏开发中诞生——网络游戏更多的制作投入是在前面所说的“MMO”，即多人在线环境的扩展形态部分，在游戏原型方面能够有相当程度的引入已经不错了，游戏原型的原创是一个网络游戏项目在人力和物力上所不能承受的。</strong></p><p><strong>　　必须承认，现在我们看到的游戏原型引入还很有限，也就固定在RPG等几种，这是因为现有的网络无法提供很多游戏原型引入所需要的带宽和反应速度。随着网络技术的发展，游戏原型的引入将在未来为网络游戏发展的一条必经之路。在这条必经之路上，无论是欧美还是日本都有它们的筹码，因为他们有在非网络游戏平台上发展下来的游戏原型基础，而中国本来在游戏原型方面就是纯粹靠照抄，如果现在就放弃发展一切非网络游戏平台（也就是等于放弃非网络游戏平台游戏），到时候将败得不可翻身。除了RPG等少数游戏原型就不能做（应该说是不能模仿、照抄）的中国游戏制作者看到《铁骑大战》这样引入了顶尖3D技术，最前卫的游戏原型以及最过硬的游戏硬件制造技术的网络游戏之后，试问又有谁能不绝望？</strong></p><p><strong>　　以上仅仅谈及游戏平台的软件发展，要是从游戏硬件的发展来讲，网络游戏平台更不是可供整个游戏行业立足的地方。街机平台的硬件核心在于大型框架机体，家用机平台的硬件核心在于游戏主机，而网络游戏平台的硬件核心在于互联网。然而，大型框架机体和游戏主机的主要功能是玩游戏，因此它的设计、制造或者售卖很大程度上在游戏行业自身操控之下。相反，互联网不是娱乐专用设备，它属于一个国家或地区的基础设施，游戏行业完全不能干预它的运作。这会引发两个严重的问题：</strong></p><p><strong>　　A. 互联网的稳定性与网络游戏平台运转直接挂钩，平台运行风险大增。</strong></p><p><strong>　　非网络游戏平台只受电力供应影响，而且即使电力供应出问题也不至于酿成严重后果。网络游戏平台在依赖电力供应的同时，更依赖互联网的稳定。一旦互联网的运作出现重大问题（病毒泛滥、设施损坏等等），整个网络游戏平台的状况就会变得极坏。这种情景在中国已经出现过了。</strong></p><p><strong>　　B. 因为完全在其控制范围之外，游戏业界无法控制网络游戏平台的发展。</strong></p><p><strong>　　无论是“MGS改变世界”，还是“N64将改变游戏”，证明的都是同一条道理：游戏研发不可能脱离硬件支持或者软件开发而存在，硬件技术支持和软件开发技术必须同步发展。历史上。在家用机发展发展史上，我们可看到某项重要机能的缺失会导致整个主机缺乏软件支持（想想SS和PS之争）；又或是尽管有比对手优秀的机能，但是不符合实际应用的高性能带来的高成本妨碍主机普及，进一步妨碍第三方厂商支持，导致高性能主机成为高性能废铁。各种封闭的硬件体系引发开放的竞争，进而互相淘汰，这样才有了游戏业界自身引发的一轮轮技术革命和游戏理念革命，游戏平台才得以如此迅速的发展。这种竞争的背后肯定涉及厂商的利益，但最终受惠的将是消费者。</strong></p><p><strong>　　反观被视为将是中国游戏行业主流平台的PC和手机，这些平台实际上是计算机、计算机网络的延续，游戏行业不但无法掌握它的发展脉络，更无法影响其发展。如果说真正的游戏产业是“人人玩平台”，游戏厂商有机会建立属于自己的封闭体系互相竞争，那么依赖游戏行业无法改变的游戏平台最终导致游戏行业成为其他行业的附庸，属于“平台玩人人”。我们可以用更实际的例子说明这个问题：为了让赛车游戏有进一步的发展，在街机上我们可以用全新的理念为赛车游戏做一个专门的框架，但PC平台就做不到——PC游戏平台的标配外设就是键盘鼠标，如果你还想你的游戏要有销路，你就不能要求每个人为了你的游戏买特殊外设。一个 “人人玩平台”的游戏行业能够主宰自己的发展，主机性能不满足新游戏的发展可以淘汰一代主机，机能过剩可以通过价格竞争予以削平避免引起机能滥用。游戏制作人亦可随时考虑加入新的外设实现新的设计，即使是GBA这样的掌机，也可以用如《我的太阳》（KONAMI）似的加入太阳感应器实现新的设计。我们更可以看到，那些所谓封闭式游戏平台的更新换代已经开始威胁电脑作为网络游戏终端的存在，支持WI－FI的NDS和PSP就要摆上货价了。但是游戏行业可以为了原创淘汰一代电子计算机，淘汰一代互联网技术吗？显然是不可能的。</strong></p><p><strong>　　比起其他的平台， PC、手机都不是稳固的游戏平台，更不是最佳游戏平台。现在它们之所以变成了中国的主流游戏平台，其实与中国的现状有关。近日NVIDIA的CEO王仁勋在中国媒体的采访中发表了这样的见解：“在中国，由于居住空间有限，PC经常被用来玩游戏、看电视或是DVD。在美国，PC就是PC，游戏机就是游戏机。两个地方的文化背景差异很大，这也导致了消费者对产品的诉求存在差异。”我完全赞同以上的观察，不过我还要补充一点就是，除了消费能力、生活空间、文化差异方面，它跟当前整个中国社会状息息相关。中国开放得非常快，人们很快就用上了用各种各样的新产品，但他们的意识特别是消费观念完全没跟上，价值取向稀奇古怪——如果是算起经济帐来，同样是玩盗版，买1000多块钱的PS2无疑比买同样是1000多块钱的电脑显卡划算，但就是很多人没法接受用1000多块钱买一个提供单纯娱乐功能的游戏机，他们就是宁愿买同样价值的显卡凑合那些日益粗制滥造的PC游戏。同样荒谬的事情还发生在移动电话领域，不过我也不必多言，毕竟不比别人富的中国人三天两头换一个手机已经不是什么新鲜事了。现在的中国社会还是一个高效率的趋同放大器（不过也不止是中国），从文凭到手机，人们热衷于追求那些“你有我也有”的东西，这些东西本身价值几何倒是其次。所以，依靠那些高品质游戏、那些外国人所说的“Must Have”Software去推游戏平台根本是不可行的，即使是Mario、Zelda这些瞬间能带动几十万平台销量的游戏也不例外。更何况一个游戏折合人民币几百块钱在中国人眼里就是天文数字，同样一个月花销几百、一千多块钱玩网络游戏他们却觉得毫不稀奇。</strong></p><p><strong>　　长期从事PC和网络游戏研发的中国人既不懂游戏平台的发展，也不懂站在游戏平台之上的游戏行业运作。“平台玩人人”的游戏行业注定被其他行业决定的“流行配置”、“网络环境”牵着鼻子走，在这些“不得不考虑的问题”面前中国人有再好的原创游戏理念也只能无条件屈从。这样下去电子游戏根本无法在中国发展为产业。中国人要在世界游戏行业扎根就必须要有自己的东西，但游戏平台是原创的立足点——如果连立足点都不是自己可以影响的，那么这个丝毫不能主宰自己命运的行业还谈什么原创？还谈什么“自身的创新能力，形成产业化规模”？中国政府正在与其他国家一同推动全球化进程，这是非常明智的，但一些民间人士看待行业（不止游戏行业）成长的时候往往就不那么明智了：我中华大国就是什么都要有，比你好的要有，不比你的好我也要有——不比你好我也一定要用自己的，没有电灯我点蜡烛，反对的就是汉奸。狭隘的民族主义情绪早就让这些人失去了分析问题的能力，他们就是坚持中国就是什么都要有，也不管这些东西以后中国人实际上有没有得到好处。我在这里提醒他们一下：须知游戏行业在中国的行业结构上处于边缘地位，这点它远不如汽车工业。汽车工业都可以开放到现在这种地步，游戏行业为什么不可以？退一步说，中国人没有自己掌控之下的游戏平台也不是什么有损国体的事。欧洲人也没有自己制定的游戏平台，就没听说过谁出来大喊大叫说，欧洲没有自己的游戏平台，欧盟就要不行了。鄙人极爱游戏，也极希望看到中国游戏行业真正兴旺起来，但我还是要说，既然承认了游戏行业是娱乐行业，就得同时承认游戏这东西不能当饭吃，在中国人的生活质量还远比不上欧洲人的情况下，真有余力就应该投入到其他能改善国计民生的行业去。而且，一个娱乐行业的发展要在中国生根发芽，第一步就是要打造一个形成良性循环的生存环境。像现在似的，沸沸扬扬地搞出一大堆靠低质游戏，对这个行业根本有百害而无一利。中国人在游戏行业里面还是个小学生，现在搞出这么个所谓的游戏产业其实大半是泡沫，小半是从别人那抄过来的“非自主知识产权”——“有自主知识产权的游戏产业”这玩意儿在中国就从来没有存在过——没有游戏硬件制造专利、没有出过世界级里程碑式游戏、到现在还有不少人把游戏机视作洪水猛兽的国家又有什么资格声称自己拥有“有自主知识产权”的“游戏产业”？</strong></p><p><strong>　　很多人认为，我们现阶段应该保护某些从事开放性平台游戏开发厂商的利益，拒绝其他平台在中国落地生根。但开放性平台的“平台玩人人”性质决定这些厂商无法成为游戏行业的中流砥柱。我们不可能闭门造车自己搞出一个跟得上世界的游戏平台。为了今后游戏行业的发展，就应该让代表当今世界游戏行业发展的游戏平台进入中国市场，培养中国游戏行业成为在世界游戏行业格局中举足轻重的第三方厂商群体，借此参与到世界游戏产业的共同发展，以实力而非地方保护主义取得在世界游戏产业中的话语权。以前关起国门来保护的还有汽车行业，结果呢？中国人因此得到什么好处了吗？把全部精力放在所谓大有前途的网络游戏平台或者其他开放性平台实际上是一次没有胜算的豪赌，它葬送的将是中国游戏行业的全部未来</strong></p><p><strong>5、行业自律</strong></p><p><strong>　　如果说封闭的硬件授权体系仅仅是为游戏质量和厂商的盈利提供了保障，封闭的软件授权体系则属于行业自律，它是直接影响到市场活跃程度的根本。前面提到的ATARI Shock几乎摧毁了美国游戏行业，表面上看是因为低质量软件的泛滥，但如果从经营的角度去看，不难发现ATARI作为第三方软件授权模式的开创者并没有运用这种模式保证发行软件的质量和档期，从而直接引发ATARI Shock这样的恶果。其后，任天堂实行了“任天堂官方质量封条”（Official Nintendo Seal of Quality）政策：在收取授权费（权利金）的同时，对所有的授权软件实行品质上的、数量上的严格监控，所有的游戏发行档期由任天堂一手安排。如此一来，内容、形式雷同的游戏可以通过档期安排错开发行避免互相影响，质量低劣的垃圾游戏则一定无法通过审查。“任天堂官方质量封条”代表着在ATARI和开放平台上游戏制作和发行方被忽略的，游戏行业应有的自律。事实证明采用这样的授权体系是一个相当英明的决定：任天堂因此站稳了脚跟，开始了长达10年的任天堂时代。不论是在游戏行业的次时代争霸，还是现在的三国鼎立时代，各硬件厂商一直沿用着这种软件授权体系，曾击败任天堂的SCE也只是将其软件授权政策制定得略为松绑而已。</strong></p><p><strong>　　封闭不等于是非市场化的，由ATARI时代冒出水面、SCE用以打败任天堂的第三方模式就是软件开发授权市场化的最佳证据。在NGC、PS2、XBOX三国鼎立的今天，争取第三方厂商支持早已成为除了主机普及率以外最重要的事情，过去任天堂靠第一方软件和第二方模式打天下的日子已经不再了：任天堂曾经凭借自社开发的《Zelda64》把N64的销量从每周3000台以下的冰点急速跃升到15万台以上，但最后仍旧因为缺乏第三方支持而无法突破PS的第三方软件潮水式防御。事后任天堂名制作人宫本茂（Mario、Zelda之父）惋惜地说：“如果那时我们能得到哪怕一点点协助，可能未来的局势就会完全不同。”同年，ENIX宣布加盟PS并为其推出《DQVII》（勇者斗恶龙7）的时候，SCE副社长德中晖久激动地喃喃说道：“有了《DQ》的保障，我们的事业有如头上的青天那样安如磐石。” “磐石”指的是什么？就是作为第三方厂商游戏的《DQ》这个日本国民游戏对于PS2而言的市场价值。第三方厂商的支持已经成为一个游戏主机生存状况的决定性因素，各硬件厂商为了争取第三方的支持在软件授权和主机设计上拼个你死我活，为此竞相开出比对方更加优惠的授权条件，例如授权金的优惠，技术支持，黄金发售档期——还有什么授权体系比这更市场化的？“这种利益是建立在垄断的基础上”云云更是睁眼说瞎话。把PS2的影响力说得再夸张都好，NGC、XBOX还是它当前实实在在的竞争者。跟操作系统领域的微软、芯片制造领域的Intel相比，游戏行业的SONY不过算是一马当先。</strong></p><p><strong>　　回过头来看看那些根本没有软件授权体系的平台又怎么样呢？回忆一下近年来世界范围内出现的FPS浪潮、RTS浪潮，国内的中文RPG浪潮吧，不管是国外还是国内，正因为PC平台、网络游戏平台完全没有软件授权体系约束游戏软件的制作发行，所以每当这些平台上有一个类型的经典只作问世，不久之后无数同类型游戏将同时出现。游戏公司把制作那些看上去一摸一样的游戏当作票房保证，并且有意通过各种手段（包括媒体宣传，各种的所谓世界级大赛）引导消费者来保证这种票房，游戏厂商则在这几种类型上重复劳动，坐享其成。在这种重复劳动的竞争里面，创造力得不到分数，获胜的总是获投资更多者，结果就是大者恒大，坐大者靠继续做同一类型游戏来吸引投资，继续坐大。ID Software就是典型例子：这家公司堪称FPS的创始者，但是他们一直以来只做FPS——不但如此，这些年他们每次拿出的新作品的时候从来不宣传新游戏加入了什么设计让游戏更加有趣，而是宣传这个游戏加进了这个特效还是那个特效，让你的显卡大显神威。可是，近年来最火红的FPS就不是Quake3，而是由游戏爱好者做的，采用的不过是Half Life引擎（技术水平介于Quake2和Quake3）的——不用我说，大家都知道这东西就是CS（Counter Strike）。造就CS成功的其中一个重要因素正是CS在同类型游戏的游戏模式上有着了不起的创新（著名的“反恐行动”），ID Software这样可谓财大气粗的公司反而在这方面原地踏步。毫无节制的重复投资把PC游戏制作拖进了死循环，不少当初锐意创新的开拓者在如此资本冲击之下成为年复一年，日复一日制作雷同游戏的赚钱机器。不少好的游戏原案被称为是“冒太大风险”予以否决，像《大刀》这样虚有其表的项目反而能骗来大笔投资，PC游戏制作被这样拖入了死气沉沉的境地：暴雪的Diablo主要制作人员出走，牛蛙、Westwood、黑岛等著名小组纷纷解散，CS的出现也不过是拜游戏爱好者所赐。这就解释了为什么我们看到的大多数PC游戏比起家用机游戏不但缺乏新意而且品质低劣——即使是同类型游戏的面对面较量，在PC平台上热卖的FIFA、NFS之流也不能与家用机上的WE（实况足球/胜利十一人）、GT（现在的官方中文翻译是《跑车浪漫旅》）相提并论，所以前者的市场停滞不前，后者的市场却在扩大。</strong></p><p><strong>　　中国游戏从业人员还不懂得什么是行业自律，他们借助开放游戏平台的开放性低价引进外国游戏冲击本国市场，生产低质量游戏搞恶性竞争，任由各方胡乱炒作制造更多的泡沫。这些人还普遍把行业发展寄托于国家对网络游戏平台这样的开放性平台的支持，其中一点就是提议国家牵头搞类似韩国那样的软件通用引擎模式。引用一些媒体的话就是：韩国游戏过去买不起游戏引擎，就由韩国政府出资，韩国科技振兴院出面负责购买国外的优秀的引擎，然后再把这些游戏引擎改良制作成可通用化的程序，再以相对低廉的价格卖给制作小组，名曰“支持韩国游戏行业发展”。前阵子报道说，国家真的就为此时搞了一个“863计划”。国家支持游戏行业发展我们当然欢迎，可这种做法实际上就是搞所谓的“非市场化的授权体系”，而且此类授权的作用就是用行政手段把游戏制作的门槛放得更低。问题是，低级产品的大量出现会在市场和投资方两头堵塞原创空间，再说中国游戏行业现在根本不缺低级产品，更用不着再引入更多的人造出更多低级产品。有人说这是学韩国，但其实韩国游戏即使比中国强，它的发展方向已经注定了只有本国市场、中国市场和东南亚市场能够消化它的产品，而且它的热销很大程度上是因为其他非开放游戏平台在这些国家发展程度低（例如一度视游戏机为洪水猛兽的中国）。在高品质的日本、欧美游戏面前，韩国游戏根本无竞争力可言。韩国人自己的本土市场没等行业发展起来就已经饱和了，于是他们只能在中国和背水一战，学他们肯定是死路一条。</strong></p><p><strong>　　封闭的授权体系背后实际上是行业的高度自律。在过去它重新激活了美国市场，保证了电子游戏行业的健康发展。有了它的间接支持，CERO（日本的“电脑娱乐评级机构”）、ESRP（美国的“娱乐软件评级部”）才得以顺利运行，在行业内部解决了“游戏软件分级”这种让政府觉得左右为难的问题。在中国网游发展得轰轰烈烈的今天，业内抄袭、投机风潮正盛，以往由其他游戏平台间接造成的社会问题显然已经通通转嫁给了网络游戏平台。冒昧问一句，现在又有哪位中国游戏界名人能够少说几句“投资运营”，提及一下关乎业界未来存亡的“行业自律”？很可惜，如今在游戏圈内游弋的资本家们并不会在乎这些，他们还沉浸在“游戏行业能赚钱”的欢乐之中。</strong></p><p></p><p><strong>　　6、游戏行业是娱乐行业</strong></p><p><strong>　　网络游戏赚钱了——区别于以前的街机房和盗版水货游戏机制造贩卖，这次是很体面地以“互联网增值服务”之名赚钱了。所以，中国大部分人开始认同游戏行业是娱乐行业，认为应该给予其发展的空间。但大家别忘了，娱乐行业其实也分三六九等，像歌剧、相声、小品，地位就是比摇滚、蹦D高得多。游戏无疑属于下等娱乐：街机房、网吧向来是重点稽查对象之一，理由是三教九流混迹常混迹于此；游戏是廉价的，应该说，要是你敢不廉价我就去买盗版；游戏还是值得被怀疑的，它曾经是电子海洛因——现在虽然“不是了”，但家长们仍然有足够的理由认为它有损未成年人的身心健康；玩家群体是弱势的，主流媒体上玩家群体总是集体失语，由得那些不玩游戏的人爱怎么说就怎么说——按他们的说法，凡是做游戏的都应该以“制造、贩卖海洛因”论处。有人说，网络游戏的时代来了，我们终于正名了，行业终于有发展的希望了。我想，事情没那么简单。</strong></p><p><strong>　　任天堂社长岩田聪在今年的东京游戏展强调：“所有的娱乐都在争夺用户有限的时间，并为此展开了激烈的竞争。”此言道出了日本游戏软件市场自1997年达到颠峰之后不断萎缩的重要原因之一：近年移动电话的普及以及移动电话性能的大幅度提升造就了新的游戏平台（最新的DoCoMo手机已经可以运行Final Fantasy、Dragon Quest 复刻版）和新的娱乐咨询平台，这使得个人可支配资金减少，且人们的部分注意力不免会从游戏机转移至移动电话。与此同时，宽带网络在日本国内的逐渐普及催生了许多免费小游戏网站（以Flash游戏为主），这样的游戏方式便利而且不花钱，也无疑会对现有的游戏软件市场产生影响。参考这样的情况仔细想想，难道网络游戏真的能幸免于盗版的影响吗？真的可以因为幸免于盗版而幸免于其他平台的冲击吗？</strong></p><p><strong>　　中国经济在增长，借助游戏媒体的发展和互联网的普及，人们的眼界也日渐开阔，现在玩游戏机的人已经比起FC时代是有过之而无不及。假设我们为封闭体系的游戏平台进入中国设置障碍，那些循非正式渠道流入中国的游戏主机势必持续扩散，而这些主机的软件主要来源就是几块钱一张的盗版。在这种模式下，玩游戏只需要游戏主机这个一次性投资，软件几乎是不花钱的。也就是说，中国游戏行业乃至各行各业在这个过程中非但没有占到任何的便宜，反而会被影响力日益扩大的家用机游戏占去用户娱乐时间——也就是中国游戏行业的生存空间。这种情况会比某些人所说的“中国拥有自主知识产权的游戏产业将受到抑制，导致中国信息产业遭受重创”更坏，因为你的对手根本就不是对手本人，而是对手的一个极廉价倾销版本，所有的行业保护手段都将不适用，这意味着你不会有任何与对手讨价还价的机会。介时你有多少本土优势，多少宣传优势也是白搭，因为通过中国的一个极为严重的漏洞——盗版搞出来的东西有两个无法超越的优势：第一是价格，即使是每小时几毛钱的网游，也不可能跟5块钱玩几个星期、一个月的游戏抗衡；第二是软件品质的差距，这种差距在前文已经说到过——完全是石器时代和后工业时代的差距。要彻底解决这个问题的办法就是灭绝中国的一切盗版，但这在很长时间内都是不可能的——且不讨论灭绝盗版的可行性，就以中国现在的状况，灭绝盗版绝对会影响计算机的普及。当然，还有一种办法就是政府立法彻底禁止中国人谈论游戏主机，不过我想这会是社会大退步。</strong></p><p><strong>　　我曾经有一个理想，虽然说现在我已经放弃它了，但是我还是想带着几分羞耻把它说出来：我要用自己的努力和天赋为中国电子游戏行业打造一个稳固的根基，因为电子游戏是娱乐行业，它在中国不但有过去，现在，还有未来——它是中国从来没有过的新事物，它代表了新世纪的那种崭新的、上进的、充满了交流的娱乐观念，能够让一度闭关自守的中国人通过一个新的途径把自己与世界连接起来。对于我来说这是一个伟大的理想，但在有些人看来，它更像是一个夜总会老板的豪言壮语。在这里，我也不敢坚持我是对的，因为一个自己认为是好的事物竟然在中国屡屡成了什么性交易、杀父弑母的导火索，我也不好意思坚持自己在人格上是不可被怀疑的。但在外国，游戏却没什么不好，围绕它出现的社会问题并不比电影多——我觉得游戏没有错，错的是玩游戏的人和做游戏的人，是他们出了问题。</strong></p><p><strong>7、什么人在做游戏</strong></p><p><strong>　　做游戏的人问题本来就多了，刮了“自主研发风”以后问题就更多了，多得不禁让人倒抽一口凉气——游戏圈内正流行着这么一句话：现在自称能当企划的人能绕地球两圈半。一个知名游戏企业在上海公开招聘的时候只要求应征者写十个游戏名称，但即使如此，上千个前来应征的人也多的是写不完的。其他行业会拿十个书名，十个品牌名来做题目吗？考验难度如此之低，也还是有不少人无法通过。这还仅仅是应征，如果在看这篇文章的诸位曾目睹过现在网络游戏都是由一些怎么样的人，用怎么样的方法来做，你们一定会觉得问题比这严重得多。</strong></p><p><strong>　　在我们的常识里面，开飞机要专业的，要经过训练的；做会计也是要专业的，要拿到证书的。我想说，做游戏也是要专业的，难道不是吗？好比说，你自称比较擅长RPG设计，或者说你想在这方面有所发展，那你对FF（最终幻想系列）要有个基本了解吧，对DQ（勇者斗恶龙系列）要有基本了解吧，对MM（魔法门）系列等世界公认的经典有所了解吧。这种要求在我看来一点都不过分——好比你自称很懂白话文就应该看过《阿Q正传》，自称精通中国文化总要看过四书五经，连这都没看过算什么懂了？但在那段人人踊跃做RPG的时期（现在只有圈内老人还记得了），还有现在MMRPG的自主研发时代，有多少年轻人光玩过一个仙剑奇侠传就燃起胸中无比热情跑进游戏圈来做游戏啊？有多少年轻人光玩过一个传奇就自以为很懂网络游戏跑来做游戏啊？虽然这里缺乏切实的数据，但是我凭我那么多年的观察可以判断，在这两个自主研发沸沸扬扬的年代，圈内一线制作的搞游戏设计、游戏策划的人里面大部分都是这种货色，而且一代不如一代。</strong></p><p><strong>　　自中国人开始做游戏起，年年都有人问“中国游戏怎么了”、“中国游戏路在何方”，同时年年都有尚不知游戏为何物、对游戏行业缺乏基本了解的人挤进游戏圈来。现在不要求你已经懂得了游戏是什么，但如果说连个约莫认识都没有是说不过去的。其实无知并不重要，重要的是要承认自己无知。但现在有谁承认自己无知了？有谁认真去学习了？别的我不敢说，就整个圈子搞设计策划的这批人来说，大部分都以为自己懂得的已经够够了，甚至可以开班收徒弟了。其实在日本同行面前，大家都是小学生，顶多就是一年级跟二年级的区别。现在圈内的资本家、领导者所以表现得如此无知，搞设计搞策划的这些人也有责任：无知而且自满，告诉人家自己什么都能做，其实除了抄袭就什么都不能做，甚至连抄都抄不过来。等资本家知道自己当了冤大头，项目多半已经完蛋了，这种事情在业内难道还少吗？日本游戏行业也不见得公司领导层里都是游戏方面的行家，人家所以还能搞得蒸蒸日上，因为底下搞制作的这些人很有专业水平，很靠得住。现在做游戏的人所以普遍给人印象是职业水平低下的、靠不住的，说到底是因为这帮人里面混杂了许多外行，他们根本是来混饭的。</strong></p><p><strong>　　我不是在苛求中国游戏制作者，而是，虽然有些事情你在中国确实做不到，要么要做到就要付出极高的代价。其他的还罢，首先要玩懂一些在游戏发展历史上占有重要地位的游戏，对于很多人来说就不是容易的事情：这些游戏通常都没有中文版本，要不就是翻译得极其糟糕（在我看来）。想要真正的玩懂，在玩的过程中领会许多游戏设计技巧，就必须扔开一切可供参考的所谓游戏攻略，实实在在看懂游戏中的每一段对白，老老实实地把游戏玩一遍而不是依据什么指南“过”一遍。这首先需要时间，其次需要至少一门外语的一定的语文水平（这里是指语文水平——也就是说，仅仅有哑巴外语、应试外语的水平是不够的）。更有某些特殊的平台上特殊的游戏让人不得不买正版，就对财力有所要求了。再说，在中国玩游戏还一度跟吸食海洛因是同等性质的，如何能避免家里人要死要活地劝说，还得看个人的造化修为。</strong></p><p><strong>　　坦白的说，我基本具备了上述条件，但正因为我有这样的条件，我才知道要达到这种程度有多不容易。有些事情他们做不到也不怪他们，因为这些事情是根本没办法单靠游戏业内的改变去解决的。</strong></p><p><strong>　　李敖先生曾说，其实没有台湾问题，根本是个美国问题，中国跟美国的问题。我在此也要说，其实没有中国游戏行业发展问题，只有中国教育问题。教育跟游戏制作有关系吗？有的。所谓“幸福源于参差多态”（罗素语），电子游戏的乐趣也是源于参差多态的。如果所有的游戏都是一种思路做出来的，就没有现在的电子游戏行业了。游戏行业还很年轻，不存在这样或者那样的登山宝训或者权威理论，只有着思想与思想之间碰撞产生的火花，巨大的成功与惨痛的失败。即使是游戏行业已经高度发展的日本，游戏制作的职业培训也尚未成熟，特别是很多游戏理念、游戏理论的认同仍然需要靠山内溥、三上真司这样的业界精神领袖来维系。真因为如此，在游戏行业从事一线研发有着许多不确定性，但同时这也是一种没有各种思维上的条条框框限制的工作。经验靠自己积累，现象靠自己观察，问题要自己解决，在游戏行业要做好事情就必须保持良好的理解能力，严谨的分析能力和不拘一格的创造能力。可惜，这些内容并不为中国应试教育所关注。</strong></p><p><strong>　　存在就是合理，应试教育在多少人的非议下还能纹丝不动是有道理的：中国国土面积大，人口众多，地区贫富悬殊，地方对教育的投入也极其悬殊。面对这种情况，教育制度的定制就只能就低不就高，力求用最小的投入产出最多的效果。应试教育就完全符合以上所有条件：它可以高效的，批量的产出人才（典型的填鸭式教育），又可以用比较低的成本检验成果（分数代表一切）。这是一种无差异化的教育，产出的人才会有同样的优势，例如世界一直公认中国学生算术做得好（但大数学家却屈指可数），也会有同样的缺陷，其中一点就是现在人们经常提起的群体性知识缺陷，群体性能力缺陷。例如，老一辈人常说，现在的人语文真是差劲。的确，应试教育能够让几岁的孩子背完唐诗三百首，能够让高考学生大篇大篇的背诵范文，但这显然丝毫不能促进他们对祖国语言有多少了解。原因很简单，因为理解能力的提高不是靠死记硬背别人的解释（包括段落大意、中心思想等等），而是要经过各种关于活学活用的锻炼。的确，我不怀疑他们背的东西都是经典，但是学习经典的最终目的不是要变成重复古人话语的留声机，变成自己思想中的条条框框，而是通过熟悉经典而达到引经据典、为我所用的境界。说到这里，我禁不住要提出一个奇怪的现象：游戏行业本身并没有产生出什么理论权威，没有产生出什么条条框框，但居于世界游戏行业底层的、玩游戏或者做游戏的中国人总是企图为游戏设立什么条条框框。《电子游戏软件》上出现的“天师现象”算是一个典型：对某一种、某一类的游戏总是有着近乎天生的、莫名其妙的仇恨，声称非某某游戏不玩，非某某公司出品不玩等，声称只有某些游戏才是经典，其他游戏一律是不入流的货色。这里姑且不怀疑这些游戏究竟是不是经典——本来玩玩经典游戏不是什么坏事，但某些人玩经典玩中毒了，他就是认为游戏就是要做成某一个游戏那样才叫做好玩、有趣，乃至到了不是经典不玩，不像经典就不玩，唯经典是瞻的地步。等这样的人进了游戏公司，事情就麻烦了，你会发现你他们对游戏设计根本没有任何理解能力，跟他们谈许多设计问题简直就是对牛弹琴，因为他们根本不曾接触经典以外的游戏，哪怕是一些尽管不够经典但是很有设计参考价值的游戏。在学生时代习惯于从经典里面不加理解地找绝对真理的他们，把这种习惯完完全全地搬到游戏行业里面——此处已经排除了他们借鉴的经典不够“经典”的可能，那种由于借鉴了一个坏的设计导致整个项目乱七八糟的情况我是见过的。</strong></p><p><strong>　　没有理解就更没有分析。可以被称之为“玩家”的中国人在游戏杂志里，平日的言谈里总是离不开这三个字：可玩性。游戏好玩他们就说有“可玩性”，游戏不好玩就是没有“可玩性”，甚至说一个游戏好玩是因为它有“可玩性”，不好玩是因为它没有——“可玩性”之于游戏就仿佛如那玩意儿之于人——要判断游戏好玩不好玩跟判别男女同样简单，只需往裤裆下面伸手一摸就知道了。请问事情有那么简单吗？“可玩性”是一种已经成为共识的概念吗？我从未见过有人对这个词作过相关的论证。而且，爱用“可玩性”说事的人都忽略了一个问题，就是游戏受众问题。有的游戏你觉得好玩，我觉得不好玩，这时候你跟我谈“可玩性”就没有意义了。我在拙文《谈谈游戏作品分析》里写道过，“无论他们举出多少游戏设计去支撑他们的“可玩性”，都无外乎是证明了“可玩性”这样的出身：在他们有精力、有时间、有机会玩到的游戏里面，挑选出他们可以理解的、认为好玩的，再使用这样或那样的方法归纳出他们认为这些游戏好玩的地方。说到底，‘可玩’即是说话人‘可以玩’，‘可玩性’对说话人是没要求的。”请问这种模棱两可的概念拿得出来分析论证问题吗？应试教育经常给出“诚信”、“民族大义”这样的题目让学生们“自由发挥”，但却丝毫没有培养他们的逻辑思维，更没有给予他们最基本的哲学素养。没有逻辑思维的脑袋就是不觉得“好玩的游戏就有可玩性，有可玩性的游戏就好玩”有什么问题；没有哲学素养的结果就是搞了半天都不知道“可玩性”只是一个他们自己搞出来蒙自己的概念——我却见过不知多少做了数年游戏的人张嘴闭嘴就是“可玩性”！</strong></p><p><strong>　　很久以前，有个游戏圈的前辈跟我说过，他觉得做游戏最重要就是从别人的游戏中学习。这话大抵没错——游戏行业太新了，如果不能从别人做的游戏里面学你根本就什么都不知道。但看看做游戏的这些人，多数一没有理解能力二没有分析能力，你让他们怎么去学。如果说他们什么都不用学就能创造，这就更扯淡了——脱离有效率的学习和借鉴之创造纯属异想天开，更何况中国学生创造能力全球倒数已经不是什么新闻了。不明白行业状况的读者可能会说，我这是在抹黑同行。但我哪里是在抹黑同行，我刚才说的这些人已经是真的为游戏行业动过脑筋的人了，他们已经算是真正做游戏的人了。刮“自主研发风”以后，因为找不到工作跑到游戏行业来混饭的大学生们问题更多，我根本不敢放到文章里面谈。</strong></p><p><strong>　　发达国家的教育重视培养人对人的理解，中国现在的应试教育强调的是培养人对死物的理解。中国的官样文章里面有句话形容现在的教育现状，叫做“片面追求升学率”，意思是说追求升学率是件好事，但片面就不好了。我却以为，不以人为本的教育完全就是误人子弟。诸位，你们可能跟我一样都看到以下状况——很多的游戏制作人，他们把自己做的东西吹得天花乱坠，但绝口不提一点，就是他们的东西是做给人玩的。玩过国产游戏的都应该懂我的意思，有些国产游戏第一个场景就叫人如入地狱，看上去这种游戏更像是做给制作人自己玩的。游戏是做给人玩的，这是最显浅的道理，但很多人就是不这样认为，他们就是觉得游戏是做给猪玩的。持这样的理解做游戏只好做出一些不知道给谁玩的东西出来——相比起来什么理解能力、创造能力的缺失反而是末节。我们的应试教育只承认人的一种天赋，就是吸收知识然后把它写在纸上的天赋。但游戏行业要发展，就需要有着各种各样不同天赋的人，去做各种不同的事情，各样不同的游戏。有着大概一摸一样能力、大致一摸一样的想法的人注定只能做本质上一摸一样的东西，就像工厂流水线里做出来的东西一样——在游戏行业，同质化加上粗制滥造的产品是经不起考验的，一旦和别人的好东西面对面较量，立马就要摧枯拉朽。今日中国游戏行业过度营销背后的游戏产品正是这样的东西，但很多人觉得这还不够，还要加把劲“自主研发”。</strong></p><p><strong>　　可能你们会以为我扯得太远了，游戏行业和教育大概没有这么多直接关系。但事实上，游戏制作的进行极为依靠集中脑力劳动的人力资源，教育对于游戏制作来说实在是太重要了，我国教育的现状限制了我国游戏行业的发展。最近《南方日报》里面的一篇叫做《不能让一个大学生因贫失学》的文章谈到了一些很有说服力的事实：</strong></p><p><strong>　　“人是一个国家最宝贵的财富。日本、德国、瑞士等自然资源贫乏的国家之所以繁荣富强，高素质的国民是最为关键的原因，而这又源于政府对教育的重视。一年前热播的电视剧《走向共和》又一个经典场面，甲午战争后日本获得巨额赔款，首相要求用一部分改善国民生活，天皇坚决拒绝，说：‘全部用来办教育。’二次大战后，日本国民一度食不果腹，但政府对教育拨款却从不吝啬。”</strong></p><p><strong>　　“反观我国，重视教育年年都说，可一到编制政府预算的时候就总要打折扣。‘九五’计划规定教育支出占GDP的比重到20世纪末要达到4％（世界平均水平是5.1％），可是现在要编制“十一五”计划了，这个目标还是没有实现。与此同时，贫困大学生的比例越来越高，因贫失学的压力越来越大。”</strong></p><p><strong>　　有了这样的数目的、这样持续的教育投入去支持日本游戏行业的人力资源，日本游戏行业从一无是处到今日的如日中天。我们一度有“大力提倡素质教育”那么一说，最后又怎么样呢？我国就这样的教育投入，要等着低成本的应试教育模式垮台可以说是遥遥无期。然而，这种教育产出的人力资源根本不适合游戏行业，无法有效转化为游戏行业的人力资本。在以研发制作为核心的游戏行业，没有人力资本方面的优势就等同没有核心竞争力，这才是中国游戏行业的发展问题所在。</strong></p><p><strong>　　游戏行业不行，游戏产品有责任；游戏产品不行，做游戏的有责任。做游戏的人太差劲，教育有责任。别看中国人多，几千万文盲摆在那里，拿了大学文凭的人素质可能还不如别人高中生，全国适合做游戏的人加起来大概还没有日本一个省适合做游戏的人多。人力资源贬乏直接造成了游戏行业人力资本的贬乏，此时大力发展游戏产业必定会加速产业空洞化。我承认，自己不但给文章起了个“没有明天”的题目，还通篇用描写“大炼钢铁”的方式去写现在吹得沸沸扬扬的“自主研发”，大有诋毁现在游戏行业发展形势一片大好的险恶用心。然而，我有很多朋友在年轻的时候也是头脑发热跑进游戏圈做事，到了现在已过而立之年，弄得不上不下，唯有在游戏圈撕混下去。现在有很多同样头脑发热的大学生纷纷涌进游戏行业做事，他们比起上一代的这些“愤青”对游戏了解得更少。同样的事情眼见再次发生，我就觉得，如果现在中国游戏行业能萧条下来，让这些至少受过教育的年轻人致力于其他行业，对中国，对中国游戏行业在数十年后的发展，都会是好事一件。</strong></p><p><br><strong>　　8、什么人在玩游戏</strong></p><p><strong>　　根据现在中国大众传媒的定义，在FC时代甚至更早时候就开始玩游戏的人已经完全被排除在“游戏玩家”这个群体以外——要被称为游戏玩家，电子游戏你要玩实况足球，电脑游戏你玩CS、星际争霸，网络游戏你要玩什么《传奇》、《RO》……按照某种说法，这是前网游时代玩家与网游时代玩家的区别。笔者作为前者中的一员，万万不敢证明自己就有什么优越性，甚至我认为这两个群体在本质上是非常相似的，那就是他们其实不懂得什么才是娱乐，游戏的吸引力又太大——还没等他们对什么是娱乐，什么是游戏有一个基本了解，就掉进游戏里面去了。在以前，街机房简直是一个令父母家长闻之色变的地方，现在的网吧则直接取替了它的地位，仅此而已。</strong></p><p><strong>　　作为过来人，我也有玩游戏玩得天昏地暗的时候，也有偷遛进街机房被学校抓到通报批评的时候。当年我在学校大会上挨批，面红耳赤地站着听台上的学校领导训话，心里就暗想：十年以后，我们一定可以光明正大地玩游戏。十年过去了，我已不再年轻，才明白这种想法有多么幼稚。</strong></p><p><strong>　　王小波曾言，“正常的性心理是把性当作生活中一件重要的事，但不是全部。不正常则要么不承认有这回事，要么除此之外什么都不想。假如一个社会的性心理不正常，那就会两样都占全。”在这里，我们可以顺理成章地把“性”替换成“游戏”，因为中国人的游戏心理同样不正常。早在许多年前，胡适就曾写文章批评中国人玩麻将没日没夜，浪费了时间耽误了中国人。时至今日，中国人对待娱乐方面的态度仍然没有多大改善，整个中国社会仍未从舆论、教育、学术方面对此作出反思，每次发现问题就是迫不及待地去查，去堵，没有人真真正正地像胡适这样去观察、去发现问题，更没有谁实实在在地去解决问题。问题长期不解决的恶果就是久治不愈：主角换了，由麻将换成了家用机、街机游戏再到今天的网络游戏，以前有欠下赌债卖房子卖儿女，今日有为了个把“武器”出卖肉体、自杀、甚至杀父弑母。问题重重复复地出现，政府每次又重复地花费大量的社会资源去查堵。我不打算在这篇文章里谈社会问题——我更想以同为前游戏时代的玩家的身份，向前游戏时代的玩家们说一些我们正在亲身经历的事情。</strong></p><p><strong>　　我们是中国接触电子游戏最早的一批人，但我们中的许多人还是那样的不够水准。网游时代的玩家也是多数很不够水准，但是摆在他们面前的游戏跟我们玩过的游戏完全不一样。当年我们玩的都是什么？电子游戏是Super Mario，是Pacman，是FF，DQ，FE（火炎之纹章），是魂斗罗，Battle City（坦克大战）；PC上是三国志，大富翁，大航海时代1/2，信长之野望；街机上是SF2，恶狼传说系列、侍魂系列还有吞食天地、1942。就连那些为许多人所不齿的18禁游戏，例如当时红极一时的同级生系列也是世界级品质的东西，其中同级生更是恋爱游戏的“始祖鸟”，现在ILLUSION的那些丫丫乌出品绝不可以与之相提并论。我们玩了那么多一流的游戏。有言道，一流的读者不是天生的，他是培养出来的。我们赶上了时候，玩到了那么多第一流的，名声如雷贯耳的游戏，我们本来应该是第一流的玩家。可事实并不如此。</strong></p><p><strong>　　现在我们中的绝大多数人正在用一种莫名其妙的态度去对待游戏。很多玩家对某些公司，例如暴雪、SQUARE有着狂热的忠诚，“不许说它们坏话”。然而他们绝大部分人的支持仅仅是“在精神上”的，自称是FANS但是从来没有买过这些公司的一个正版。买盗版本身是偷窃行为，是对创作人利益的漠视——我看不出做游戏的人因为盗版得了什么FANS的支持——唯一的解释就是，在盗版问题上他们得了不同程度的精神分裂：声称热爱游戏，喜欢某个游戏制作人，私底下却在做着损人利己的勾当。他们还认为，活在中国最幸福的事情之一就是可以无拘无束地用盗版。日本和欧美的游戏定价都很高，新游戏平均50美元的定价对于平民百姓来说也不算低，每个玩家每年平均下来也就是买几个游戏。但人家就把这样的地方当作是必争之地。中国玩家买盗版每年动辄就是几十张上百张游戏（全是盗版），涉猎的范围是世界级的，对厂商名、系列名如数家珍——可是人家根本不相信你会真的为这些游戏掏钱，这也是我们老是等不到一流游戏出汉化版的原因之一。</strong></p><p><strong>　　玩游戏玩得多却不等于玩得好。中国人玩游戏，囫囵吞枣恐怕也是世界之最。以RPG游戏为例，中国玩家普遍的“玩过”标准是，匆匆看过对白甚至不看对白，对照着攻略过一遍就算是玩过。值得指出的是，与一般人的了解不同，他们所以不怎么认真对待对白不是因为语言问题，我就见过不少人放着英文版不买跑去买日文版，只因为一个很小的理由：日文版的字看上去更好看。对白？看着太累了，他们宁愿在通关以后买本游戏杂志看看所谓“小说攻略”。这是游戏态度问题。游戏对于中国人来说太廉价了，平均起来也就是五块钱一张，所以他们也用着仅价值5块钱的态度对待游戏。体验游戏是如此，思考任何关于游戏的问题也是如此。养成了这种恶劣的游戏习惯，游戏玩得越多，玩得越滥，就越容易造成游戏品味方面的“阳痿”，觉得个个游戏都差不多，也不想想其实是他自己的游戏体验出问题了。</strong></p><p><strong>　　谈到这里，诸位大概也明白了我的意思：要构成一个够水准的游戏行业，除了游戏制作者要够水准，玩家也要够水准。山内溥一度豪情万丈地说：“消费者追求的是从游戏中体会道独创的乐趣，因此才会买下游戏主机。这个道理，我们从过去一直到将来都不能有片刻的忘怀。”说归说，如果玩家不卖帐，任天堂也就只好倒闭了，很多好游戏我们就玩不到了。我们的水准还很不够，本应是第一流玩家的我们没有能力像日本玩家那样积极投身游戏行业，左右游戏行业的发展——我们甚至没有左右其他中国人对游戏的看法，游戏被打压的时候我们总是保持集体沉默，背后或唉声叹气，或暴跳如雷。</strong></p><p><strong>　　最近我在游戏店碰到一个玩游戏的漂亮女孩，她被人问到了一个古怪的问题：你为什么不买正版？她笑着说，游戏是短暂的。而我，多年以来坚持，游戏虽然短暂，可它带来了感动——而且是游戏制作人带来了感动。感动是永恒的，游戏制作人理应得到尊重。好好玩一个游戏，掏钱买自己认为值得玩的游戏，这才是尊重别人的表现，才是成年人应该有的游戏态度。忽然感觉自己老了。过了一个十年，我们已经不在年轻，中国人对待游戏的态度却依然是那样的幼稚。我们是不是应该问问自己，甚至问问每一个玩游戏的人：游戏对于我们来说究竟是什么？</strong></p><p><strong>　　说到这里离题有点远了——思考这个问题不仅仅是为了游戏行业，更是因为我们已经是成年人了，已经玩了很多很多的游戏，所以我们要明白我们之前做了些什么，还有以后怎么做。如果连我们也不能保有正常的游戏心理，如果连我们继续玩游戏玩得那么不够水准，很难象游戏在我们成为社会主流的明日会有什么好名声。我再重申，只因为我们是成年人了，为自己以前做过的事情承担责任，为以后要做的事情承担义务，对于我们来说是理所当然的事情——假如我们还想我们和我们的子孙在这方面有不被干涉的自由，不会再有一个以“救救孩子”为口号的愚蠢声音朝着我们乱吼。</strong></p><p><strong>　　断言中国游戏行业没有明天可能还为之过早，但这个明天也决不会是什么都不做、什么都不想就能够等来的明天。<br></strong></p></div><footer class=post-footer><div class=post-button><a class=btn href=/post/gaming-industry-reflection/#more rel=contents>阅读全文 &#187;</a></div><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" rel=prev href=/post/page/54/><i class="fa fa-angle-left"></i>
</a><a class=page-number href=/post/page/51/>51</a>
<a class=page-number href=/post/page/52/>52</a>
<a class=page-number href=/post/page/53/>53</a>
<a class=page-number href=/post/page/54/>54</a>
<span class="page-number current">55</span>
<a class=page-number href=/post/page/56/>56</a>
<a class=page-number href=/post/page/57/>57</a>
<a class=page-number href=/post/page/58/>58</a>
<a class=page-number href=/post/page/59/>59</a>
<a class="extend next" rel=next href=/post/page/56/><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2026
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.157.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":false,"isPage":false,"path":"post","permalink":"https://blogs.qipai360.cn/post/","title":"Posts","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1772265585" defer></script></body></html>