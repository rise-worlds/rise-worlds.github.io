<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Direct3D极速入门宝典"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="direct3d,graphics"><meta property="og:type" content="article"><meta property="og:title" content="Direct3D极速入门宝典"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/direct3d-quick-start-guide/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Rise"><meta property="article:published_time" content="2007-03-30 09:00:00 +0800 +0800"><meta property="article:modified_time" content="2007-03-30 12:14:00 +0800 +0800"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761990627"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>Direct3D极速入门宝典 - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>678</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>678</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>34</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>117</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2418817></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5198></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-11-01 14:55:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/direct3d-quick-start-guide/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Direct3D极速入门宝典"><meta itemprop=description content="&nbsp;&nbsp;　&nbsp;其实DirectX9.0里有非常详细的教程和参考，大多数人只需要看看这些帮助就可以自己学习D3D了，我的这篇文章适合那些很懒但想快速入门、不懂英文或编程知识很欠缺的人看。装好DirectX9.0后，打开VC.net，新建一个Win32工程，在StdAfx.h里添加下面的语句："></span><header class=post-header><h1 class=post-title itemprop="name headline">Direct3D极速入门宝典</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年03月30日 09:00:00 CST" itemprop="dateCreated datePublished" datetime="2007-03-30 09:00:00 +0800 +0800">2007年03月30日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2007年03月30日 12:14:00 CST" itemprop="dateModified dateLastmod" datetime="2007-03-30 12:14:00 +0800 +0800">2007年03月30日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>6135</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>13分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/direct3d-quick-start-guide/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><font face="Courier New">&nbsp;&nbsp;　&nbsp;<span style=font-size:9pt>其实DirectX9.0里有非常详细的教程和参考，大多数人只需要看看这些帮助就可以自己学习D3D了，我的这篇文章适合那些很懒但想快速入门、不懂英文或编程知识很欠缺的人看。装好DirectX9.0后，打开VC.net，新建一个Win32工程，在StdAfx.h里添加下面的语句：</span></font></p><a id=more></a><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;#include &amp;lt;d3d9.h&amp;gt; // D3D&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;标准头文件&lt;br&gt;#include &amp;lt;D3dx9math.h&amp;gt; // D3D数学库头文件&lt;br&gt;#include &amp;lt;stdio.h&amp;gt; // 这个不用我说了吧？&lt;br&gt;#pragma comment( lib, &quot;d3d9&quot; ) // D3D的静态库&lt;br&gt;#pragma comment( lib, &quot;d3dx9&quot; ) // D3D数学库的静态库&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">然后把winmain所在文件的代码做如下的修改：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;#include &quot;stdafx.h&quot;&lt;br&gt;#define &lt;/font&gt;&lt;a href=&quot;http://www.yesky.com/key/1435/156435.html&quot; target=_blank&gt;&lt;font face=&quot;Courier New&quot;&gt;MAX&lt;/font&gt;&lt;/a&gt;&lt;font face=&quot;Courier New&quot;&gt;_LOADSTRING 100&lt;br&gt;&lt;br&gt;HINSTANCE g_hInst;&lt;br&gt;HWND g_hWnd;&lt;br&gt;IDirect3D9 *g_pD3D;&lt;br&gt;IDirect3DDevice9 *g_pd3dDevice;&lt;br&gt;IDirect3DVertexBuffer9 *g_pVB;&lt;br&gt;&lt;br&gt;TCHAR szTitle[&lt;/font&gt;&lt;a href=&quot;http://www.yesky.com/key/1081/161081.html&quot; target=_blank&gt;&lt;font face=&quot;Courier New&quot;&gt;MAX&lt;/font&gt;&lt;/a&gt;&lt;font face=&quot;Courier New&quot;&gt;_LOADSTRING];&lt;br&gt;TCHAR szWindowClass[MAX_LOADSTRING];&lt;br&gt;ATOM MyRegisterClass(HINSTANCE hInstance);&lt;br&gt;BOOL InitInstance(HINSTANCE, int);&lt;br&gt;LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);&lt;br&gt;LRESULT CALLBACK About(HWND, UINT, WPARAM, LPARAM);&lt;br&gt;void OnIdle( void );&lt;br&gt;void OnCreate( HWND hWnd );&lt;br&gt;HRESULT InitD3D( void );&lt;br&gt;HRESULT CreateObject( void );&lt;br&gt;void ReleaseD3D( void );&lt;br&gt;HRESULT SetModalMatrix( void );&lt;br&gt;HRESULT SetProjMatrix( WORD wWidth, WORD wHeight );&lt;br&gt;void BeforePaint( void );&lt;br&gt;int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)&lt;br&gt;{&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;　MSG msg;&lt;br&gt;　HACCEL hAccelTable;&lt;br&gt;&lt;br&gt;　LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);&lt;br&gt;　LoadString(hInstance, IDC_D3DTEST, szWindowClass, MAX_LOADSTRING);&lt;br&gt;　MyRegisterClass(hInstance);&lt;br&gt;&lt;br&gt;　if (!InitInstance (hInstance, nCmdShow)) &lt;br&gt;　{&lt;br&gt;　　return FALSE;&lt;br&gt;　}&lt;br&gt;&lt;br&gt;　hAccelTable = LoadAccelerators(hInstance, (LPCTSTR)IDC_D3DTEST);&lt;br&gt;&lt;br&gt;　while ( true )&lt;br&gt;　{&lt;br&gt;　　if ( PeekMessage( &amp;amp;msg, NULL, 0, 0, PM_REMOVE ) )&lt;br&gt;　　{&lt;br&gt;　　　if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;amp;msg)) &lt;br&gt;　　　{&lt;br&gt;　　　　TranslateMessage(&amp;amp;msg);&lt;br&gt;　　　　DispatchMessage(&amp;amp;msg);&lt;br&gt;　　　}&lt;br&gt;　　continue;&lt;br&gt;　　}&lt;br&gt;　　if ( WM_QUIT == msg.message )&lt;br&gt;　　{&lt;br&gt;　　　break;&lt;br&gt;　　}&lt;br&gt;　　OnIdle();&lt;br&gt;　}　&lt;br&gt;　UnregisterClass( szWindowClass, g_hInst );&lt;br&gt;　return (int)msg.wParam;&lt;br&gt;}&lt;br&gt;&lt;br&gt;ATOM MyRegisterClass( HINSTANCE hInstance )&lt;br&gt;{&lt;br&gt;　WNDCLASSEX wcex;&lt;br&gt;　wcex.cbSize = sizeof(WNDCLASSEX); &lt;br&gt;　wcex.style = CS_HREDRAW | CS_VREDRAW;&lt;br&gt;　wcex.lpfnWndProc = (WNDPROC)WndProc;&lt;br&gt;　wcex.cbClsExtra = 0;&lt;br&gt;　wcex.cbWndExtra = 0;&lt;br&gt;　wcex.hInstance = hInstance;&lt;br&gt;　wcex.hIcon = LoadIcon(hInstance, (LPCTSTR)IDI_D3DTEST);&lt;br&gt;　wcex.hCursor = LoadCursor(NULL, IDC_ARROW);&lt;br&gt;　wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);&lt;br&gt;　wcex.lpszMenuName = (LPCTSTR)IDC_D3DTEST;&lt;br&gt;　wcex.lpszClassName = szWindowClass;&lt;br&gt;　wcex.hIconSm = LoadIcon(wcex.hInstance, (LPCTSTR)IDI_SMALL);&lt;br&gt;　return RegisterClassEx(&amp;amp;wcex);&lt;br&gt;}&lt;br&gt;&lt;br&gt;BOOL InitInstance( HINSTANCE hInstance, int nCmdShow )&lt;br&gt;{&lt;br&gt;　g_hInst = hInstance;&lt;br&gt;　CreateWindow( szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL );&lt;br&gt;　if ( !g_hWnd )&lt;br&gt;　{&lt;br&gt;　　return FALSE;&lt;br&gt;　}&lt;br&gt;　ShowWindow( g_hWnd, nCmdShow );&lt;br&gt;　UpdateWindow( g_hWnd );&lt;br&gt;　return TRUE;&lt;br&gt;}&lt;br&gt;&lt;br&gt;LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)&lt;br&gt;{&lt;br&gt;　int wmId, wmEvent;&lt;br&gt;　&lt;/font&gt;&lt;a href=&quot;http://www.yesky.com/key/656/160656.html&quot; target=_blank&gt;&lt;font face=&quot;Courier New&quot;&gt;switch&lt;/font&gt;&lt;/a&gt;&lt;font face=&quot;Courier New&quot;&gt; (message) &lt;br&gt;　{&lt;br&gt;　　case WM_CREATE:&lt;br&gt;　　　OnCreate( hWnd );&lt;br&gt;　　　break;&lt;br&gt;　　case WM_COMMAND:&lt;br&gt;　　　wmId = LOWORD(wParam); &lt;br&gt;　　　wmEvent = HIWORD(wParam); &lt;br&gt;　　　switch (wmId)&lt;br&gt;　　　{&lt;br&gt;　　　　case &lt;/font&gt;&lt;a href=&quot;http://www.yesky.com/key/2371/152371.html&quot; target=_blank&gt;&lt;font face=&quot;Courier New&quot;&gt;IDM&lt;/font&gt;&lt;/a&gt;&lt;font face=&quot;Courier New&quot;&gt;_EXIT:&lt;br&gt;　　　　　DestroyWindow(hWnd);&lt;br&gt;　　　　　break;&lt;br&gt;　　　　default:&lt;br&gt;　　　　　return DefWindowProc(hWnd, message, wParam, lParam);&lt;br&gt;　　　}&lt;br&gt;　　　break;&lt;br&gt;　　case WM_SIZE:&lt;br&gt;　　　SetProjMatrix( LOWORD( lParam ), HIWORD( lParam ) );&lt;br&gt;　　　break;&lt;br&gt;　　case WM_DESTROY:&lt;br&gt;　　　ReleaseD3D();&lt;br&gt;　　　PostQuitMessage(0);&lt;br&gt;　　　break;&lt;br&gt;　　default:&lt;br&gt;　　　return DefWindowProc(hWnd, message, wParam, lParam);&lt;br&gt;　}&lt;br&gt;　return 0;&lt;br&gt;}&lt;br&gt;&lt;br&gt;void OnCreate( HWND hWnd )&lt;br&gt;{&lt;br&gt;　g_hWnd = hWnd;&lt;br&gt;　InitD3D();&lt;br&gt;　CreateObject();&lt;br&gt;}&lt;br&gt;&lt;br&gt;void ReleaseD3D( void )&lt;br&gt;{&lt;br&gt;}&lt;br&gt;&lt;br&gt;HRESULT InitD3D( void )&lt;br&gt;{&lt;br&gt;　return S_OK;&lt;br&gt;}&lt;br&gt;&lt;br&gt;void BeforePaint( void )&lt;br&gt;{&lt;br&gt;}&lt;br&gt;&lt;br&gt;HRESULT CreateObject( void )&lt;br&gt;{&lt;br&gt;　return S_OK;&lt;br&gt;}&lt;br&gt;&lt;br&gt;void OnIdle( void )&lt;br&gt;{&lt;br&gt;}&lt;br&gt;&lt;br&gt;HRESULT SetModalMatrix( void )&lt;br&gt;{&lt;br&gt;　return S_OK;&lt;br&gt;}&lt;br&gt;&lt;br&gt;HRESULT SetProjMatrix( WORD wWidth, WORD wHeight )&lt;br&gt;{&lt;br&gt;　return S_OK;&lt;br&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div><span style=font-size:9pt><font face="Courier New">　　上面的代码仅是一个框架，仔细研究过上篇文章的朋友应该非常清楚这些代码的含意，不过我还是需要大至讲解一下。在InitInstance函数中，初始化程序实例的开始，我们将该实例的句柄放到全局变量中去，以便以后使用：<br><br>g_hInst = hInstance;<br><br>　　在创建窗体时，我并没有直接将CreateWindow的返回值——创建成功的窗体句柄赋给全局变量g_hWnd，因为CreateWindow函数在执行中会引发几个消息，其中有WM_CREATE，在这个消息的处理函数中OnCreate中，我执行了下面的语句：<br><br>g_hWnd = hWnd;<br><br>　　这样，我们就可以早一点用到g_hWnd了。SetProjMatrix是设置投影矩阵的，投影矩形仅受窗口纵横比影响，所以在WM_SIZE事件时调用时就可以了。而SetModalMatrix是设置模型矩阵的，也就是眼睛点和视点之类的东东，所以它一定要在Rander的时候，准确的说是在Render之前执行。InitD3D在窗体创建时调用，用于初始化D3D设备。CreateObject和InitD3D一样是初始化函数，它用于创建三维对象。</font></span></div><div><span style=font-size:9pt><font face="Courier New">下面我们来填写代码，首先是初始化，我们在InitD3D函数里填写下面的代码：</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pD3D = Direct3DCreate9( D3D_SDK_VERSION );</font></span></div><div><span style=font-size:9pt><font face="Courier New">if( NULL == g_pD3D )</font></span></div><div><span style=font-size:9pt><font face="Courier New">{</font></span></div><div><span style=font-size:9pt><font face="Courier New">return E_FAIL;</font></span></div><div><span style=font-size:9pt><font face="Courier New">}</font></span></div><div><font face="Courier New">&nbsp;</font></div><div><span style=font-size:9pt><font face="Courier New">D3DPRESENT_PARAMETERS d3dpp;</font></span></div><div><span style=font-size:9pt><font face="Courier New">ZeroMemory( &amp;d3dpp, sizeof(d3dpp) );</font></span></div><div><span style=font-size:9pt><font face="Courier New">d3dpp.Windowed = TRUE;</font></span></div><div><span style=font-size:9pt><font face="Courier New">d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;</font></span></div><div><span style=font-size:9pt><font face="Courier New">d3dpp.BackBufferFormat = D3DFMT_A8R8G8B8;</font></span></div><div><font face="Courier New">&nbsp;</font></div><div><span style=font-size:9pt><font face="Courier New">g_pD3D->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, g_hWnd,</font></span></div><div><span style=font-size:9pt><font face="Courier New">D3DCREATE_HARDWARE_VERTEXPROCESSING | D3DCREATE_PUREDEVICE,</font></span></div><div><span style=font-size:9pt><font face="Courier New">&amp;d3dpp, &amp;g_pd3dDevice );</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pd3dDevice->SetRenderState( D3DRS_LIGHTING, TRUE );</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pd3dDevice->SetRenderState( D3DRS_AMBIENT,</font></span></div><div><span style=font-size:9pt><font face="Courier New">D3DCOLOR_COLORVALUE( 0.3f, 0.3f, 0.3f, 1.0 ) );</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pd3dDevice->LightEnable( 0, TRUE);</font></span></div><div><font face="Courier New">&nbsp;</font></div><div><span style=font-size:9pt><font face="Courier New">D3DMATERIAL9 mtrl;</font></span></div><div><span style=font-size:9pt><font face="Courier New">ZeroMemory( &amp;mtrl, sizeof(mtrl) );</font></span></div><div><span style=font-size:9pt><font face="Courier New">mtrl.Diffuse.r = mtrl.Ambient.r = 140.0f / 255.0f;</font></span></div><div><span style=font-size:9pt><font face="Courier New">mtrl.Diffuse.g = mtrl.Ambient.g = 200.0f / 255.0f;</font></span></div><div><span style=font-size:9pt><font face="Courier New">mtrl.Diffuse.b = mtrl.Ambient.b = 255.0f / 255.0f;</font></span></div><div><span style=font-size:9pt><font face="Courier New">mtrl.Diffuse.a = mtrl.Ambient.a = 1.0f;</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pd3dDevice->SetMaterial( &amp;mtrl );</font></span></div><div><span style=font-size:9pt><font face="Courier New">return S_OK;</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　Direct3DCreate9函数为我们创建了一个D3D接口指针，并将接口指针返回到全局变量中保存起来，参数必须为D3D_SDK_VERSION。D3DPRESENT_PARAMETERS是一个结构体，它就像OpenGL中的PixelFormat一样，是创建时指定设备的一些属性的。</font></span></div><div><span style=font-size:9pt><font face="Courier New">d3dpp.Windowed = TRUE; // </font></span><span style=font-size:9pt><font face="Courier New">设备是窗口设备而不是全屏<br>d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD; // 翻转缓冲区时不改动后台缓冲<br>d3dpp.BackBufferFormat = D3DFMT_A8R8G8B8; // ARGB颜色模式</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　在这之后，我们就可以调用CreateDevice来创建设备了，第一个参数指定使用主显示驱动，第二个参数指定该设备是否使用硬件来处理显示，第三个参数当然是你的窗体句柄，第四个参数如果指定D3DCREATE_HARDWARE_VERTEXPROCESSING | D3DCREATE_PUREDEVICE效率会提高不少。</font></span></div><div><span style=font-size:9pt><font face="Courier New">g_pd3dDevice->SetRenderState( D3DRS_LIGHTING, TRUE );<br>g_pd3dDevice->SetRenderState( D3DRS_AMBIENT, D3DCOLOR_COLORVALUE( 0.6f, 0.6f, 0.6f, 1.0 ) );&nbsp;</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　这两句用于打开灯光和设置环境光照颜色。接着我设置了材质：</font></span></div><div><span style=font-size:9pt><font face="Courier New">mtrl.Diffuse.r = mtrl.Ambient.r = 140.0f / 255.0f;<br>mtrl.Diffuse.g = mtrl.Ambient.g = 200.0f / 255.0f;<br>mtrl.Diffuse.b = mtrl.Ambient.b = 255.0f / 255.0f;<br>mtrl.Diffuse.a = mtrl.Ambient.a = 1.0f;</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　为了和上一篇的例程做对比，我使用了相同的材质。当CreateDevice执行成功后，我们就该创建基于D3D的三维物体了。</font></span></div><div><span style=font-size:9pt><font face="Courier New">D3DVECTOR SrcBox[] = {<br></font></span><span style=font-size:9pt><font face="Courier New">　{ 5.0f, 5.0f, 0.0f }, { 5.0f, 5.0f, 10.0f },<br>　{ 5.0f, -5.0f, 0.0f }, { 5.0f, -5.0f, 10.0f },<br>　{-5.0f, -5.0f, 0.0f }, {-5.0f, -5.0f, 10.0f },<br>　{-5.0f, 5.0f, 0.0f }, {-5.0f, 5.0f, 10.0f },<br>};</font></span></div><div><span style=font-size:9pt><font face="Courier New">WORD wIndex[] ={<br></font></span><span style=font-size:9pt><font face="Courier New">　0, 4, 6, 0, 2, 4,<br>　0, 6, 7, 0, 7, 1,<br>　0, 3, 2, 0, 1, 3,<br>　5, 2, 3, 5, 4, 2,<br>　5, 6, 4, 5, 7, 6,<br>　5, 1, 7, 5, 3, 1,<br>};</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　要说明的是D3D为我们准备了很好用的结构体D3DVECTOR，封装了三维座标的X、Y和Z。我们还需要再定义一个我们自己的结构体来存放我们的三维座标信息：</font></span></div><div><span style=font-size:9pt><font face="Courier New">struct CUSTOMVERTEX<br>{<br></font></span><span style=font-size:9pt><font face="Courier New">　D3DVECTOR pos;<br>　D3DVECTOR normal;<br>};&nbsp;</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　第一个成员pos用来存储顶点座标数据，第二个成员normal用来存储这个点所在平面的法向量——这个概念我在上一篇讲过的。和OpenGL一样，我们同样需要按索引序展开顶点数组：</font></span></div><div><span style=font-size:9pt><font face="Courier New">CUSTOMVERTEX ExpandBox[sizeof(wIndex) / sizeof(WORD)];<br>for ( int i = 0; i &lt; 36; i++ )<br>{<br></font></span><span style=font-size:9pt><font face="Courier New">　ExpandBox[i].pos = SrcBox[ wIndex[i] ];<br>}</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　然后用下面的代码为顶点计算法向量。</font></span></div><div><span style=font-size:9pt><font face="Courier New">for ( i = 0; i &lt; 12; i++ )<br>{<br></font></span><span style=font-size:9pt><font face="Courier New">　D3DVECTOR Tri[3];<br>　Tri[0] = ExpandBox[ i * 3 + 0 ].pos;<br>　Tri[1] = ExpandBox[ i * 3 + 1 ].pos;<br>　Tri[2] = ExpandBox[ i * 3 + 2 ].pos;<br>　ExpandBox[ i * 3 + 0 ].normal.x = 0.0f;<br>　ExpandBox[ i * 3 + 0 ].normal.y = 0.0f;<br>　ExpandBox[ i * 3 + 0 ].normal.z = 1.0f;<br>　CalcNormal( Tri, &(ExpandBox[ i * 3 + 0 ].normal) );<br>　ExpandBox[ i * 3 + 1 ].normal = ExpandBox[ i * 3 + 0 ].normal;<br>　ExpandBox[ i * 3 + 2 ].normal = ExpandBox[ i * 3 + 0 ].normal;<br>}&nbsp;</font></span></div><div><span style=font-size:9pt><font face="Courier New">　　在这里我需要花点篇幅讲一个概念，一个仅在D3D中存在的概念FVF。D3D在处理显示数据时和OpenGL的方式不大一样，OpenGL是指定独立的数组，比如VertexBuffer、IndexBuffer、NormalBuffer等，而D3D是把每一个顶点的这些数据放在一起，组成一个单元进行处理，也就是说只有一个数组，而在数组的每一个元素中都包括了单个顶点的所有数据，所以他被称为Flexible Vertex Format，我刚才定义的结构体CUSTOMVERTEX也就是做为数组的一个单元。每一个单元可以包含你所需要的信息，比如你只需要顶点座标数据和颜色，那么你只需要对那个结构体稍加修改就可以了，但是怎么让D3D 知道你的结构体里包含哪些数据呢？当然，我们可以在CreateVertexBuffer的时候指定一个参数来告诉D3D：D3DFVF_XYZ | D3DFVF_NORMAL，在很多地方我们都可能用到这个值，所以为了方便使用和维护我们定义一个宏来表示它：</font></span></div><div style=margin-bottom:12pt><font face="Courier New"><span style=font-size:9pt>#define D3DFVF_CUSTOMVERTEX ( D3DFVF_XYZ | D3DFVF_NORMAL )<br></span><span style=font-size:9pt>那么到这里你可以会问另一个问题，也许D3D可以知道我们的元素里包含顶点的哪些数据，但D3D又是怎样得知这些数据在结构体里，也就是在内存中的排列顺序的呢？很不幸，D3D无法得知你的排列顺序，但D3D指定了这些数据的排列顺序，比如法向量一定在顶点后面，而颜色又一定要放在法向量后面。关于这个排列顺序表你得去看看MSDN里关于Vertex Formats的详细说明了。下面我们来创建顶点数组：</span></font></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;if( FAILED( g_pd3dDevice-&amp;gt;CreateVertexBuffer( sizeof(ExpandBox),&lt;br&gt;0, D3DFVF_CUSTOMVERTEX, D3DPOOL_DEFAULT, &amp;amp;g_pVB, NULL ) ) )&lt;br&gt;{&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;　return E_FAIL;&lt;br&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　这些参数上面都提到过，相信你一看就会明白，我就不多说了。怎样把我们的方盒数据存储进这创建好的顶点缓冲区呢？DirectX有自己的内存管理方式，也就是Lock和UnLock的模式：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;VOID* pVertices;&lt;br&gt;&lt;br&gt;if( FAILED( g_pVB-&amp;gt;Lock( 0, sizeof(ExpandBox), (void**)&amp;amp;pVertices, 0 ) ) )&lt;br&gt;&lt;br&gt;return E_FAIL;&lt;br&gt;&lt;br&gt;MoveMemory( pVertices, ExpandBox, sizeof(ExpandBox) );&lt;br&gt;&lt;br&gt;g_pVB-&amp;gt;Unlock();&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　和OpenGL一样，在初始化工作结束后，必须要做的另一件事就是设置矩阵，首先是投影矩阵，我们把这些代码加到SetProjMatrix函数中去：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;D3DXMATRIX matProj;&lt;br&gt;D3DXMatrixPerspectiveFovLH( &amp;amp;matProj, D3DX_PI/4, (float)wWidth / (float)wHeight, 1.0f, 100.0f );&lt;br&gt;&lt;br&gt;return g_pd3dDevice-&amp;gt;SetTransform( D3DTS_PROJECTION, &amp;amp;matProj );&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　然后是视图矩阵，把下面的代码加到SetModalMatrix中</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;static float fRadius = 0.5f;&lt;br&gt;fRadius -= 0.003f;&lt;br&gt;if ( fRadius &amp;lt; 0)&lt;br&gt;{&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;　fRadius = D3DX_PI * 2 ;&lt;br&gt;}&lt;br&gt;&lt;br&gt;D3DXMATRIX matWorld;&lt;br&gt;D3DXMatrixRotationZ( &amp;amp;matWorld, 0.0f );&lt;br&gt;if ( FAILED( g_pd3dDevice-&amp;gt;SetTransform( D3DTS_WORLD, &amp;amp;matWorld ) ) )&lt;br&gt;{&lt;br&gt;　return E_FAIL;&lt;br&gt;}&lt;br&gt;&lt;br&gt;D3DXMATRIX matView;&lt;br&gt;D3DXMatrixLookAtLH( &amp;amp;matView, &amp;amp;D3DXVECTOR3( cosf( fRadius ) * 40.0f, sinf( fRadius ) * 40.0f, 30.0 ), &amp;amp;D3DXVECTOR3( 0.0f, 0.0f, 0.0f ), &amp;amp;D3DXVECTOR3( 0.0f, 0.0f, 1.0f ) );&lt;br&gt;&lt;br&gt;g_pd3dDevice-&amp;gt;SetTransform( D3DTS_VIEW, &amp;amp;matView );&lt;br&gt;return S_OK;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　我想我不说你也可以理解这些代码的含义，是不是和OpenGL非常相似呢？好的，现在一切准备工作就续，现在我们可以开始绘制方盒了。找到OnIdel处理函数，然后在这里添加下面的代码：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;if ( g_pd3dDevice != NULL )&lt;br&gt;{&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;　g_pd3dDevice-&amp;gt;Clear( 0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(255,255,200), 1.0f, 0 );&lt;br&gt;　if ( SUCCEEDED( g_pd3dDevice-&amp;gt;BeginScene() ) )&lt;br&gt;　{&lt;br&gt;　　BeforePaint();&lt;br&gt;　　if ( FAILED( SetModalMatrix() ) )&lt;br&gt;　　{&lt;br&gt;　　　return;&lt;br&gt;　　}&lt;br&gt;　　g_pd3dDevice-&amp;gt;SetStreamSource( 0, g_pVB, 0, sizeof(CUSTOMVERTEX) );&lt;br&gt;　　g_pd3dDevice-&amp;gt;SetFVF( D3DFVF_CUSTOMVERTEX );&lt;br&gt;　　g_pd3dDevice-&amp;gt;DrawPrimitive( D3DPT_TRIANGLELIST, 0, 12 );&lt;br&gt;　　g_pd3dDevice-&amp;gt;EndScene();&lt;br&gt;　　g_pd3dDevice-&amp;gt;Present( NULL, NULL, NULL, NULL );&lt;br&gt;　}&lt;br&gt;} &lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　g_pd3dDevice->Clear相当于glClear， g_pd3dDevice->BeginScene和g_pd3dDevice->EndScene 相当于glBegin和glEnd，g_pd3dDevice->SetStreamSource 相当于glSet**Pointer，g_pd3dDevice->DrawPrimitive 相当于glDrawArray，g_pd3dDevice->Present相当于SwapBuffer，这里和OpenGL的不同之处在于D3D在这里要设备FVF，一个很简单的过程：<br><br>g_pd3dDevice->SetFVF( D3DFVF_CUSTOMVERTEX );<br><br>　　另外，D3D的背景色是在Clear的时候指定的。现在你可以运行你的程序了，但是你会发现，盒子是黑色的一片，那是因为你没有打开任何光源。而OpenGL在没有打开任何光源时物体是纯白色的，呵呵，具有一定的迷惑性哦~现在我们来打开一个灯，来照亮这个物体。就在BeforePaint里：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt&quot;&gt;

        &lt;div&gt;&lt;span style=&quot;FONT-SIZE: 9pt&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;D3DLIGHT9 light;&lt;br&gt;ZeroMemory( &amp;amp;light, sizeof(light) );&lt;br&gt;light.Position = D3DXVECTOR3( 30.0f, 30.0f, 30.0f );&lt;br&gt;light.Attenuation1 = 0.05f;&lt;br&gt;light.Diffuse.r = 1.0f;&lt;br&gt;light.Diffuse.g = 1.0f;&lt;br&gt;light.Diffuse.b = 1.0f;&lt;br&gt;light.Range = 1000.0f;&lt;br&gt;light.Type = D3DLIGHT_POINT;&lt;br&gt;g_pd3dDevice-&amp;gt;SetLight( 0, &amp;amp;light );&lt;br&gt;g_pd3dDevice-&amp;gt;LightEnable( 0, TRUE);&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div style=margin-bottom:12pt><span style=font-size:9pt><font face="Courier New">　　为什么要放在BeforePaint里呢？因为我们在后面还可以实现动态光影的效果，也就是让光源动起来。这里要格外注意的时，这个顶不是方向光源，是一个点光源，D3DLIGHT_POINT，它的光是没有方向，从座标点向四周任何方向发散的，他也具有衰减性，你可以设置三个衰减分量，在D3D里的衰减公式是：Atten = 1 / ( att0 + att1 * d + att2 * d * d )所以，当你的三个衰减值都为0时，就会出错。在这里我们用到了att1，让它等于0.05，很小的值对吗？越小表示衰减越小，光照也就越强。<br><br>　　现在你的代码应该是这样样子：</font></span></div><p><table style=background:#fff;width:90% cellpadding=0 width=90% border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td style=&quot;PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; FONT-SIZE: 10pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt; FONT-FAMILY: Times New Roman&quot;&gt;

        &lt;p&gt;// D3D006.cpp : 定义应用程序的入口点。&lt;br&gt;//&lt;/p&gt;

        &lt;p&gt;#include &quot;stdafx.h&quot;&lt;br&gt;#include &quot;D3D006.h&quot;&lt;/p&gt;

        &lt;p&gt;#define MAX_LOADSTRING 100&lt;br&gt;#define D3DFVF_CUSTOMVERTEX ( D3DFVF_XYZ | D3DFVF_NORMAL )&lt;/p&gt;

        &lt;p&gt;struct CUSTOMVERTEX&lt;br&gt;{&lt;br&gt;&amp;nbsp;D3DVECTOR pos;&lt;br&gt;&amp;nbsp;D3DVECTOR normal;&lt;br&gt;};&lt;/p&gt;

        &lt;p&gt;// 全局变量:&lt;br&gt;HWND g_hWnd;&lt;br&gt;IDirect3D9 *g_pD3D;&lt;br&gt;IDirect3DDevice9 *g_pd3dDevice;&lt;br&gt;IDirect3DVertexBuffer9 *g_pVB;&lt;/p&gt;

        &lt;p&gt;HINSTANCE hInst;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// 当前实例&lt;br&gt;TCHAR szTitle[MAX_LOADSTRING];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// 标题栏文本&lt;br&gt;TCHAR szWindowClass[MAX_LOADSTRING];&amp;nbsp;&amp;nbsp;&amp;nbsp;// 主窗口类名&lt;/p&gt;

        &lt;p&gt;// 此代码模块中包含的函数的前向声明:&lt;br&gt;ATOM&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MyRegisterClass(HINSTANCE hInstance);&lt;br&gt;BOOL&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InitInstance(HINSTANCE, int);&lt;br&gt;LRESULT CALLBACK&amp;nbsp;WndProc(HWND, UINT, WPARAM, LPARAM);&lt;br&gt;INT_PTR CALLBACK&amp;nbsp;About(HWND, UINT, WPARAM, LPARAM);&lt;/p&gt;

        &lt;p&gt;void OnIdle( void );&lt;br&gt;void OnCreate( HWND hWnd );&lt;br&gt;HRESULT InitD3D( void );&lt;br&gt;HRESULT CreateObject( void );&lt;br&gt;void ReleaseD3D( void );&lt;br&gt;HRESULT SetModalMatrix( void );&lt;br&gt;HRESULT SetProjMatrix( WORD wWidth, WORD wHeight );&lt;br&gt;void BeforePaint( void );&lt;br&gt;void CalcNormal( const D3DVECTOR *pVertices, D3DVECTOR *pNormal )&lt;br&gt;{&lt;br&gt;&amp;nbsp;D3DVECTOR v1, v2;&lt;br&gt;&amp;nbsp;v1.x = pVertices[0].x - pVertices[1].x;&lt;br&gt;&amp;nbsp;v1.y = pVertices[0].y - pVertices[1].y;&lt;br&gt;&amp;nbsp;v1.z = pVertices[0].z - pVertices[1].z;&lt;br&gt;&amp;nbsp;v2.x = pVertices[1].x - pVertices[2].x;&lt;br&gt;&amp;nbsp;v2.y = pVertices[1].y - pVertices[2].y;&lt;br&gt;&amp;nbsp;v2.z = pVertices[1].z - pVertices[2].z;&lt;br&gt;&amp;nbsp;D3DXVECTOR3 Temp( v1.y * v2.z - v1.z * v2.y, v1.z * v2.x - v1.x * v2.z,v1.x * v2.y - v1.y * v2.x );&lt;br&gt;&amp;nbsp;D3DXVec3Normalize( (D3DXVECTOR3*)pNormal, &amp;amp;Temp );&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;class CTimer&lt;br&gt;{&lt;br&gt;public:&lt;br&gt;&amp;nbsp;CTimer() {QueryPerformanceFrequency(&amp;amp;m_Frequency); Start();}&lt;br&gt;&amp;nbsp;void Start() {QueryPerformanceCounter(&amp;amp;m_StartCount);}&lt;br&gt;&amp;nbsp;double End() {LARGE_INTEGER CurrentCount;QueryPerformanceCounter(&amp;amp;CurrentCount);return double(CurrentCount.LowPart - m_StartCount.LowPart) / (double)m_Frequency.LowPart;}&lt;/p&gt;

        &lt;p&gt;private:&lt;br&gt;&amp;nbsp;LARGE_INTEGER m_Frequency;&lt;br&gt;&amp;nbsp;LARGE_INTEGER m_StartCount;&lt;br&gt;};&lt;/p&gt;

        &lt;p&gt;int APIENTRY _tWinMain(HINSTANCE hInstance,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; HINSTANCE hPrevInstance,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; LPTSTR&amp;nbsp;&amp;nbsp;&amp;nbsp; lpCmdLine,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; int&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; nCmdShow)&lt;br&gt;{&lt;br&gt;&amp;nbsp;UNREFERENCED_PARAMETER(hPrevInstance);&lt;br&gt;&amp;nbsp;UNREFERENCED_PARAMETER(lpCmdLine);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp;// TODO: 在此放置代码。&lt;br&gt;&amp;nbsp;MSG msg;&lt;br&gt;&amp;nbsp;HACCEL hAccelTable;&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;// 初始化全局字符串&lt;br&gt;&amp;nbsp;LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);&lt;br&gt;&amp;nbsp;LoadString(hInstance, IDC_D3D006, szWindowClass, MAX_LOADSTRING);&lt;br&gt;&amp;nbsp;MyRegisterClass(hInstance);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;// 执行应用程序初始化:&lt;br&gt;&amp;nbsp;if (!InitInstance (hInstance, nCmdShow))&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;return FALSE;&lt;br&gt;&amp;nbsp;}&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_D3D006));&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;// 主消息循环:&lt;br&gt;&amp;nbsp;while (true)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;if (PeekMessage(&amp;amp;msg, NULL, 0, 0, PM_REMOVE))&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;amp;msg))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TranslateMessage(&amp;amp;msg);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DispatchMessage(&amp;amp;msg);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;continue;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;if (WM_QUIT == msg.message)&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;OnIdle();&lt;br&gt;&amp;nbsp;}&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;UnregisterClass(szWindowClass, hInst);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;return (int) msg.wParam;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&lt;/p&gt;

        &lt;p&gt;//&lt;br&gt;//&amp;nbsp; 函数: MyRegisterClass()&lt;br&gt;//&lt;br&gt;//&amp;nbsp; 目的: 注册窗口类。&lt;br&gt;//&lt;br&gt;//&amp;nbsp; 注释:&lt;br&gt;//&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp; 仅当希望&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp; 此代码与添加到 Windows 95 中的&amp;#8220;RegisterClassEx&amp;#8221;&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp; 函数之前的 Win32 系统兼容时，才需要此函数及其用法。调用此函数十分重要，&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp; 这样应用程序就可以获得关联的&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;#8220;格式正确的&amp;#8221;小图标。&lt;br&gt;//&lt;br&gt;ATOM MyRegisterClass(HINSTANCE hInstance)&lt;br&gt;{&lt;br&gt;&amp;nbsp;WNDCLASSEX wcex;&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;wcex.cbSize = sizeof(WNDCLASSEX);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;wcex.style&amp;nbsp;&amp;nbsp;&amp;nbsp;= CS_HREDRAW | CS_VREDRAW;&lt;br&gt;&amp;nbsp;wcex.lpfnWndProc&amp;nbsp;= WndProc;&lt;br&gt;&amp;nbsp;wcex.cbClsExtra&amp;nbsp;&amp;nbsp;= 0;&lt;br&gt;&amp;nbsp;wcex.cbWndExtra&amp;nbsp;&amp;nbsp;= 0;&lt;br&gt;&amp;nbsp;wcex.hInstance&amp;nbsp;&amp;nbsp;= hInstance;&lt;br&gt;&amp;nbsp;wcex.hIcon&amp;nbsp;&amp;nbsp;&amp;nbsp;= LoadIcon(hInstance, MAKEINTRESOURCE(IDI_D3D006));&lt;br&gt;&amp;nbsp;wcex.hCursor&amp;nbsp;&amp;nbsp;= LoadCursor(NULL, IDC_ARROW);&lt;br&gt;&amp;nbsp;wcex.hbrBackground&amp;nbsp;= (HBRUSH)(COLOR_WINDOW+1);&lt;br&gt;&amp;nbsp;wcex.lpszMenuName&amp;nbsp;= MAKEINTRESOURCE(IDC_D3D006);&lt;br&gt;&amp;nbsp;wcex.lpszClassName&amp;nbsp;= szWindowClass;&lt;br&gt;&amp;nbsp;wcex.hIconSm&amp;nbsp;&amp;nbsp;= LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;return RegisterClassEx(&amp;amp;wcex);&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;//&lt;br&gt;//&amp;nbsp;&amp;nbsp; 函数: InitInstance(HINSTANCE, int)&lt;br&gt;//&lt;br&gt;//&amp;nbsp;&amp;nbsp; 目的: 保存实例句柄并创建主窗口&lt;br&gt;//&lt;br&gt;//&amp;nbsp;&amp;nbsp; 注释:&lt;br&gt;//&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在此函数中，我们在全局变量中保存实例句柄并&lt;br&gt;//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 创建和显示主程序窗口。&lt;br&gt;//&lt;br&gt;BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp; HWND hWnd;&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp; hInst = hInstance; // 将实例句柄存储在全局变量中&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp; hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp; if (!hWnd)&lt;br&gt;&amp;nbsp;&amp;nbsp; {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return FALSE;&lt;br&gt;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp; ShowWindow(hWnd, nCmdShow);&lt;br&gt;&amp;nbsp;&amp;nbsp; UpdateWindow(hWnd);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;&amp;nbsp; return TRUE;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;//&lt;br&gt;//&amp;nbsp; 函数: WndProc(HWND, UINT, WPARAM, LPARAM)&lt;br&gt;//&lt;br&gt;//&amp;nbsp; 目的: 处理主窗口的消息。&lt;br&gt;//&lt;br&gt;//&amp;nbsp; WM_COMMAND&amp;nbsp;- 处理应用程序菜单&lt;br&gt;//&amp;nbsp; WM_PAINT&amp;nbsp;- 绘制主窗口&lt;br&gt;//&amp;nbsp; WM_DESTROY&amp;nbsp;- 发送退出消息并返回&lt;br&gt;//&lt;br&gt;//&lt;br&gt;LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)&lt;br&gt;{&lt;br&gt;&amp;nbsp;int wmId, wmEvent;&lt;br&gt;&amp;nbsp;PAINTSTRUCT ps;&lt;br&gt;&amp;nbsp;HDC hdc;&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;switch (message)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;case WM_CREATE:&lt;br&gt;&amp;nbsp;&amp;nbsp;OnCreate(hWnd);&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;case WM_COMMAND:&lt;br&gt;&amp;nbsp;&amp;nbsp;wmId&amp;nbsp;&amp;nbsp;&amp;nbsp; = LOWORD(wParam);&lt;br&gt;&amp;nbsp;&amp;nbsp;wmEvent = HIWORD(wParam);&lt;br&gt;&amp;nbsp;&amp;nbsp;// 分析菜单选择:&lt;br&gt;&amp;nbsp;&amp;nbsp;switch (wmId)&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;case IDM_ABOUT:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;case IDM_EXIT:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;DestroyWindow(hWnd);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;default:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;return DefWindowProc(hWnd, message, wParam, lParam);&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;case WM_PAINT:&lt;br&gt;&amp;nbsp;&amp;nbsp;hdc = BeginPaint(hWnd, &amp;amp;ps);&lt;br&gt;&amp;nbsp;&amp;nbsp;// TODO: 在此添加任意绘图代码...&lt;br&gt;&amp;nbsp;&amp;nbsp;EndPaint(hWnd, &amp;amp;ps);&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;case WM_SIZE:&lt;br&gt;&amp;nbsp;&amp;nbsp;SetProjMatrix( LOWORD( lParam ), HIWORD( lParam ) );&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;case WM_DESTROY:&lt;br&gt;&amp;nbsp;&amp;nbsp;ReleaseD3D();&lt;br&gt;&amp;nbsp;&amp;nbsp;PostQuitMessage(0);&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;default:&lt;br&gt;&amp;nbsp;&amp;nbsp;return DefWindowProc(hWnd, message, wParam, lParam);&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;return 0;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;// &amp;#8220;关于&amp;#8221;框的消息处理程序。&lt;br&gt;INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)&lt;br&gt;{&lt;br&gt;&amp;nbsp;UNREFERENCED_PARAMETER(lParam);&lt;br&gt;&amp;nbsp;switch (message)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;case WM_INITDIALOG:&lt;br&gt;&amp;nbsp;&amp;nbsp;return (INT_PTR)TRUE;&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;case WM_COMMAND:&lt;br&gt;&amp;nbsp;&amp;nbsp;if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;EndDialog(hDlg, LOWORD(wParam));&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;return (INT_PTR)TRUE;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;break;&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;return (INT_PTR)FALSE;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;void OnCreate(HWND hWnd)&lt;br&gt;{&lt;br&gt;&amp;nbsp;g_hWnd = hWnd;&lt;br&gt;&amp;nbsp;InitD3D();&lt;br&gt;&amp;nbsp;CreateObject();&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;void ReleaseD3D()&lt;br&gt;{&lt;br&gt;&amp;nbsp;if (g_pVB != NULL)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;g_pVB-&amp;gt;Release();&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;if (g_pd3dDevice != NULL)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;Release();&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;if (g_pD3D != NULL)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;g_pD3D-&amp;gt;Release();&lt;br&gt;&amp;nbsp;}&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;HRESULT InitD3D()&lt;br&gt;{&lt;br&gt;&amp;nbsp;g_pD3D = Direct3DCreate9(D3D_SDK_VERSION);&lt;br&gt;&amp;nbsp;D3DPRESENT_PARAMETERS d3dpp;&lt;br&gt;&amp;nbsp;ZeroMemory(&amp;amp;d3dpp, sizeof(d3dpp));&lt;br&gt;&amp;nbsp;d3dpp.Windowed&amp;nbsp;=&amp;nbsp;TRUE;&lt;br&gt;&amp;nbsp;d3dpp.SwapEffect=&amp;nbsp;D3DSWAPEFFECT_DISCARD;&lt;br&gt;&amp;nbsp;d3dpp.BackBufferFormat&amp;nbsp;=&amp;nbsp;D3DFMT_A8R8G8B8;&lt;br&gt;&amp;nbsp;g_pD3D-&amp;gt;CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, g_hWnd,&lt;br&gt;&amp;nbsp;&amp;nbsp;D3DCREATE_HARDWARE_VERTEXPROCESSING|D3DCREATE_PUREDEVICE,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;amp;d3dpp, &amp;amp;g_pd3dDevice);&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;SetRenderState(D3DRS_LIGHTING, TRUE);&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;SetRenderState(D3DRS_AMBIENT,&lt;br&gt;&amp;nbsp;&amp;nbsp;D3DCOLOR_COLORVALUE(0.6f, 0.6f, 0.6f, 1.0));&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;LightEnable(0, TRUE);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;D3DMATERIAL9 mtrl;&lt;br&gt;&amp;nbsp;ZeroMemory(&amp;amp;mtrl, sizeof(mtrl));&lt;br&gt;&amp;nbsp;mtrl.Diffuse.r&amp;nbsp;=&amp;nbsp;mtrl.Ambient.r&amp;nbsp;=&amp;nbsp;140.0f&amp;nbsp;/&amp;nbsp;255.0f;&lt;br&gt;&amp;nbsp;mtrl.Diffuse.b&amp;nbsp;=&amp;nbsp;mtrl.Ambient.b&amp;nbsp;=&amp;nbsp;200.0f&amp;nbsp;/&amp;nbsp;255.0f;&lt;br&gt;&amp;nbsp;mtrl.Diffuse.g&amp;nbsp;=&amp;nbsp;mtrl.Ambient.g&amp;nbsp;=&amp;nbsp;255.0f&amp;nbsp;/&amp;nbsp;255.0f;&lt;br&gt;&amp;nbsp;mtrl.Diffuse.a&amp;nbsp;=&amp;nbsp;mtrl.Ambient.a&amp;nbsp;=&amp;nbsp;1.0f;&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;SetMaterial(&amp;amp;mtrl);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;return S_OK;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;void BeforePaint(void)&lt;br&gt;{&lt;br&gt;&amp;nbsp;D3DLIGHT9 light;&lt;br&gt;&amp;nbsp;ZeroMemory(&amp;amp;light, sizeof(light));&lt;br&gt;&amp;nbsp;light.Position&amp;nbsp;=&amp;nbsp;D3DXVECTOR3(30.0f, 30.0f, 30.0f);&lt;br&gt;&amp;nbsp;light.Attenuation1&amp;nbsp;=&amp;nbsp;0.5f;&lt;br&gt;&amp;nbsp;light.Diffuse.r&amp;nbsp;=&amp;nbsp;1.0f;&lt;br&gt;&amp;nbsp;light.Diffuse.g&amp;nbsp;=&amp;nbsp;1.0f;&lt;br&gt;&amp;nbsp;light.Diffuse.b&amp;nbsp;=&amp;nbsp;1.0f;&lt;br&gt;&amp;nbsp;light.Range&amp;nbsp;=&amp;nbsp;1000.0f;&lt;br&gt;&amp;nbsp;light.Type&amp;nbsp;=&amp;nbsp;D3DLIGHT_POINT;&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;SetLight(0, &amp;amp;light);&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;LightEnable(0, TRUE);&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;HRESULT&amp;nbsp;CreateObject()&lt;br&gt;{&lt;br&gt;&amp;nbsp;D3DVECTOR&amp;nbsp;SrcBox[]={&lt;br&gt;&amp;nbsp;&amp;nbsp;{ 5.0f,&amp;nbsp; 5.0f, 0.0f},{ 5.0f,&amp;nbsp; 5.0f, 10.0f},&lt;br&gt;&amp;nbsp;&amp;nbsp;{ 5.0f, -5.0f, 0.0f},{ 5.0f, -5.0f, 10.0f},&lt;br&gt;&amp;nbsp;&amp;nbsp;{-5.0f, -5.0f, 0.0f},{-5.0f, -5.0f, 10.0f},&lt;br&gt;&amp;nbsp;&amp;nbsp;{-5.0f,&amp;nbsp; 5.0f, 0.0f},{-5.0f,&amp;nbsp; 5.0f, 10.0f},&lt;br&gt;&amp;nbsp;};&lt;br&gt;&amp;nbsp;WORD wIndex[]={&lt;br&gt;&amp;nbsp;&amp;nbsp;0,4,6,0,2,4,&lt;br&gt;&amp;nbsp;&amp;nbsp;0,6,7,0,7,1,&lt;br&gt;&amp;nbsp;&amp;nbsp;0,3,2,0,1,3,&lt;br&gt;&amp;nbsp;&amp;nbsp;5,2,3,5,4,2,&lt;br&gt;&amp;nbsp;&amp;nbsp;5,6,4,5,7,6,&lt;br&gt;&amp;nbsp;&amp;nbsp;5,1,7,5,3,1,&lt;br&gt;&amp;nbsp;};&lt;br&gt;&amp;nbsp;CUSTOMVERTEX ExpandBox[sizeof(wIndex)/sizeof(WORD)];&lt;br&gt;&amp;nbsp;for (int i = 0; i &amp;lt; 36; i++)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i].pos = SrcBox[wIndex[i]];&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;for (int i = 0; i &amp;lt; 12; i++)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;D3DVECTOR Tri[3];&lt;br&gt;&amp;nbsp;&amp;nbsp;Tri[0]&amp;nbsp;= ExpandBox[i * 3 + 0].pos;&lt;br&gt;&amp;nbsp;&amp;nbsp;Tri[1]&amp;nbsp;= ExpandBox[i * 3 + 1].pos;&lt;br&gt;&amp;nbsp;&amp;nbsp;Tri[2]&amp;nbsp;= ExpandBox[i * 3 + 2].pos;&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i * 3 + 0].normal.x = 0.0f;&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i * 3 + 0].normal.y = 0.0f;&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i * 3 + 0].normal.z = 1.0f;&lt;br&gt;&amp;nbsp;&amp;nbsp;CalcNormal(Tri, &amp;amp;(ExpandBox[i * 3 + 0].normal));&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i * 3 + 1].normal = ExpandBox[i * 3 + 0].normal;&lt;br&gt;&amp;nbsp;&amp;nbsp;ExpandBox[i * 3 + 2].normal = ExpandBox[i * 3 + 0].normal;&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;CreateVertexBuffer(sizeof(ExpandBox), 0, D3DFVF_CUSTOMVERTEX, D3DPOOL_DEFAULT, &amp;amp;g_pVB, NULL);&lt;br&gt;&amp;nbsp;VOID* pVertices;&lt;br&gt;&amp;nbsp;g_pVB-&amp;gt;Lock(0, sizeof(ExpandBox), (void**)&amp;amp;pVertices, 0);&lt;br&gt;&amp;nbsp;MoveMemory(pVertices, ExpandBox, sizeof(ExpandBox));&lt;br&gt;&amp;nbsp;g_pVB-&amp;gt;Unlock();&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;return S_OK;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;void OnIdle()&lt;br&gt;{&lt;br&gt;&amp;nbsp;static CTimer t;&lt;br&gt;&amp;nbsp;static double dt = t.End();&lt;br&gt;&amp;nbsp;double temp = t.End();&lt;br&gt;&amp;nbsp;char szValue[256];&lt;br&gt;&amp;nbsp;sprintf(szValue, &quot;当前帧率:%f&quot;, 1/(temp-dt));&lt;br&gt;&amp;nbsp;SetWindowTextA(g_hWnd, szValue);&lt;br&gt;&amp;nbsp;dt = temp;&lt;br&gt;&amp;nbsp;if (g_pd3dDevice != NULL)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(255,255,200), 1.0f, 0);&lt;br&gt;&amp;nbsp;&amp;nbsp;if (SUCCEEDED(g_pd3dDevice-&amp;gt;BeginScene()))&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;BeforePaint();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (FAILED(SetModalMatrix()))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;SetStreamSource(0, g_pVB, 0, sizeof(CUSTOMVERTEX));&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;SetFVF(D3DFVF_CUSTOMVERTEX);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;DrawPrimitive(D3DPT_TRIANGLELIST, 0, 12);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;EndScene();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;g_pd3dDevice-&amp;gt;Present(NULL, NULL, NULL, NULL);&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;}&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;HRESULT SetModalMatrix()&lt;br&gt;{&lt;br&gt;&amp;nbsp;static float fRadius = 0.5f;&lt;br&gt;&amp;nbsp;fRadius -= 0.003f;&lt;br&gt;&amp;nbsp;if (fRadius &amp;lt; 0)&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;fRadius = D3DX_PI * 2;&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;D3DXMATRIX matWorld;&lt;br&gt;&amp;nbsp;D3DXMatrixRotationZ(&amp;amp;matWorld, 0.0f);&lt;br&gt;&amp;nbsp;if (FAILED(g_pd3dDevice-&amp;gt;SetTransform(D3DTS_WORLD, &amp;amp;matWorld)))&lt;br&gt;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;return E_FAIL;&lt;br&gt;&amp;nbsp;}&lt;br&gt;&amp;nbsp;D3DXMATRIX matView;&lt;br&gt;&amp;nbsp;D3DXMatrixLookAtLH(&amp;amp;matView, &amp;amp;D3DXVECTOR3(cosf(fRadius)*40.0f, sinf(fRadius)*40.0f, 30.0),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;amp;D3DXVECTOR3(0.0f, 0.0f, 0.0f), &amp;amp;D3DXVECTOR3(0.0f, 0.0f, 1.0f));&lt;br&gt;&amp;nbsp;g_pd3dDevice-&amp;gt;SetTransform(D3DTS_VIEW, &amp;amp;matView);&lt;/p&gt;

        &lt;p&gt;&amp;nbsp;return S_OK;&lt;br&gt;}&lt;/p&gt;

        &lt;p&gt;HRESULT SetProjMatrix(WORD wWidth, WORD wHeight)&lt;br&gt;{&lt;br&gt;&amp;nbsp;D3DXMATRIX matProj;&lt;br&gt;&amp;nbsp;D3DXMatrixPerspectiveFovLH(&amp;amp;matProj, D3DX_PI/4, (float)wWidth/(float)wHeight,1.0f, 100.0f);&lt;br&gt;&amp;nbsp;return g_pd3dDevice-&amp;gt;SetTransform(D3DTS_PROJECTION, &amp;amp;matProj);&lt;br&gt;}&lt;/p&gt;

        &lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><div><span style=font-size:9pt><font face="Courier New">　　 看看和OpenGL做出来的哪个效果更好一些呢？我想使用D3D来做这些事会很方便吧。</font></span></div></div><footer class=post-footer><div class=post-tags><a href=/tags/direct3d/>direct3d
</a><a href=/tags/graphics/>graphics</a></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
Direct3D极速入门宝典</li><li class=post-copyright-author><strong>本文作者： </strong>Rise</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blogs.qipai360.cn/post/direct3d-quick-start-guide/ title=Direct3D极速入门宝典>https://blogs.qipai360.cn/post/direct3d-quick-start-guide/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/black.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://www.zhihu.com/people/rise-worlds><span class=icon><i class="fa fa-book"></i>
</span><span class=label>知乎</span></a></div><div class=social-item><a target=_blank class=social-link href=https://twitter.com/riseworlds><span class=icon><i class="fab fa-twitter"></i>
</span><span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=https://www.facebook.com/rise.worlds><span class=icon><i class="fab fa-facebook"></i>
</span><span class=label>facebook</span></a></div><div class=social-item><a target=_blank class=social-link href=https://youtube.com/@YiXuan><span class=icon><i class="fab fa-youtube"></i>
</span><span class=label>YouTube</span></a></div><div class=social-item><a target=_blank class=social-link href=https://instagram.com/rise.worlds><span class=icon><i class="fab fa-instagram"></i>
</span><span class=label>Instagram</span></a></div><div class=social-item><a target=_blank class=social-link href=https://t.me/riseworlds><span class=icon><i class="fab fa-telegram"></i>
</span><span class=label>Telegram</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/directx9-quick-start-guide/ rel=next title="DirectX9.0 入门手册"><i class="fa fa-chevron-left"></i> DirectX9.0 入门手册</a></div><div class="post-nav-prev post-nav-item"><a href=/post/fvf-d3dfvf-xyz-xyzrhw-difference/ rel=prev title=FVF的D3DFVF_XYZ和D3DFVF_XYZRHW的区别>FVF的D3DFVF_XYZ和D3DFVF_XYZRHW的区别
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.152.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":false,"isPage":true,"path":"direct3d-quick-start-guide","permalink":"https://blogs.qipai360.cn/post/direct3d-quick-start-guide/","title":"Direct3D极速入门宝典","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1761990624" defer></script></body></html>