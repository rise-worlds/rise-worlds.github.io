<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Direct3D中的绘制（1）"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="direct3d,graphics"><meta property="og:type" content="article"><meta property="og:title" content="Direct3D中的绘制（1）"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/direct3d-drawing-1/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Rise"><meta property="article:published_time" content="2008-03-20 21:26:00 +0800 +0800"><meta property="article:modified_time" content="2008-03-20 21:26:00 +0800 +0800"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761990627"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>Direct3D中的绘制（1） - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>678</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>678</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>34</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>117</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2418817></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5198></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-11-01 14:55:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/direct3d-drawing-1/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Direct3D中的绘制（1）"><meta itemprop=description content="3.1顶点/索引缓存 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 顶点和索引缓存有相似的接口并且共享相似的方法；因此我们把它们合在一起讲解。一个顶点缓存是一块连续的存储了顶点数据的内存。同样的，一个索引缓存是一块连续的存储了索引数据的内存。我们使用顶点和索引缓存保存我们的数据是因为它们能被放置在显存中。渲染显存中的数据要比渲染系统内存中的数据快的多。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在代码中，一个顶点缓存是通过IDirect3DVertexBuffer9接口来定义的。类似的，一个索引缓存是通过IDirect3DIndexBuffer9接口来定义。 3.1.1创建一个顶点和索引缓存 我们能使用下面两个方法创建一个顶点缓存和索引缓存： HRESULT IDirect3DDevice9::CreateVertexBuffer( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT Length, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Usage, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD FVF, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DPOOL Pool &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDirect3DVertexBuffer9** ppVertexBuffer, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HANDLE* pSharedHandle ); HRESULT IDirect3DDevice9::CreateIndexBuffer( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT Length, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Usage, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DFORMAT Format, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DPOOL Pool, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDirect3DIndexBuffer9** ppIndexBuffer, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HANDLE* pSharedHandle ); 这两个方法大部分参数是相同的，因此我们一起介绍它们。 Length —— 分配给缓存的字节大小。假如想得到一个能存储8个顶点的顶点缓存，那么我们就要在顶点结构中设置这个参数为 8 * sizeof ( Vertex ) 。 Usage —— 指定关于怎样使用缓存的额外信息。这个值可以是0，没有标记，或者是下面标记的一个或多个的组合： &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_DYNAMIC——设置这个参数可以使缓存是动态的。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_POINTS——这个参数指定缓存存储原始点。这个参数仅仅用在顶点缓冲中。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_SOFTWAREPROCESSING——使用软件顶点处理 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_WRITEONLY——指定应用程序只能写缓存。它允许驱动程序分配最适合的内存地址作为写缓存。注意如果从创建好的这种缓存中读数据，将会返回错误信息。 FVF —— 存储在缓存中的顶点格式 Pool —— 缓存放置在哪一个内存池中 ppVertexBuffer ——返回创建好的顶点缓存的指针。 pSharedHandle ——没有使用；设置为0。 Format ——指定索引的大小；使用D3DFMT_INDEX16设置16位索引，使用D3DFMT_INDEX32设置32位索引。注意并非所有设备都支持32位索引；请检查设备能力。 ppIndexBuffer ——返回创建好的索引缓存的指针。 注意：不使用D3DUSAGE_DYNAMIC参数创建的缓存被叫做静态缓存。静态缓存通常被放置在显存中，在其中的数据能被很有效的处理。然而，对于静态缓存，从中读取和写入数据是很慢的，因为访问显存是很慢的。因为这个原因我们用静态缓存存储静态数据（不需要被经常改变的数据）。地形和建筑物是很好的候选例子，因为在应用程序中他们通常不需要被改变。静态缓存应该在应用程序初始化的时候就被填充好，而不是在运行时才做。 注意：使用D3DUSAGE_DYNAMIC参数创建的缓存被叫做动态缓存。动态缓存通常被放在AGP内存中，这种内存中的数据能被很快的更新。处理动态缓存中的数据不会比处理静态缓存中的数据快，因为这些数据必须在渲染前被转移到显存中，动态缓存的好处是它们能够被稍微快点地被更新（比CPU写快）。因此，假如你需要经常更新缓存中的数据，那么你就应该使用动态缓存。粒子系统是很好的一个应用，因为它们是动态的，并且他们通常每一帧都会被更新。 注意：在程序中读取显存和AGP内存都是非常慢的。因此，假如你在运行时需要读取你的几何物体，最好的方案是指定一块系统内存，往其中拷贝并且读取数据。 下边是创建一个静态顶点缓存的例子，该缓存能存储8个顶点。 IDirect3DVertexBuffer9* vb; device->CreateVertexBuffer( 8 * sizeof( Vertex ),&nbsp;&nbsp;&nbsp; 0,&nbsp;&nbsp;&nbsp; D3DFVF_XYZ,&nbsp; D3DPOOL_MANAGED, &amp;vb, 0); 3.1.2 访问缓冲内存 为了访问一个顶点/索引缓存，我们需要得到一个指针。我们通过一个指针获得缓存数据必须使用Lock方法。当我们访问完缓存后必须对它解锁。一旦有一个指向内存的指针，我们就能对它进行读写。 HRESULT IDirect3DVertexBuffer9::Lock( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT OffsetToLock, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT SizeToLock, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BYTE** ppbData, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Flags ); HRESULT IDirect3DIndexBuffer9::Lock( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT OffsetToLock, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT SizeToLock, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BYTE** ppbData, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Flags ); 这两个方法的参数都是完全相同的。 OffsetToLock —— 偏移量，以字节为单位，从缓存开始位置到锁定开始位置的距离。如图3.1。  SizeToLock —— 锁定的字节数。 ppbData —— 一个指向锁定内存开始位置的指针。 Flags —— 标记描述怎样锁定内存。它可能是0或者是下面参数中的1个或多个的组合： &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_DISCARD——这个参数仅仅会在动态缓存时被使用。它指示硬件丢弃缓存并返回一个指向新分配的缓存的指针。这是很有用，因为当我们存取一个新分配的缓存时它允许硬件继续从丢弃的缓存渲染。这防止了硬件延迟。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_NOOVERWRITE——这个参数仅仅会在动态缓存时被使用。它声明你将向缓存中添加数据。即你不能向已经渲染的内存中写数据。这是有好处的因为他允许你在添加新数据到缓存的同时让硬件继续渲染。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_READONLY——这个参数声明你锁定的缓存只能从中读取数据而不能写数据。这允许一些内在的优化。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 用参数D3DLOCK_DISCARD和D3DLOCK_NOOVERWRITE表明缓存的一部分被锁定之后能继续被使用。假如硬件配置允许这些标记被使用，则在对缓存进行锁定时，其他的显示操作就不会中断。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下边的例子展示了通常怎样使用Lock方法。注意当我们使用完以后要调用Unlock方法。 Vertex* vertices; _vb->Lock(0, 0, (void**)&amp;vertices, 0); // 锁定整个缓存 vertices[0] = Vertex(-1.0f, 0.0f, 2.0f); // 向缓存里写顶点 vertices[1] = Vertex( 0.0f, 1.0f, 2.0f);  vertices[2] = Vertex( 1.0f, 0.0f, 2.0f); _vb->Unlock(); // 当你访问完缓存时，解锁缓存 3.1.3 找回顶点和索引缓存信息 有时我们需要得到顶点/索引缓存信息。下面的例子示范了用于获得这些信息的方法： D3DVERTEXBUFFER_DESC vbDescription; _vertexBuffer->GetDesc(&amp;vbDescription); // 取得顶点缓存信息 D3DINDEXBUFFER_DESC ibDescription; _indexBuffer->GetDesc(&amp;ibDescription); //取得索引缓存信息 D3DVERTEXBUFFER_DESC和D3DINDEXBUFFER_DESC结构的定义如下： Describes a vertex buffer.typedef struct D3DVERTEXBUFFER_DESC {    D3DFORMAT Format;    D3DRESOURCETYPE Type;    DWORD Usage;    D3DPOOL Pool;    UINT Size;    DWORD FVF;} D3DVERTEXBUFFER_DESC, *LPD3DVERTEXBUFFER_DESC;
Members

Format
Member of the D3DFORMAT enumerated type, describing the surface format of the vertex buffer data. 
Type
Member of the D3DRESOURCETYPE enumerated type, identifying this resource as a vertex buffer. 
Usage
Combination of one or more D3DUSAGE flags. 
Pool
Member of the D3DPOOL enumerated type, specifying the class of memory allocated for this vertex buffer. 
Size
Size of the vertex buffer, in bytes. 
FVF
Combination of D3DFVF that describes the vertex format of the vertices in this buffer. 
Defines resource types.typedef enum D3DRESOURCETYPE{    D3DRTYPE_SURFACE = 1,    D3DRTYPE_VOLUME = 2,    D3DRTYPE_TEXTURE = 3,    D3DRTYPE_VOLUMETEXTURE = 4,    D3DRTYPE_CubeTexture = 5,    D3DRTYPE_VERTEXBUFFER = 6,    D3DRTYPE_INDEXBUFFER = 7,    D3DRTYPE_FORCE_DWORD = 0x7fffffff,} D3DRESOURCETYPE, *LPD3DRESOURCETYPE;
Constants

D3DRTYPE_SURFACE 
Surface resource. 
D3DRTYPE_VOLUME 
Volume resource. 
D3DRTYPE_TEXTURE 
Texture resource. 
D3DRTYPE_VOLUMETEXTURE 
Volume texture resource. 
D3DRTYPE_CubeTexture 
Cube texture resource. 
D3DRTYPE_VERTEXBUFFER 
Vertex buffer resource. 
D3DRTYPE_INDEXBUFFER 
Index buffer resource. 
D3DRTYPE_FORCE_DWORD 
Forces this enumeration to compile to 32 bits in size. Without this value, some compilers would allow this enumeration to compile to a size other than 32 bits. This value is not used. 
Describes an index buffer.typedef struct D3DINDEXBUFFER_DESC {    D3DFORMAT Format;    D3DRESOURCETYPE Type;    DWORD Usage;    D3DPOOL Pool;    UINT Size;} D3DINDEXBUFFER_DESC, *LPD3DINDEXBUFFER_DESC;
Members

Format
Member of the D3DFORMAT enumerated type, describing the surface format of the index buffer data. 
Type
Member of the D3DRESOURCETYPE enumerated type, identifying this resource as an index buffer. 
Usage
Combination of one or more of the following flags, specifying the usage for this resource. 

D3DUSAGE_DONOTCLIP 
Set to indicate that the index buffer content will never require clipping. 
D3DUSAGE_DYNAMIC 
Set to indicate that the index buffer requires dynamic memory use. This is useful for drivers because it enables them to decide where to place the buffer. In general, static index buffers are placed in video memory and dynamic index buffers are placed in AGP memory. Note that there is no separate static usage; if you do not specify D3DUSAGE_DYNAMIC the index buffer is made static. D3DUSAGE_DYNAMIC is strictly enforced through the D3DLOCK_DISCARD and D3DLOCK_NOOVERWRITE locking flags. As a result, D3DLOCK_DISCARD and D3DLOCK_NOOVERWRITE are only valid on index buffers created with D3DUSAGE_DYNAMIC; they are not valid flags on static vertex buffers.
For more information about using dynamic index buffers, see Using Dynamic Vertex and Index Buffers.
Note that D3DUSAGE_DYNAMIC cannot be specified on managed index buffers. For more information, see Managing Resources (Direct3D 9).
"></span><header class=post-header><h1 class=post-title itemprop="name headline">Direct3D中的绘制（1）</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2008年03月20日 21:26:00 CST" itemprop="dateCreated datePublished" datetime="2008-03-20 21:26:00 +0800 +0800">2008年03月20日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2726</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/direct3d-drawing-1/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><h4><a name=_Toc138011513>3.1</a>顶点/索引缓存</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 顶点和索引缓存有相似的接口并且共享相似的方法；因此我们把它们合在一起讲解。一个顶点缓存是一块连续的存储了顶点数据的内存。同样的，一个索引缓存是一块连续的存储了索引数据的内存。我们使用顶点和索引缓存保存我们的数据是因为它们能被放置在显存中。渲染显存中的数据要比渲染系统内存中的数据快的多。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在代码中，一个顶点缓存是通过IDirect3DVertexBuffer9接口来定义的。类似的，一个索引缓存是通过IDirect3DIndexBuffer9接口来定义。<h5>3.1.1创建一个顶点和索引缓存</h5><p>我们能使用下面两个方法创建一个顶点缓存和索引缓存：<p>HRESULT IDirect3DDevice9::CreateVertexBuffer(<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT Length,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Usage,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD FVF,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DPOOL Pool<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDirect3DVertexBuffer9** ppVertexBuffer,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HANDLE* pSharedHandle<p>);<p>HRESULT IDirect3DDevice9::CreateIndexBuffer(<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT Length,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Usage,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DFORMAT Format,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DPOOL Pool,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDirect3DIndexBuffer9** ppIndexBuffer,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HANDLE* pSharedHandle<p>);<p>这两个方法大部分参数是相同的，因此我们一起介绍它们。<p>Length —— 分配给缓存的字节大小。假如想得到一个能存储8个顶点的顶点缓存，那么我们就要在顶点结构中设置这个参数为 8 * sizeof ( Vertex ) 。<p>Usage —— 指定关于怎样使用缓存的额外信息。这个值可以是0，没有标记，或者是下面标记的一个或多个的组合：<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_DYNAMIC——设置这个参数可以使缓存是动态的。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_POINTS——这个参数指定缓存存储原始点。这个参数仅仅用在顶点缓冲中。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_SOFTWAREPROCESSING——使用软件顶点处理<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DUSAGE_WRITEONLY——指定应用程序只能写缓存。它允许驱动程序分配最适合的内存地址作为写缓存。注意如果从创建好的这种缓存中读数据，将会返回错误信息。<p>FVF —— 存储在缓存中的顶点格式<p>Pool —— 缓存放置在哪一个内存池中<p>ppVertexBuffer ——返回创建好的顶点缓存的指针。<p>pSharedHandle ——没有使用；设置为0。<p>Format ——指定索引的大小；使用D3DFMT_INDEX16设置16位索引，使用D3DFMT_INDEX32设置32位索引。注意并非所有设备都支持32位索引；请检查设备能力。<p>ppIndexBuffer ——返回创建好的索引缓存的指针。<p>注意：不使用D3DUSAGE_DYNAMIC参数创建的缓存被叫做<u>静态缓存</u>。静态缓存通常被放置在显存中，在其中的数据能被很有效的处理。然而，对于静态缓存，从中读取和写入数据是很慢的，因为访问显存是很慢的。因为这个原因我们用静态缓存存储静态数据（不需要被经常改变的数据）。地形和建筑物是很好的候选例子，因为在应用程序中他们通常不需要被改变。静态缓存应该在应用程序初始化的时候就被填充好，而不是在运行时才做。<p>注意：使用D3DUSAGE_DYNAMIC参数创建的缓存被叫做<u>动态缓存</u>。动态缓存通常被放在AGP内存中，这种内存中的数据能被很快的更新。处理动态缓存中的数据不会比处理静态缓存中的数据快，因为这些数据必须在渲染前被转移到显存中，动态缓存的好处是它们能够被稍微快点地被更新（比CPU写快）。因此，假如你需要经常更新缓存中的数据，那么你就应该使用动态缓存。粒子系统是很好的一个应用，因为它们是动态的，并且他们通常每一帧都会被更新。<p>注意：在程序中读取显存和AGP内存都是非常慢的。因此，假如你在运行时需要读取你的几何物体，最好的方案是指定一块系统内存，往其中拷贝并且读取数据。<p>下边是创建一个静态顶点缓存的例子，该缓存能存储8个顶点。<p>IDirect3DVertexBuffer9* vb;<p>device->CreateVertexBuffer( 8 * sizeof( Vertex ),&nbsp;&nbsp;&nbsp; 0,&nbsp;&nbsp;&nbsp; D3DFVF_XYZ,&nbsp; D3DPOOL_MANAGED, &amp;vb, 0);<h5>3.1.2 访问缓冲内存</h5><p>为了访问一个顶点/索引缓存，我们需要得到一个指针。我们通过一个指针获得缓存数据必须使用Lock方法。当我们访问完缓存后必须对它解锁。一旦有一个指向内存的指针，我们就能对它进行读写。<p>HRESULT IDirect3DVertexBuffer9::Lock(<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT OffsetToLock,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT SizeToLock,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BYTE** ppbData,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Flags<p>);<p>HRESULT IDirect3DIndexBuffer9::Lock(<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT OffsetToLock,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UINT SizeToLock,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BYTE** ppbData,<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DWORD Flags<p>);<p>这两个方法的参数都是完全相同的。<p>OffsetToLock —— 偏移量，以字节为单位，从缓存开始位置到锁定开始位置的距离。如图3.1。<p><img height=221 src=http://www.cppblog.com/images/cppblog_com/lovedday/6306/o_figure31.jpg width=748 border=0><p>SizeToLock —— 锁定的字节数。<p>ppbData —— 一个指向锁定内存开始位置的指针。<p>Flags —— 标记描述怎样锁定内存。它可能是0或者是下面参数中的1个或多个的组合：<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_DISCARD——这个参数仅仅会在动态缓存时被使用。它指示硬件丢弃缓存并返回一个指向新分配的缓存的指针。这是很有用，因为当我们存取一个新分配的缓存时它允许硬件继续从丢弃的缓存渲染。这防止了硬件延迟。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_NOOVERWRITE——这个参数仅仅会在动态缓存时被使用。它声明你将向缓存中添加数据。即你不能向已经渲染的内存中写数据。这是有好处的因为他允许你在添加新数据到缓存的同时让硬件继续渲染。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D3DLOCK_READONLY——这个参数声明你锁定的缓存只能从中读取数据而不能写数据。这允许一些内在的优化。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 用参数D3DLOCK_DISCARD和D3DLOCK_NOOVERWRITE表明缓存的一部分被锁定之后能继续被使用。假如硬件配置允许这些标记被使用，则在对缓存进行锁定时，其他的显示操作就不会中断。<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下边的例子展示了通常怎样使用Lock方法。注意当我们使用完以后要调用Unlock方法。<p>Vertex* vertices;<p>_vb->Lock(0, 0, (void**)&amp;vertices, 0); // 锁定整个缓存<p>vertices[0] = Vertex(-1.0f, 0.0f, 2.0f); // 向缓存里写顶点<p>vertices[1] = Vertex( 0.0f, 1.0f, 2.0f);<p>vertices[2] = Vertex( 1.0f, 0.0f, 2.0f);<p>_vb->Unlock(); // 当你访问完缓存时，解锁缓存<h5>3.1.3 找回顶点和索引缓存信息</h5><p>有时我们需要得到顶点/索引缓存信息。下面的例子示范了用于获得这些信息的方法：<p>D3DVERTEXBUFFER_DESC vbDescription;<p>_vertexBuffer->GetDesc(&amp;vbDescription); // 取得顶点缓存信息<p>D3DINDEXBUFFER_DESC ibDescription;<p>_indexBuffer->GetDesc(&amp;ibDescription); //取得索引缓存信息<p>D3DVERTEXBUFFER_DESC和D3DINDEXBUFFER_DESC结构的定义如下：<p>Describes a vertex buffer.<pre>typedef struct D3DVERTEXBUFFER_DESC {<br>    D3DFORMAT Format;<br>    D3DRESOURCETYPE Type;<br>    DWORD Usage;<br>    D3DPOOL Pool;<br>    UINT Size;<br>    DWORD FVF;<br>} D3DVERTEXBUFFER_DESC, *LPD3DVERTEXBUFFER_DESC;</pre><h6>Members</h6><dl><dt><strong>Format</strong><dd>Member of the D3DFORMAT enumerated type, describing the surface format of the vertex buffer data.<dt><strong>Type</strong><dd>Member of the D3DRESOURCETYPE enumerated type, identifying this resource as a vertex buffer.<dt><strong>Usage</strong><dd>Combination of one or more D3DUSAGE flags.<dt><strong>Pool</strong><dd>Member of the D3DPOOL enumerated type, specifying the class of memory allocated for this vertex buffer.<dt><strong>Size</strong><dd>Size of the vertex buffer, in bytes.<dt><strong>FVF</strong><dd>Combination of D3DFVF that describes the vertex format of the vertices in this buffer.</dd></dl><p>Defines resource types.<pre>typedef enum D3DRESOURCETYPE<br>{<br>    D3DRTYPE_SURFACE = 1,<br>    D3DRTYPE_VOLUME = 2,<br>    D3DRTYPE_TEXTURE = 3,<br>    D3DRTYPE_VOLUMETEXTURE = 4,<br>    D3DRTYPE_CubeTexture = 5,<br>    D3DRTYPE_VERTEXBUFFER = 6,<br>    D3DRTYPE_INDEXBUFFER = 7,<br>    D3DRTYPE_FORCE_DWORD = 0x7fffffff,<br>} D3DRESOURCETYPE, *LPD3DRESOURCETYPE;</pre><h6>Constants</h6><dl><dt>D3DRTYPE_SURFACE<dd>Surface resource.<dt>D3DRTYPE_VOLUME<dd>Volume resource.<dt>D3DRTYPE_TEXTURE<dd>Texture resource.<dt>D3DRTYPE_VOLUMETEXTURE<dd>Volume texture resource.<dt>D3DRTYPE_CubeTexture<dd>Cube texture resource.<dt>D3DRTYPE_VERTEXBUFFER<dd>Vertex buffer resource.<dt>D3DRTYPE_INDEXBUFFER<dd>Index buffer resource.<dt>D3DRTYPE_FORCE_DWORD<dd>Forces this enumeration to compile to 32 bits in size. Without this value, some compilers would allow this enumeration to compile to a size other than 32 bits. This value is not used.</dd></dl><p>Describes an index buffer.<pre>typedef struct D3DINDEXBUFFER_DESC {<br>    D3DFORMAT Format;<br>    D3DRESOURCETYPE Type;<br>    DWORD Usage;<br>    D3DPOOL Pool;<br>    UINT Size;<br>} D3DINDEXBUFFER_DESC, *LPD3DINDEXBUFFER_DESC;</pre><h6>Members</h6><dl><dt><strong>Format</strong><dd>Member of the D3DFORMAT enumerated type, describing the surface format of the index buffer data.<dt><strong>Type</strong><dd>Member of the D3DRESOURCETYPE enumerated type, identifying this resource as an index buffer.<dt><strong>Usage</strong><dd>Combination of one or more of the following flags, specifying the usage for this resource.<dl><dt>D3DUSAGE_DONOTCLIP<dd>Set to indicate that the index buffer content will never require clipping.<dt>D3DUSAGE_DYNAMIC<dd>Set to indicate that the index buffer requires dynamic memory use. This is useful for drivers because it enables them to decide where to place the buffer. In general, static index buffers are placed in video memory and dynamic index buffers are placed in AGP memory. Note that there is no separate static usage; if you do not specify D3DUSAGE_DYNAMIC the index buffer is made static. D3DUSAGE_DYNAMIC is strictly enforced through the D3DLOCK_DISCARD and D3DLOCK_NOOVERWRITE locking flags. As a result, D3DLOCK_DISCARD and D3DLOCK_NOOVERWRITE are only valid on index buffers created with D3DUSAGE_DYNAMIC; they are not valid flags on static vertex buffers.<p>For more information about using dynamic index buffers, see Using Dynamic Vertex and Index Buffers.<p>Note that D3DUSAGE_DYNAMIC cannot be specified on managed index buffers. For more information, see Managing Resources (Direct3D 9).<p></p><a id=more></a><dt>D3DUSAGE_RTPATCHES<dd>Set to indicate when the index buffer is to be used for drawing high-order primitives.<dt>D3DUSAGE_NPATCHES<dd>Set to indicate when the index buffer is to be used for drawing N patches.<dt>D3DUSAGE_POINTS<dd>Set to indicate when the index buffer is to be used for drawing point sprites or indexed point lists.<dt>D3DUSAGE_SOFTWAREPROCESSING<dd>Set to indicate that the buffer is to be used with software processing.<dt>D3DUSAGE_WRITEONLY<dd>Informs the system that the application writes only to the index buffer. Using this flag enables the driver to choose the best memory location for efficient write operations and rendering. Attempts to read from an index buffer that is created with this capability can result in degraded performance.</dd></dl><dt><strong>Pool</strong><dd>Member of the D3DPOOL enumerated type, specifying the class of memory allocated for this index buffer.<dt><strong>Size</strong><dd>Size of the index buffer, in bytes.</dd></dl></div><footer class=post-footer><div class=post-tags><a href=/tags/direct3d/>direct3d
</a><a href=/tags/graphics/>graphics</a></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
Direct3D中的绘制（1）</li><li class=post-copyright-author><strong>本文作者： </strong>Rise</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blogs.qipai360.cn/post/direct3d-drawing-1/ title=Direct3D中的绘制（1）>https://blogs.qipai360.cn/post/direct3d-drawing-1/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/black.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://www.zhihu.com/people/rise-worlds><span class=icon><i class="fa fa-book"></i>
</span><span class=label>知乎</span></a></div><div class=social-item><a target=_blank class=social-link href=https://twitter.com/riseworlds><span class=icon><i class="fab fa-twitter"></i>
</span><span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=https://www.facebook.com/rise.worlds><span class=icon><i class="fab fa-facebook"></i>
</span><span class=label>facebook</span></a></div><div class=social-item><a target=_blank class=social-link href=https://youtube.com/@YiXuan><span class=icon><i class="fab fa-youtube"></i>
</span><span class=label>YouTube</span></a></div><div class=social-item><a target=_blank class=social-link href=https://instagram.com/rise.worlds><span class=icon><i class="fab fa-instagram"></i>
</span><span class=label>Instagram</span></a></div><div class=social-item><a target=_blank class=social-link href=https://t.me/riseworlds><span class=icon><i class="fab fa-telegram"></i>
</span><span class=label>Telegram</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/direct3d-drawing-4/ rel=next title=Direct3D中的绘制（4）><i class="fa fa-chevron-left"></i> Direct3D中的绘制（4）</a></div><div class="post-nav-prev post-nav-item"><a href=/post/d3d-lighting-4/ rel=prev title=D3D中的光照（4）>D3D中的光照（4）
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.152.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":false,"isPage":true,"path":"direct3d-drawing-1","permalink":"https://blogs.qipai360.cn/post/direct3d-drawing-1/","title":"Direct3D中的绘制（1）","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1761990624" defer></script></body></html>