<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="水煮多态"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="Rise,ZhangTuohui,技术,C++,Unity3D,Lua,NodeJS,C#,JavaScript,游戏开发,机器学习,深度学习,AI,编程,编程语言,编程技术,编程开发,游戏引擎,游戏设计,游戏制作,游戏开发者,游戏开发者博客,游戏开发者网站,游戏开发者工具,游戏开发者教程,游戏开发者学习,游戏开发者交流,游戏开发者分享,游戏开发者经验,游戏开发者心得,游戏开发者技巧,游戏开发者方法,游戏开发者思路,游戏开发者理念,游戏开发者文化,游戏开发者精神,游戏开发者信仰"><meta property="og:type" content="article"><meta property="og:title" content="水煮多态"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/polymorphism-explained/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Rise"><meta property="article:published_time" content="2006-09-27 18:21:00 +0800 +0800"><meta property="article:modified_time" content="2006-09-27 18:21:00 +0800 +0800"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761990628"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>水煮多态 - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>678</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>678</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>34</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>117</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2418817></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5198></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-11-01 14:55:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/polymorphism-explained/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="水煮多态"><meta itemprop=description content="水是什么形状的？
乍一看这个问题似乎问得很没有道理，其实仔细想想，水正是自然界中&#8220;多态&#8221;的完美体现。不是么？用圆柱形容器装水，那么水就是圆柱形的；换用圆锥形容器盛之，水则又会成为圆锥形的了。在这个过程中，我们并不需要关心水是如何改变形状的，亦无需关心水在改变形状的过程中具体做了哪些事情；我们所要关心的，只是提供给它一个什么形状的容器，这就足够了。"></span><header class=post-header><h1 class=post-title itemprop="name headline">水煮多态</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2006年09月27日 18:21:00 CST" itemprop="dateCreated datePublished" datetime="2006-09-27 18:21:00 +0800 +0800">2006年09月27日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/c++/ itemprop=url rel=index><span itemprop=name>dev/c++</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2394</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>5分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/polymorphism-explained/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><em>水是什么形状的？</em></p><p>乍一看这个问题似乎问得很没有道理，其实仔细想想，水正是自然界中&#8220;多态&#8221;的完美体现。不是么？用圆柱形容器装水，那么水就是圆柱形的；换用圆锥形容器盛之，水则又会成为圆锥形的了。在这个过程中，我们并不需要关心水是如何改变形状的，亦无需关心水在改变形状的过程中具体做了哪些事情；我们所要关心的，只是提供给它一个什么形状的容器，这就足够了。</p><a id=more></a><p>OO（面向对象）中所谓的多态性，也正是这个道理。对于一个同名的方法（Water），我们在不同的情况（Container）下对其进行调用，那么它所完成的行为（Where_Am_I）也是不一样的。以下我将解说的，便是C++之中对于&#8220;多态&#8221;几种不同的实现形式。</p><p><br><strong>函数的重载（Overload）</strong><br><br></p><p>这儿是一个非常简单的函数max，它返回两个传入参数中较大的那一个。</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;max(&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;a,&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;if&lt;/font&gt;&amp;nbsp;(&amp;nbsp;a&amp;nbsp;&amp;gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;a;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;else&lt;/font&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;b;&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>相信这段代码的具体内容不用我解释了，是的，这是一段非常基本的代码。你可能会发现，这个max函数只适用于int类型的参数。那么，如果我同时还需要一个针对double类型的max，又该怎么办呢？</p><p>所幸C++语言本身提供了这一功能，它允许我们在定义函数的时候使用相同的名称——是为函数的重载。也就是说，我们可以继续定义一个double版本的max：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;max(&amp;nbsp;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;a,&amp;nbsp;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;if&lt;/font&gt;&amp;nbsp;(&amp;nbsp;a&amp;nbsp;&amp;gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;a;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;else&lt;/font&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;b;&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>然后，在我们的代码中对这两个函数分别进行调用：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;f(&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;a&amp;nbsp;=&amp;nbsp;max(&amp;nbsp;1,&amp;nbsp;2&amp;nbsp;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;b&amp;nbsp;=&amp;nbsp;max(&amp;nbsp;1.5,&amp;nbsp;2.5&amp;nbsp;);&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>这样一来，我们无需关心调用的是哪个版本的max，编译器会自动根据我们给定的参数类型（int或double）挑选出最适当的max函数来进行调用。</p><p><br><strong>模板（Template）</strong><br><br></p><p>首先在这里说句题外话：&#8220;模板&#8221;的&#8220;模&#8221;应该如何发音？我发现，身边大多数的朋友喜欢发音为&#8220;m&#243;&#8221;——当然我以前也是这么发音的。后来使用拼音输入法输入这个词语的时候，我才发现&#8220;模&#8221;在&#8220;模板&#8221;中应该读&#8220;m&#250;&#8221;。字典上对&#8220;m&#250;&#8221;音的解释为：使材料压制或浇灌成一定形状的工具。参考模板本身的特点，我觉得大抵也正是应该取&#8220;m&#250;&#8221;音为佳。但是&#8220;m&#250;板&#8221;又远远不及&#8220;m&#243;板&#8221;读起来顺口，所以后来我但凡遇到这个词，一概发音为&#8220;template&#8221;。<br>言归正传。函数的重载的确为我们提供了很大的方便，我们不需要关心调用哪个函数，编译器会根据我们给定的参数类型挑选出最适当的函数进行调用。但是对于下面的情况，函数的重载就不是很适用了：</p><ul><pre><code>&lt;li&gt;函数体代码内容基本相同。

&lt;li&gt;需要为多个类型编写同样功能的函数。 &lt;/li&gt;
</code></pre></ul><p>也就是说，我们也许需要更多版本（int、double，甚至更多自定义类型，如复数complex之类）的max，但是它们的代码却无一例外的都是：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;if&lt;/font&gt;&amp;nbsp;(&amp;nbsp;a&amp;nbsp;&amp;gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;a;&lt;br&gt;&lt;font color=blue&gt;else&lt;/font&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;b;&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>这样一来，我们需要做的事情就更倾向于一种体力劳动，而且，如是过多重复的工作也必然存在着错误的隐患。C++在这一方面，又为我们提供了一个解决方法，那就是模板。对于上面这众多版本且内容基本相同的max函数，我们只需要提供一个像下面这样函数模板即可：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;template&lt;/font&gt;&amp;nbsp;&amp;lt;&amp;nbsp;&lt;font color=blue&gt;typename&lt;/font&gt;&amp;nbsp;T&amp;nbsp;&amp;gt;&lt;br&gt;T&amp;nbsp;max(&amp;nbsp;&lt;font color=blue&gt;const&lt;/font&gt;&amp;nbsp;T&amp;amp;&amp;nbsp;a,&amp;nbsp;&lt;font color=blue&gt;const&lt;/font&gt;&amp;nbsp;T&amp;amp;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;if&lt;/font&gt;&amp;nbsp;(&amp;nbsp;a&amp;nbsp;&amp;gt;&amp;nbsp;b&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;a;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;else&lt;/font&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;return&lt;/font&gt;&amp;nbsp;b;&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>template是C++的关键字，表示它以下的代码块将使用模板。尖括号里面的内容称为模板参数，表示其中的T将在下面的代码模板中作为一种确定的类型使用。参数之所以使用const引用的形式，是为了避免遇到类对象的时候不必要的传值开销。在这个模板定义完毕之后，我们就可以像这样使用了：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;f(&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;a&amp;nbsp;=&amp;nbsp;max&amp;lt;&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;&amp;gt;(&amp;nbsp;1,&amp;nbsp;2&amp;nbsp;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;b&amp;nbsp;=&amp;nbsp;max&amp;lt;&amp;nbsp;&lt;font color=blue&gt;double&lt;/font&gt;&amp;nbsp;&amp;gt;(&amp;nbsp;1.5,&amp;nbsp;2.5&amp;nbsp;);&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>对于这段代码，编译器会分别将int与double填充到函数模板中T所在的位置，也就是分别为max&lt; int >和max&lt; double >各自产生一份max函数的实体代码。这样一来，就达到了与函数重载一样的效果，但是程序员的工作量却是不可同日而语的。</p><p><br><strong>虚函数（Virtual Function）</strong><br><br></p><p>下面来以水为例，说说虚函数提供的多态表现形式。首先我们建立一个Water类，用来表示水。</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;class&lt;/font&gt;&amp;nbsp;Water&lt;br&gt;{&lt;br&gt;&lt;font color=blue&gt;public&lt;/font&gt;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;virtual&lt;/font&gt;&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;Where_Am_I()&amp;nbsp;=&amp;nbsp;0;&lt;br&gt;};&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>正如单独讨论水的形状没有意义一样，我们在这里当然也不能允许Water类的实例化，所以成员函数Where_Am_I被定义为了纯虚函数。下面，我们来分别定义水（Water）在瓶子（Bottle）、玻璃杯（Glass）以及湖泊（Lake）中的三种不同情况：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;class&lt;/font&gt;&amp;nbsp;Water_In_Bottle&amp;nbsp;:&amp;nbsp;&lt;font color=blue&gt;public&lt;/font&gt;&amp;nbsp;Water&lt;br&gt;{&lt;br&gt;&lt;font color=blue&gt;public&lt;/font&gt;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;virtual&lt;/font&gt;&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;Where_Am_I()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cout&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;&quot;Now&amp;nbsp;I'm&amp;nbsp;in&amp;nbsp;a&amp;nbsp;bottle.&quot;&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;endl;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;};&lt;br&gt;&lt;br&gt;&lt;font color=blue&gt;class&lt;/font&gt;&amp;nbsp;Water_In_Glass&amp;nbsp;:&amp;nbsp;&lt;font color=blue&gt;public&lt;/font&gt;&amp;nbsp;Water&lt;br&gt;{&lt;br&gt;&lt;font color=blue&gt;public&lt;/font&gt;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;virtual&lt;/font&gt;&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;Where_Am_I()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cout&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;&quot;Now&amp;nbsp;I'm&amp;nbsp;in&amp;nbsp;a&amp;nbsp;glass.&quot;&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;endl;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;};&lt;br&gt;&lt;br&gt;&lt;font color=blue&gt;class&lt;/font&gt;&amp;nbsp;Water_In_Lake&amp;nbsp;:&amp;nbsp;&lt;font color=blue&gt;public&lt;/font&gt;&amp;nbsp;Water&lt;br&gt;{&lt;br&gt;&lt;font color=blue&gt;public&lt;/font&gt;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;virtual&lt;/font&gt;&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;Where_Am_I()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cout&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;&quot;Now&amp;nbsp;I'm&amp;nbsp;in&amp;nbsp;a&amp;nbsp;lake.&quot;&amp;nbsp;&amp;lt;&amp;lt;&amp;nbsp;endl;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;};&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>这三者分别实现了成员函数Where_Am_I。然后，多态性的实现就可以通过一个指向Water的指针来完成：</p><p><table class=codetable cellspacing=1 border=0><pre><code>&lt;tbody&gt;

    &lt;tr&gt;

        &lt;td&gt;&lt;code&gt;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;f(&amp;nbsp;&lt;font color=blue&gt;void&lt;/font&gt;&amp;nbsp;)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Water_In_Bottle&amp;nbsp;a;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Water_In_Glass&amp;nbsp;b;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Water_In_Lake&amp;nbsp;c;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Water&amp;nbsp;*pWater[3];&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pWater[0]&amp;nbsp;=&amp;nbsp;&amp;amp;a;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pWater[1]&amp;nbsp;=&amp;nbsp;&amp;amp;b;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pWater[2]&amp;nbsp;=&amp;nbsp;&amp;amp;c;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;for&lt;/font&gt;&amp;nbsp;(&amp;nbsp;&lt;font color=blue&gt;int&lt;/font&gt;&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;nbsp;&amp;lt;&amp;nbsp;3;&amp;nbsp;i++&amp;nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pWater[i]-&amp;gt;Where_Am_I();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;}&lt;/code&gt;&lt;/td&gt;

    &lt;/tr&gt;

&lt;/tbody&gt;
</code></pre></table></p><p>这样，程序的运行结果是：</p><p>Now I'm in a bottle.<br>Now I'm in a glass.<br>Now I'm in a lake.</p><p>好了，如你所见，我们并不需要关心pWater指向的是哪一种水，而只需要通过这个指针进行相同的调用工作，水本身就可以根据自身的所在来选择相应的行为。虚函数的多态性是非常有用的，尤其是在使用C++进行Windows程序设计的时候。考虑那些不同的窗口针对用户的相同行为而能够做出不同反应，也正是由于相应的消息响应虚函数的具体实现不同，方能达到这样的效果。</p><p>水煮多态，暂且煮到这里。这里所谈及的仅仅是C++对于多态的表现形式，而并未对文中三种技术（重载、模板、虚函数）的具体内容进行过多的解说——毕竟稍微一深入就难免会对某些技术细节进行大篇幅追究，譬如说到重载难免就会说到参数的匹配，说到模板又难免与泛型进行挂钩，到了虚函数又不能不提一下VTable的东西&#8230;&#8230;在这里我一概全免，因为我的目的也就是希望通过上面几个简单的例子让诸位看官能对OO本身的多态有一个感性的认识，感谢您们的阅读。</p></div><footer class=post-footer><hr><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
水煮多态</li><li class=post-copyright-author><strong>本文作者： </strong>Rise</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blogs.qipai360.cn/post/polymorphism-explained/ title=水煮多态>https://blogs.qipai360.cn/post/polymorphism-explained/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/black.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://www.zhihu.com/people/rise-worlds><span class=icon><i class="fa fa-book"></i>
</span><span class=label>知乎</span></a></div><div class=social-item><a target=_blank class=social-link href=https://twitter.com/riseworlds><span class=icon><i class="fab fa-twitter"></i>
</span><span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=https://www.facebook.com/rise.worlds><span class=icon><i class="fab fa-facebook"></i>
</span><span class=label>facebook</span></a></div><div class=social-item><a target=_blank class=social-link href=https://youtube.com/@YiXuan><span class=icon><i class="fab fa-youtube"></i>
</span><span class=label>YouTube</span></a></div><div class=social-item><a target=_blank class=social-link href=https://instagram.com/rise.worlds><span class=icon><i class="fab fa-instagram"></i>
</span><span class=label>Instagram</span></a></div><div class=social-item><a target=_blank class=social-link href=https://t.me/riseworlds><span class=icon><i class="fab fa-telegram"></i>
</span><span class=label>Telegram</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/understanding-io-completion-ports/ rel=next title="理解I/O Completion Port(完成端口)"><i class="fa fa-chevron-left"></i> 理解I/O Completion Port(完成端口)</a></div><div class="post-nav-prev post-nav-item"><a href=/post/vc2005-mobile-development-issues/ rel=prev title=VC2005开发移动程序的小问题>VC2005开发移动程序的小问题
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.152.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"comments":true,"expired":false,"isHome":false,"isPage":true,"path":"polymorphism-explained","permalink":"https://blogs.qipai360.cn/post/polymorphism-explained/","title":"水煮多态","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1761990624" defer></script></body></html>