<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_32_32_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_128_128_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="D3D中的Alpha颜色混合（2）"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta name=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blogs.qipai360.cn/imgs/avatar.jpg"><meta itemprop=keywords content="direct3d,graphics"><meta property="og:type" content="article"><meta property="og:title" content="D3D中的Alpha颜色混合（2）"><meta property="og:description" content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blogs.qipai360.cn/post/alpha-color-blending-in-d3d-2/"><meta property="og:site_name" content="Rise的自留地"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Rise"><meta property="article:published_time" content="2007-09-20 21:35:00 +0800 +0800"><meta property="article:modified_time" content="2007-09-20 21:35:00 +0800 +0800"><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761990626"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2b23669184fc49269e400525ac2447d9"}'></script><title>D3D中的Alpha颜色混合（2） - Rise的自留地</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Rise的自留地</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>记录生活中的点滴，分享编程技术和游戏开发经验。</p></div><div class=site-nav-right><div class="toggle popup-trigger"></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>678</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-message"><a href=/message/ class=hvr-icon-pulse rel=section><i class="fa fa-comments hvr-icon"></i>留言板</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li></ul></nav></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#parameters>Parameters</a></li><li><a href=#return-values>Return Values</a></li><li><a href=#remarks>Remarks</a></li></ul></li></ul></li><li><a href=#id3dxsprite-members>ID3DXSprite Members</a><ul><li><ul><li><a href=#remarks-1>Remarks</a></li><li><a href=#parameters-1>Parameters</a></li><li><a href=#return-values-1>Return Values</a></li><li><a href=#remarks-2>Remarks</a></li><li><a href=#parameters-2>Parameters</a></li><li><a href=#return-values-2>Return Values</a></li><li><a href=#remarks-3>Remarks</a></li><li><a href=#parameters-3>Parameters</a></li><li><a href=#return-values-3>Return Values</a></li><li><a href=#remarks-4>Remarks</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rise src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Rise</p><div class=site-description itemprop=description>福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>678</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>34</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>117</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/rise-worlds title="Github → https://github.com/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:rise.worlds@outlook.com title="E-Mail → mailto:rise.worlds@outlook.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/rise-worlds title="知乎 → https://www.zhihu.com/people/rise-worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=https://twitter.com/riseworlds title="Twitter → https://twitter.com/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-twitter fa-fw hvr-icon"></i>
Twitter
</a></span><span class=links-of-social-item><a href=https://www.facebook.com/rise.worlds title="facebook → https://www.facebook.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
facebook
</a></span><span class=links-of-social-item><a href=https://youtube.com/@YiXuan title="YouTube → https://youtube.com/@YiXuan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
YouTube
</a></span><span class=links-of-social-item><a href=https://instagram.com/rise.worlds title="Instagram → https://instagram.com/rise.worlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
Instagram
</a></span><span class=links-of-social-item><a href=https://t.me/riseworlds title="Telegram → https://t.me/riseworlds" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-telegram fa-fw hvr-icon"></i>
Telegram</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.qipai360.cn title=https://www.qipai360.cn target=_blank>Qipai360</a></li><li class=links-of-blogroll-item><a href=https://www.cnblogs.com/flying_bat title=https://www.cnblogs.com/flying_bat target=_blank>博客园</a></li><li class=links-of-blogroll-item><a href=https://zishu.me title=https://zishu.me target=_blank>子舒的博客</a></li><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2004-10-06 15:24:00 +0800 +0800"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=2418817></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=5198></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-11-01 14:55:00 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/rise-worlds rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blogs.qipai360.cn/post/alpha-color-blending-in-d3d-2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Rise"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rise"><meta itemprop=description content="福兮祸兮，焉知所依？冬去冰泮，春来萌荣。朝生暮死，亦可惊鸿。知足者富，自足者强。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="D3D中的Alpha颜色混合（2）"><meta itemprop=description content="本篇是{% post_link alpha-color-blending-in-D3D-1 &ldquo;D3D中的Alpha颜色混合（1）&rdquo; %}的后续篇，主要讲利用ID3DXSprite来实现图片间的颜色透明效果。"></span><header class=post-header><h1 class=post-title itemprop="name headline">D3D中的Alpha颜色混合（2）</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2007年09月20日 21:35:00 CST" itemprop="dateCreated datePublished" datetime="2007-09-20 21:35:00 +0800 +0800">2007年09月20日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/gamedev/ itemprop=url rel=index><span itemprop=name>dev/GameDev</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>4125</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>9分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/post/alpha-color-blending-in-d3d-2/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>本篇是{% post_link alpha-color-blending-in-D3D-1 &ldquo;D3D中的Alpha颜色混合（1）&rdquo; %}的后续篇，主要讲利用ID3DXSprite来实现图片间的颜色透明效果。</p><a id=more></a><p>在一幅图象上透明的显示另一幅图象，是Alpha颜色混合的一个典型应用，如下图所示，瞄准镜图象背景透明地显示在老虎背景图象上。</p><p><img src=/imgs/img-lazy-loading.gif data-src=r_sprite1.jpg alt=示例图></p><p>实现瞄准镜的背景透明显示，首先需要准备如下两张图：</p><p><img src=/imgs/img-lazy-loading.gif data-src=r_gun.bmp alt=瞄准镜源图 >     <img src=/imgs/img-lazy-loading.gif data-src=r_gun1.bmp alt=瞄准镜Alpha通道>
  瞄准镜源图  （图1）    瞄准镜Alpha通道（屏蔽图）（图2）</p><p>Alpha通道图（屏蔽图）的黑色像素对应的源图像素不被显示出来，Alpha通道图（屏蔽图）的白色像素对应的源图像素会显示出来。</p><p>Alpha 通道图（屏蔽图）的像素颜色值是作为DirectX颜色结构体的alpha分量值来使用的。图2所示的黑色像素将产生一个为0的Alpha值，而白色像素将产生一个为1的Alpha值。如果此时将渲染管道流水线的D3DRS_SRCBLEND源混合因子参数设置为D3DBLEND_SRCALPHA，目标混合因子参数设置为D3DBLEND_INVSRCALPHA，然后先绘制图1所示的纹理图，再绘制图2所示的纹理图，那么混合后的结果将是图1所示的白色背景不被显示出来，仅显示一个圆和一个十字形，正因为Alpha通道图具有以上的屏蔽效果，因此图2所示的Alpha通道图也称为屏蔽图。</p><p>如果直接采用上面的方法实现图形间的透明效果，那么需要进行3次纹理贴图，并设置好相应的混合参数。第一次先绘制出老虎背景图，接着绘制瞄准镜源图，最后绘制瞄准镜Alpha通道图。这样做显然是比较繁琐的，因此可用DirectX提供的ID3DXSprite接口进行绘制。</p><p>首先，在DirectX安装目录下的Utilities目录下执行DxTex.exe，这是DirectX提供的用于生成纹理图象的Alpha通道图的工具。</p><p>（注：如果你执行DxTex.exe时系统提示如下信息：</p><p>Unable to create Direct3D Device. Please make sure your desktop color depth is 16 or 32 bit, and that d3dref.dll is installed.</p><p>请参考解决方案
<a href=http://www.cppblog.com/lovedday/archive/2007/05/15/24156.html title=运行DxTex.exe碰到的问题 rel="noopener external nofollow noreferrer" target=_blank class=exturl>运行DxTex.exe碰到的问题
</a>）</p><p>首先执行"File - Open"菜单，将图1所示的瞄准镜源图打开，然后执行"Change Surface Format &mldr;" 菜单，重新设置bmp图象的像素颜色格式为A8R8G8B8，即添加一个Alpha颜色值。</p><p><img src=/imgs/img-lazy-loading.gif data-src=r_DxTex1.jpg alt>    <img src=/imgs/img-lazy-loading.gif data-src=r_DxTex2.jpg alt></p><p>执行新增加的"File - Open onto alpha channel of this texture&mldr;&ldquo;菜单，弹出一个文件打开对话框，选择图2所示的瞄准镜Alpha通道图并打开，DxTex将自动把Alpha通道图的屏蔽信息插入图象中。如下图所示，DxTex默认的淡蓝色背景色表示该像素颜色已为透明色。最后，执行"File - Save"菜单，将同时具有源图信息和Alpha通道信息的图象保存为DDS格式的gun.dds。</p><p><img src=/imgs/img-lazy-loading.gif data-src=r_DxTex3.jpg alt></p><p>生成瞄准镜的DDS文件后，就可以利用d3dx9.lib库的ID3DXSprite提供的方法，将瞄准镜背景透明地显示出来。ID3DXSprite接口对象是通过D3DXCreateSprite函数进行创建的，来看看该函数的具体使用信息：</p><p>Creates a sprite object which is associated with a particular device. Sprite objects are used to draw 2D images to the screen.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>HRESULT</span> <span class=nf>D3DXCreateSprite</span><span class=p>(</span><span class=n>LPDIRECT3DDEVICE9</span> <span class=n>pDevice</span><span class=p>,</span> <span class=n>LPD3DXSPRITE</span> <span class=o>*</span> <span class=n>ppSprite</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=parameters>Parameters
<a class=header-anchor href=#parameters></a></h4><p><em>pDevice</em></p><p>[in] Pointer to an IDirect3DDevice9 interface, the device to be associated with the sprite.</p><p><em>ppSprite</em></p><p>[out] Address of a pointer to an ID3DXSprite interface. This interface allows the user to access sprite functions.</p><h4 id=return-values>Return Values
<a class=header-anchor href=#return-values></a></h4><p>If the function succeeds, the return value is S_OK. If the function fails, the return value can be one of the following: D3DERR_INVALIDCALL, E_OUTOFMEMORY.</p><h4 id=remarks>Remarks
<a class=header-anchor href=#remarks></a></h4><p>This interface can be used to draw two dimensional images in screen space of the associated device.</p><p>再来看看SDK文档提供的有关ID3DXSprite的使用说明:</p><p>The ID3DXSprite interface provides a set of methods that simplify the process of drawing sprites using Microsoft Direct3D.</p><h2 id=id3dxsprite-members>ID3DXSprite Members
<a class=header-anchor href=#id3dxsprite-members></a></h2><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td>ID3DXSprite::Begin</td><td>Prepares a device for drawing sprites.</td></tr><tr><td>ID3DXSprite::Draw</td><td>Adds a sprite to the list of batched sprites.</td></tr><tr><td>ID3DXSprite::End</td><td>Calls ID3DXSprite::Flush and restores the device state to how it was before <strong>ID3DXSprite::Begin</strong> was called.</td></tr><tr><td><strong>ID3DXSprite::Flush</strong></td><td>Forces all batched sprites to be submitted to the device. Device states remain as they were after the last call to <strong>ID3DXSprite::Begin</strong>. The list of batched sprites is then cleared.</td></tr><tr><td>ID3DXSprite::GetDevice</td><td>Retrieves the device associated with the sprite object.</td></tr><tr><td>ID3DXSprite::GetTransform</td><td>Gets the sprite transform.</td></tr><tr><td>ID3DXSprite::OnLostDevice</td><td>Use this method to release all references to video memory resources and delete all stateblocks. This method should be called whenever a device is lost or before resetting a device.</td></tr><tr><td>ID3DXSprite::OnResetDevice</td><td>Use this method to re-acquire resources and save initial state.</td></tr><tr><td>ID3DXSprite::SetTransform</td><td>Sets the sprite transform.</td></tr><tr><td>ID3DXSprite::SetWorldViewLH</td><td>Sets the left-handed world-view transform for a sprite. A call to this method is required before billboarding or sorting sprites.</td></tr><tr><td>ID3DXSprite::SetWorldViewRH</td><td>Sets the right-handed world-view transform for a sprite. A call to this method is required before billboarding or sorting sprites.</td></tr></tbody></table><h4 id=remarks-1>Remarks
<a class=header-anchor href=#remarks-1></a></h4><p>The <strong>ID3DXSprite</strong> interface is obtained by calling the D3DXCreateSprite function.</p><p>The application typically first calls <strong>ID3DXSprite::Begin</strong>, which allows control over the device render state, alpha blending, and sprite transformation and sorting. Then for each sprite to be displayed, call <strong>ID3DXSprite::Draw</strong>. <strong>ID3DXSprite::Draw</strong> can be called repeatedly to store any number of sprites. To display the batched sprites to the device, call <strong>ID3DXSprite::End</strong> or <strong>ID3DXSprite::Flush</strong>.</p><p>The LPD3DXSPRITE type is defined as a pointer to the <strong>ID3DXSprite</strong> interface.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>typedef interface ID3DXSprite ID3DXSprite;&lt;br&gt;typedef interface ID3DXSprite *LPD3DXSPRITE;&lt;br&gt;</span></span></code></pre></td></tr></table></div></div><p>Begin方法和End方法表明绘制精灵图象的开始和结束，这是一对配套函数，必须用在IDirect3DDevice9::BeginScene和IDirect3DDevice9::EndScene的调用之间。</p><p>接着来看看Begin方法的使用说明:</p><p>Prepares a device for drawing sprites.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>HRESULT</span> <span class=nf>Begin</span><span class=p>(</span><span class=n>DWORD</span> <span class=n>Flags</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=parameters-1>Parameters
<a class=header-anchor href=#parameters-1></a></h4><p><em>Flags</em></p><p>[in] Combination of zero or more flags that describe sprite rendering options. For this method, the valid flags are:</p><ul><li>D3DXSPRITE_ALPHABLEND</li><li>D3DXSprite__BILLBOARD</li><li>D3DXSPRITE_DONOTMODIFY_RENDERSTATE</li><li>D3DXSPRITE_DONOTSAVESTATE</li><li>D3DXSPRITE_OBJECTSPACE</li><li>D3DXSprite__SORT_DEPTH_BACKTOFRONT</li><li>D3DXSprite__SORT_DEPTH_FRONTTOBACK</li><li>D3DXSprite__SORT_TEXTURE</li></ul><p>For a description of the flags and for information on how to control device state capture and device view transforms, see D3DXSPRITE.</p><h4 id=return-values-1>Return Values
<a class=header-anchor href=#return-values-1></a></h4><p>If the method succeeds, the return value is S_OK. If the method fails, the return value can be one of the following: D3DERR_INVALIDCALL, D3DERR_OUTOFVIDEOMEMORY, D3DXERR_INVALIDDATA, E_OUTOFMEMORY.</p><h4 id=remarks-2>Remarks
<a class=header-anchor href=#remarks-2></a></h4><p>This method must be called from inside a IDirect3DDevice9::BeginScene . . . IDirect3DDevice9::EndScene sequence. ID3DXSprite::Begin cannot be used as a substitute for either <strong>IDirect3DDevice9::BeginScene</strong> or ID3DXRenderToSurface::BeginScene.</p><p>This method will set the following states on the device.</p><p>Render States:</p><table><thead><tr><th>Type (D3DRENDERSTATETYPE)</th><th>Value</th></tr></thead><tbody><tr><td>D3DRS_ALPHABLENDENABLE</td><td>TRUE</td></tr><tr><td>D3DRS_ALPHAFUNC</td><td>D3DCMP_GREATER</td></tr><tr><td>D3DRS_ALPHAREF</td><td>0x00</td></tr><tr><td>D3DRS_ALPHATESTENABLE</td><td>AlphaCmpCaps</td></tr><tr><td>D3DRS_BLENDOP</td><td>D3DBLENDOP_ADD</td></tr><tr><td>D3DRS_CLIPPING</td><td>TRUE</td></tr><tr><td>D3DRS_CLIPPLANEENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_COLORWRITEENABLE</td><td>D3DCOLORWRITEENABLE_ALPHA</td></tr><tr><td>D3DRS_CULLMODE</td><td>D3DCULL_NONE</td></tr><tr><td>D3DRS_DESTBLEND</td><td>D3DBLEND_INVSRCALPHA</td></tr><tr><td>D3DRS_DIFFUSEMATERIALSOURCE</td><td>D3DMCS_COLOR1</td></tr><tr><td>D3DRS_ENABLEADAPTIVETESSELLATION</td><td>FALSE</td></tr><tr><td>D3DRS_FILLMODE</td><td>D3DFILL_SOLID</td></tr><tr><td>D3DRS_FOGENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_INDEXEDVERTEXBLENDENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_LIGHTING</td><td>FALSE</td></tr><tr><td>D3DRS_RANGEFOGENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_SEPARATEALPHABLENDENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_SHADEMODE</td><td>D3DSHADE_GOURAUD</td></tr><tr><td>D3DRS_SPECULARENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_SRCBLEND</td><td>D3DBLEND_SRCALPHA</td></tr><tr><td>D3DRS_SRGBWRITEENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_STENCILENABLE</td><td>FALSE</td></tr><tr><td>D3DRS_VERTEXBLEND</td><td>FALSE</td></tr><tr><td>D3DRS_WRAP0</td><td>0</td></tr></tbody></table><p>Texture Stage States:</p><table><thead><tr><th>Stage Identifier</th><th>Type (D3DTEXTURESTAGESTATETYPE)</th><th>Value</th></tr></thead><tbody><tr><td>0</td><td>D3DTSS_ALPHAARG1</td><td>D3DTA_TEXTURE</td></tr><tr><td>0</td><td>D3DTSS_ALPHAARG2</td><td>D3DTA_DIFFUSE</td></tr><tr><td>0</td><td>D3DTSS_ALPHAOP</td><td>D3DTOP_MODULATE</td></tr><tr><td>0</td><td>D3DTSS_COLORARG1</td><td>D3DTA_TEXTURE</td></tr><tr><td>0</td><td>D3DTSS_COLORARG2</td><td>D3DTA_DIFFUSE</td></tr><tr><td>0</td><td>D3DTSS_COLOROP</td><td>D3DTOP_MODULATE</td></tr><tr><td>0</td><td>D3DTSS_TEXCOORDINDEX</td><td>0</td></tr><tr><td>0</td><td>D3DTSS_TEXTURETRANSFORMFLAGS</td><td>D3DTTFF_DISABLE</td></tr><tr><td>1</td><td>D3DTSS_ALPHAOP</td><td>D3DTOP_DISABLE</td></tr><tr><td>1</td><td>D3DTSS_COLOROP</td><td>D3DTOP_DISABLE</td></tr></tbody></table><p>Sampler States:</p><table><thead><tr><th>Sampler Stage Index</th><th>Type (D3DSAMPLERSTATETYPE)</th><th>Value</th></tr></thead><tbody><tr><td>0</td><td>D3DSAMP_ADDRESSU</td><td>D3DTADDRESS_CLAMP</td></tr><tr><td>0</td><td>D3DSAMP_ADDRESSV</td><td>D3DTADDRESS_CLAMP</td></tr><tr><td>0</td><td>D3DSAMP_MAGFILTER</td><td>D3DTEXF_ANISOTROPIC if TextureFilterCaps includes D3DPTFILTERCAPS_MAGFANISOTROPIC; otherwise D3DTEXF_LINEAR</td></tr><tr><td>0</td><td>D3DSAMP_MAXMIPLEVEL</td><td>0</td></tr><tr><td>0</td><td>D3DSAMP_MAXANISOTROPY</td><td>MaxAnisotropy</td></tr><tr><td>0</td><td>D3DSAMP_MINFILTER</td><td>D3DTEXF_ANISOTROPIC if TextureFilterCaps includes D3DPTFILTERCAPS_MINFANISOTROPIC; otherwise D3DTEXF_LINEAR</td></tr><tr><td>0</td><td>D3DSAMP_MIPFILTER</td><td>D3DTEXF_LINEAR if TextureFilterCaps includes D3DPTFILTERCAPS_MIPFLINEAR; otherwise D3DTEXF_POINT</td></tr><tr><td>0</td><td>D3DSAMP_MIPMAPLODBIAS</td><td>0</td></tr><tr><td>0</td><td>D3DSAMP_SRGBTEXTURE</td><td>0</td></tr></tbody></table><p><strong><em>Note</em></strong> This method disables N-patches.</p><p>参数Flags允许设置的D3DXSPRITE模式如下所示：</p><p>The following flags are used to specify sprite rendering options to the flags parameter in the ID3DXSprite::Begin method:</p><table><thead><tr><th>#define</th><th>Description</th></tr></thead><tbody><tr><td>D3DXSPRITE_DONOTSAVESTATE</td><td>The device state is not to be saved or restored when <strong>ID3DXSprite::Begin</strong> or ID3DXSprite::End is called.</td></tr><tr><td>D3DXSPRITE_DONOTMODIFY_RENDERSTATE</td><td>The device render state is not to be changed when <strong>ID3DXSprite::Begin</strong> is called. The device is assumed to be in a valid state to draw vertices containing UsageIndex = 0 in the D3DDECLUSAGE_POSITION, D3DDECLUSAGE_TEXCOORD, and D3DDECLUSAGE_COLOR data.</td></tr><tr><td>D3DXSPRITE_OBJECTSPACE</td><td>The world, view, and projection transforms are not modified. The transforms currently set to the device are used to transform the sprites when the batched sprites are drawn (when ID3DXSprite::Flush or <strong>ID3DXSprite::End</strong> is called). If this flag is not specified, then world, view, and projection transforms are modified so that sprites are drawn in screen-space coordinates.</td></tr><tr><td>D3DXSPRITE_BILLBOARD</td><td>Each sprite will be rotated about its center so that it is facing the viewer. ID3DXSprite::SetWorldViewLH or ID3DXSprite::SetWorldViewRH must be called first.</td></tr><tr><td>D3DXSPRITE_ALPHABLEND</td><td>Enables alpha blending with D3DRS_ALPHATESTENABLE set to TRUE (for nonzero alpha). D3DBLEND_SRCALPHA will be the source blend state, and D3DBLEND_INVSRCALPHA will be the destination blend state in calls to IDirect3DDevice9::SetRenderState. See Alpha Blending State (Direct3D 9). ID3DXFont expects this flag to be set when drawing text.</td></tr><tr><td>D3DXSPRITE_SORT_TEXTURE</td><td>Sort sprites by texture prior to drawing. This can improve performance when drawing non-overlapping sprites of uniform depth.</td></tr><tr><td>You may also combine D3DXSPRITE_SORT_TEXTURE with either D3DXSPRITE_SORT_DEPTH_FRONTTOBACK or D3DXSPRITE_SORT_DEPTH_BACKTOFRONT. This will sort the list of sprites by depth first and texture second.</td><td></td></tr></tbody></table><p>|
| D3DXSPRITE_SORT_DEPTH_FRONTTOBACK | Sprites are sorted by depth in front-to-back order prior to drawing. This procedure is recommended when drawing opaque sprites of varying depths.</p><p>You may combine D3DXSPRITE_SORT_DEPTH_FRONTTOBACK with D3DXSPRITE_SORT_TEXTURE to sort first by depth, and second by texture.</p><p>|
| D3DXSPRITE_SORT_DEPTH_BACKTOFRONT | Sprites are sorted by depth in back-to-front order prior to drawing. This procedure is recommended when drawing transparent sprites of varying depths.</p><p>You may combine D3DXSPRITE_SORT_DEPTH_BACKTOFRONT with D3DXSPRITE_SORT_TEXTURE to sort first by depth, and second by texture.</p><p>|
| D3DXSPRITE_DO_NOT_ADDREF_TEXTURE | Disables calling AddRef() on every draw, and Release() on Flush() for better performance. |</p><p>再来看看End方法的使用信息：</p><p>Calls ID3DXSprite::Flush and restores the device state to how it was before ID3DXSprite::Begin was called.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>HRESULT End();</span></span></code></pre></td></tr></table></div></div><h4 id=parameters-2>Parameters
<a class=header-anchor href=#parameters-2></a></h4><p>None.</p><h4 id=return-values-2>Return Values
<a class=header-anchor href=#return-values-2></a></h4><p>If the method succeeds, the return value is S_OK. If the method fails, the following value will be returned.</p><p>D3DERR_INVALIDCALL</p><h4 id=remarks-3>Remarks
<a class=header-anchor href=#remarks-3></a></h4><p>ID3DXSprite::End cannot be used as a substitute for either IDirect3DDevice9::EndScene or ID3DXRenderToSurface::EndScene.</p><p>Draw方法用来在指定位置绘制精灵，来看看它的使用说明：</p><p>Adds a sprite to the list of batched sprites.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>HRESULT</span> <span class=nf>Draw</span><span class=p>(</span><span class=n>LPDIRECT3DTEXTURE9</span> <span class=n>pTexture</span><span class=p>,</span> <span class=n>CONST</span> <span class=n>RECT</span> <span class=o>*</span> <span class=n>pSrcRect</span><span class=p>,</span> <span class=n>CONST</span> <span class=n>D3DXVECTOR3</span> <span class=o>*</span> <span class=n>pCenter</span><span class=p>,</span> <span class=n>CONST</span> <span class=n>D3DXVECTOR3</span> <span class=o>*</span> <span class=n>pPosition</span><span class=p>,</span> <span class=n>D3DCOLOR</span> <span class=n>Color</span><span class=o>&lt;</span><span class=n>br</span><span class=o>&gt;</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=parameters-3>Parameters
<a class=header-anchor href=#parameters-3></a></h4><p><em>pTexture</em></p><p>[in] Pointer to an IDirect3DTexture9 interface that represents the sprite texture.</p><p><em>pSrcRect</em></p><p>[in] Pointer to a RECT structure that indicates the portion of the source texture to use for the sprite. If this parameter is NULL, then the entire source image is used for the sprite.</p><p><em>pCenter</em></p><p>[in] Pointer to a D3DXVECTOR3 vector that identifies the center of the sprite. If this argument is NULL, the point (0,0,0) is used, which is the upper-left corner.</p><p><em>pPosition</em></p><p>[in] Pointer to a <strong>D3DXVECTOR3</strong> vector that identifies the position of the sprite. If this argument is NULL, the point (0,0,0) is used, which is the upper-left corner.</p><p><em>Color</em></p><p>[in] D3DCOLOR type. The color and alpha channels are modulated by this value. A value of 0xFFFFFFFF maintains the original source color and alpha data. Use the D3DCOLOR_RGBA macro to help generate this color.</p><h4 id=return-values-3>Return Values
<a class=header-anchor href=#return-values-3></a></h4><p>If the method succeeds, the return value is S_OK. If the method fails, the return value can be one of the following: D3DERR_INVALIDCALL, D3DXERR_INVALIDDATA.</p><h4 id=remarks-4>Remarks
<a class=header-anchor href=#remarks-4></a></h4><p>To scale, rotate, or translate a sprite, call ID3DXSprite::SetTransform with a matrix that contains the scale, rotate, and translate (SRT) values, before calling ID3DXSprite::Draw. For information about setting SRT values in a matrix, see Matrix Transforms.</p><p> </p><hr><p>好了，现在来看一个例子：</p><p>需要在工程中设置链接d3dx9.lib d3d9.lib dinput8.lib dxguid.lib。
由于文件中用到了GE_APP和GE_INPUT这两个类，它的具体使用说明请参阅
<a href=http://www.cppblog.com/lovedday/archive/2007/05/07/23546.html title=主窗口和DirectInput的封装。 rel="noopener external nofollow noreferrer" target=_blank class=exturl>主窗口和DirectInput的封装。</a></p><p>若发现代码中存在错误，敬请指出。</p><p><img src=/imgs/img-lazy-loading.gif data-src=shoot.rar alt=源码及素材下载></p><p>来看看shoot.h的定义：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31>31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32>32</a>
</span><span class=lnt id=hl-5-33><a class=lnlinks href=#hl-5-33>33</a>
</span><span class=lnt id=hl-5-34><a class=lnlinks href=#hl-5-34>34</a>
</span><span class=lnt id=hl-5-35><a class=lnlinks href=#hl-5-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*************************************************************************************
</span></span></span><span class=line><span class=cl><span class=cm> [Include File]
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm> PURPOSE: 
</span></span></span><span class=line><span class=cl><span class=cm>    Define for alpha blending test, use ID3DXSprit interface.
</span></span></span><span class=line><span class=cl><span class=cm>*************************************************************************************/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#ifndef SHOOT_H
</span></span></span><span class=line><span class=cl><span class=cp>#define SHOOT_H
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>class</span> <span class=n>SHOOT</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nl>private</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>IDirect3D9</span><span class=o>*</span> <span class=n>_d3d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IDirect3DDevice9</span><span class=o>*</span> <span class=n>_d3d_device</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IDirect3DTexture9</span><span class=o>*</span> <span class=n>_texture_tiger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>IDirect3DTexture9</span><span class=o>*</span> <span class=n>_texture_gun</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ID3DXSprite</span><span class=o>*</span> <span class=n>_sprite_tiger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ID3DXSprite</span><span class=o>*</span> <span class=n>_sprite_gun</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nl>public</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>m_gun_pos_x</span><span class=p>,</span> <span class=n>m_gun_pos_y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nl>public</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nf>SHOOT</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=nf>SHOOT</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=kt>bool</span> <span class=nf>Create_D3D_Device</span><span class=p>(</span><span class=n>HWND</span> <span class=n>hwnd</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>full_screen</span> <span class=o>=</span> <span class=nb>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>Create_Sprite</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>Create_Sprite_Texture</span><span class=p>(</span><span class=n>IDirect3DTexture9</span><span class=o>**</span> <span class=n>texture</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span><span class=o>*</span> <span class=n>image_file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>Release_COM_Object</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endif</span></span></span></code></pre></td></tr></table></div></div><p>再来看看shoot.cpp的定义：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>  1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>  2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>  3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>  4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>  5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>  6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7>  7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8>  8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9>  9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10> 10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11> 11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12> 12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13> 13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14> 14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15> 15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16> 16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17> 17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18> 18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19> 19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20> 20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21> 21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22> 22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23> 23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24> 24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25> 25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26> 26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27> 27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28> 28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29> 29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30> 30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31> 31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32> 32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33> 33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34> 34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35> 35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36> 36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37> 37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38> 38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39> 39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40> 40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41> 41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42> 42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43> 43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44> 44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45> 45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46> 46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47> 47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48> 48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49> 49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50> 50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51> 51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52> 52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53> 53</a>
</span><span class=lnt id=hl-6-54><a class=lnlinks href=#hl-6-54> 54</a>
</span><span class=lnt id=hl-6-55><a class=lnlinks href=#hl-6-55> 55</a>
</span><span class=lnt id=hl-6-56><a class=lnlinks href=#hl-6-56> 56</a>
</span><span class=lnt id=hl-6-57><a class=lnlinks href=#hl-6-57> 57</a>
</span><span class=lnt id=hl-6-58><a class=lnlinks href=#hl-6-58> 58</a>
</span><span class=lnt id=hl-6-59><a class=lnlinks href=#hl-6-59> 59</a>
</span><span class=lnt id=hl-6-60><a class=lnlinks href=#hl-6-60> 60</a>
</span><span class=lnt id=hl-6-61><a class=lnlinks href=#hl-6-61> 61</a>
</span><span class=lnt id=hl-6-62><a class=lnlinks href=#hl-6-62> 62</a>
</span><span class=lnt id=hl-6-63><a class=lnlinks href=#hl-6-63> 63</a>
</span><span class=lnt id=hl-6-64><a class=lnlinks href=#hl-6-64> 64</a>
</span><span class=lnt id=hl-6-65><a class=lnlinks href=#hl-6-65> 65</a>
</span><span class=lnt id=hl-6-66><a class=lnlinks href=#hl-6-66> 66</a>
</span><span class=lnt id=hl-6-67><a class=lnlinks href=#hl-6-67> 67</a>
</span><span class=lnt id=hl-6-68><a class=lnlinks href=#hl-6-68> 68</a>
</span><span class=lnt id=hl-6-69><a class=lnlinks href=#hl-6-69> 69</a>
</span><span class=lnt id=hl-6-70><a class=lnlinks href=#hl-6-70> 70</a>
</span><span class=lnt id=hl-6-71><a class=lnlinks href=#hl-6-71> 71</a>
</span><span class=lnt id=hl-6-72><a class=lnlinks href=#hl-6-72> 72</a>
</span><span class=lnt id=hl-6-73><a class=lnlinks href=#hl-6-73> 73</a>
</span><span class=lnt id=hl-6-74><a class=lnlinks href=#hl-6-74> 74</a>
</span><span class=lnt id=hl-6-75><a class=lnlinks href=#hl-6-75> 75</a>
</span><span class=lnt id=hl-6-76><a class=lnlinks href=#hl-6-76> 76</a>
</span><span class=lnt id=hl-6-77><a class=lnlinks href=#hl-6-77> 77</a>
</span><span class=lnt id=hl-6-78><a class=lnlinks href=#hl-6-78> 78</a>
</span><span class=lnt id=hl-6-79><a class=lnlinks href=#hl-6-79> 79</a>
</span><span class=lnt id=hl-6-80><a class=lnlinks href=#hl-6-80> 80</a>
</span><span class=lnt id=hl-6-81><a class=lnlinks href=#hl-6-81> 81</a>
</span><span class=lnt id=hl-6-82><a class=lnlinks href=#hl-6-82> 82</a>
</span><span class=lnt id=hl-6-83><a class=lnlinks href=#hl-6-83> 83</a>
</span><span class=lnt id=hl-6-84><a class=lnlinks href=#hl-6-84> 84</a>
</span><span class=lnt id=hl-6-85><a class=lnlinks href=#hl-6-85> 85</a>
</span><span class=lnt id=hl-6-86><a class=lnlinks href=#hl-6-86> 86</a>
</span><span class=lnt id=hl-6-87><a class=lnlinks href=#hl-6-87> 87</a>
</span><span class=lnt id=hl-6-88><a class=lnlinks href=#hl-6-88> 88</a>
</span><span class=lnt id=hl-6-89><a class=lnlinks href=#hl-6-89> 89</a>
</span><span class=lnt id=hl-6-90><a class=lnlinks href=#hl-6-90> 90</a>
</span><span class=lnt id=hl-6-91><a class=lnlinks href=#hl-6-91> 91</a>
</span><span class=lnt id=hl-6-92><a class=lnlinks href=#hl-6-92> 92</a>
</span><span class=lnt id=hl-6-93><a class=lnlinks href=#hl-6-93> 93</a>
</span><span class=lnt id=hl-6-94><a class=lnlinks href=#hl-6-94> 94</a>
</span><span class=lnt id=hl-6-95><a class=lnlinks href=#hl-6-95> 95</a>
</span><span class=lnt id=hl-6-96><a class=lnlinks href=#hl-6-96> 96</a>
</span><span class=lnt id=hl-6-97><a class=lnlinks href=#hl-6-97> 97</a>
</span><span class=lnt id=hl-6-98><a class=lnlinks href=#hl-6-98> 98</a>
</span><span class=lnt id=hl-6-99><a class=lnlinks href=#hl-6-99> 99</a>
</span><span class=lnt id=hl-6-100><a class=lnlinks href=#hl-6-100>100</a>
</span><span class=lnt id=hl-6-101><a class=lnlinks href=#hl-6-101>101</a>
</span><span class=lnt id=hl-6-102><a class=lnlinks href=#hl-6-102>102</a>
</span><span class=lnt id=hl-6-103><a class=lnlinks href=#hl-6-103>103</a>
</span><span class=lnt id=hl-6-104><a class=lnlinks href=#hl-6-104>104</a>
</span><span class=lnt id=hl-6-105><a class=lnlinks href=#hl-6-105>105</a>
</span><span class=lnt id=hl-6-106><a class=lnlinks href=#hl-6-106>106</a>
</span><span class=lnt id=hl-6-107><a class=lnlinks href=#hl-6-107>107</a>
</span><span class=lnt id=hl-6-108><a class=lnlinks href=#hl-6-108>108</a>
</span><span class=lnt id=hl-6-109><a class=lnlinks href=#hl-6-109>109</a>
</span><span class=lnt id=hl-6-110><a class=lnlinks href=#hl-6-110>110</a>
</span><span class=lnt id=hl-6-111><a class=lnlinks href=#hl-6-111>111</a>
</span><span class=lnt id=hl-6-112><a class=lnlinks href=#hl-6-112>112</a>
</span><span class=lnt id=hl-6-113><a class=lnlinks href=#hl-6-113>113</a>
</span><span class=lnt id=hl-6-114><a class=lnlinks href=#hl-6-114>114</a>
</span><span class=lnt id=hl-6-115><a class=lnlinks href=#hl-6-115>115</a>
</span><span class=lnt id=hl-6-116><a class=lnlinks href=#hl-6-116>116</a>
</span><span class=lnt id=hl-6-117><a class=lnlinks href=#hl-6-117>117</a>
</span><span class=lnt id=hl-6-118><a class=lnlinks href=#hl-6-118>118</a>
</span><span class=lnt id=hl-6-119><a class=lnlinks href=#hl-6-119>119</a>
</span><span class=lnt id=hl-6-120><a class=lnlinks href=#hl-6-120>120</a>
</span><span class=lnt id=hl-6-121><a class=lnlinks href=#hl-6-121>121</a>
</span><span class=lnt id=hl-6-122><a class=lnlinks href=#hl-6-122>122</a>
</span><span class=lnt id=hl-6-123><a class=lnlinks href=#hl-6-123>123</a>
</span><span class=lnt id=hl-6-124><a class=lnlinks href=#hl-6-124>124</a>
</span><span class=lnt id=hl-6-125><a class=lnlinks href=#hl-6-125>125</a>
</span><span class=lnt id=hl-6-126><a class=lnlinks href=#hl-6-126>126</a>
</span><span class=lnt id=hl-6-127><a class=lnlinks href=#hl-6-127>127</a>
</span><span class=lnt id=hl-6-128><a class=lnlinks href=#hl-6-128>128</a>
</span><span class=lnt id=hl-6-129><a class=lnlinks href=#hl-6-129>129</a>
</span><span class=lnt id=hl-6-130><a class=lnlinks href=#hl-6-130>130</a>
</span><span class=lnt id=hl-6-131><a class=lnlinks href=#hl-6-131>131</a>
</span><span class=lnt id=hl-6-132><a class=lnlinks href=#hl-6-132>132</a>
</span><span class=lnt id=hl-6-133><a class=lnlinks href=#hl-6-133>133</a>
</span><span class=lnt id=hl-6-134><a class=lnlinks href=#hl-6-134>134</a>
</span><span class=lnt id=hl-6-135><a class=lnlinks href=#hl-6-135>135</a>
</span><span class=lnt id=hl-6-136><a class=lnlinks href=#hl-6-136>136</a>
</span><span class=lnt id=hl-6-137><a class=lnlinks href=#hl-6-137>137</a>
</span><span class=lnt id=hl-6-138><a class=lnlinks href=#hl-6-138>138</a>
</span><span class=lnt id=hl-6-139><a class=lnlinks href=#hl-6-139>139</a>
</span><span class=lnt id=hl-6-140><a class=lnlinks href=#hl-6-140>140</a>
</span><span class=lnt id=hl-6-141><a class=lnlinks href=#hl-6-141>141</a>
</span><span class=lnt id=hl-6-142><a class=lnlinks href=#hl-6-142>142</a>
</span><span class=lnt id=hl-6-143><a class=lnlinks href=#hl-6-143>143</a>
</span><span class=lnt id=hl-6-144><a class=lnlinks href=#hl-6-144>144</a>
</span><span class=lnt id=hl-6-145><a class=lnlinks href=#hl-6-145>145</a>
</span><span class=lnt id=hl-6-146><a class=lnlinks href=#hl-6-146>146</a>
</span><span class=lnt id=hl-6-147><a class=lnlinks href=#hl-6-147>147</a>
</span><span class=lnt id=hl-6-148><a class=lnlinks href=#hl-6-148>148</a>
</span><span class=lnt id=hl-6-149><a class=lnlinks href=#hl-6-149>149</a>
</span><span class=lnt id=hl-6-150><a class=lnlinks href=#hl-6-150>150</a>
</span><span class=lnt id=hl-6-151><a class=lnlinks href=#hl-6-151>151</a>
</span><span class=lnt id=hl-6-152><a class=lnlinks href=#hl-6-152>152</a>
</span><span class=lnt id=hl-6-153><a class=lnlinks href=#hl-6-153>153</a>
</span><span class=lnt id=hl-6-154><a class=lnlinks href=#hl-6-154>154</a>
</span><span class=lnt id=hl-6-155><a class=lnlinks href=#hl-6-155>155</a>
</span><span class=lnt id=hl-6-156><a class=lnlinks href=#hl-6-156>156</a>
</span><span class=lnt id=hl-6-157><a class=lnlinks href=#hl-6-157>157</a>
</span><span class=lnt id=hl-6-158><a class=lnlinks href=#hl-6-158>158</a>
</span><span class=lnt id=hl-6-159><a class=lnlinks href=#hl-6-159>159</a>
</span><span class=lnt id=hl-6-160><a class=lnlinks href=#hl-6-160>160</a>
</span><span class=lnt id=hl-6-161><a class=lnlinks href=#hl-6-161>161</a>
</span><span class=lnt id=hl-6-162><a class=lnlinks href=#hl-6-162>162</a>
</span><span class=lnt id=hl-6-163><a class=lnlinks href=#hl-6-163>163</a>
</span><span class=lnt id=hl-6-164><a class=lnlinks href=#hl-6-164>164</a>
</span><span class=lnt id=hl-6-165><a class=lnlinks href=#hl-6-165>165</a>
</span><span class=lnt id=hl-6-166><a class=lnlinks href=#hl-6-166>166</a>
</span><span class=lnt id=hl-6-167><a class=lnlinks href=#hl-6-167>167</a>
</span><span class=lnt id=hl-6-168><a class=lnlinks href=#hl-6-168>168</a>
</span><span class=lnt id=hl-6-169><a class=lnlinks href=#hl-6-169>169</a>
</span><span class=lnt id=hl-6-170><a class=lnlinks href=#hl-6-170>170</a>
</span><span class=lnt id=hl-6-171><a class=lnlinks href=#hl-6-171>171</a>
</span><span class=lnt id=hl-6-172><a class=lnlinks href=#hl-6-172>172</a>
</span><span class=lnt id=hl-6-173><a class=lnlinks href=#hl-6-173>173</a>
</span><span class=lnt id=hl-6-174><a class=lnlinks href=#hl-6-174>174</a>
</span><span class=lnt id=hl-6-175><a class=lnlinks href=#hl-6-175>175</a>
</span><span class=lnt id=hl-6-176><a class=lnlinks href=#hl-6-176>176</a>
</span><span class=lnt id=hl-6-177><a class=lnlinks href=#hl-6-177>177</a>
</span><span class=lnt id=hl-6-178><a class=lnlinks href=#hl-6-178>178</a>
</span><span class=lnt id=hl-6-179><a class=lnlinks href=#hl-6-179>179</a>
</span><span class=lnt id=hl-6-180><a class=lnlinks href=#hl-6-180>180</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*************************************************************************************
</span></span></span><span class=line><span class=cl><span class=cm> [Implement File]
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm> PURPOSE: 
</span></span></span><span class=line><span class=cl><span class=cm>    Define for alpha blending test, use ID3DXSprit interface.
</span></span></span><span class=line><span class=cl><span class=cm>*************************************************************************************/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;GE_COMMON.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;GE_INPUT.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;shoot.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Constructor, initialize data.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>SHOOT</span><span class=o>::</span><span class=nf>SHOOT</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>_d3d</span>            <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>_d3d_device</span>     <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>_texture_tiger</span>  <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>_texture_gun</span>    <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>_sprite_tiger</span>   <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>_sprite_gun</span>     <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>m_gun_pos_x</span>     <span class=o>=</span> <span class=mf>500.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>m_gun_pos_y</span>     <span class=o>=</span> <span class=mf>180.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Destructor, release COM object.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>SHOOT</span><span class=o>::~</span><span class=nf>SHOOT</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Release_COM_Object</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Create direct3D interface and direct3D device.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>bool</span> <span class=n>SHOOT</span><span class=o>::</span><span class=nf>Create_D3D_Device</span><span class=p>(</span><span class=n>HWND</span> <span class=n>hwnd</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>full_screen</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a IDirect3D9 object and returns an interace to it.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_d3d</span> <span class=o>=</span> <span class=nf>Direct3DCreate9</span><span class=p>(</span><span class=n>D3D_SDK_VERSION</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>_d3d</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// retrieve adapter capability
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>D3DCAPS9</span> <span class=n>d3d_caps</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>_d3d</span><span class=o>-&gt;</span><span class=nf>GetDeviceCaps</span><span class=p>(</span><span class=n>D3DADAPTER_DEFAULT</span><span class=p>,</span> <span class=n>D3DDEVTYPE_HAL</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>d3d_caps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>hardware_process_enable</span> <span class=o>=</span> <span class=p>(</span><span class=n>d3d_caps</span><span class=p>.</span><span class=n>DevCaps</span> <span class=o>&amp;</span> <span class=n>D3DDEVCAPS_HWTRANSFORMANDLIGHT</span> <span class=o>?</span> <span class=nb>true</span> <span class=o>:</span> <span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Retrieves the current display mode of the adapter.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>D3DDISPLAYMODE</span> <span class=n>display_mode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=n>_d3d</span><span class=o>-&gt;</span><span class=nf>GetAdapterDisplayMode</span><span class=p>(</span><span class=n>D3DADAPTER_DEFAULT</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>display_mode</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// set present parameter for direct3D device
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>D3DPRESENT_PARAMETERS</span> <span class=n>present_param</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>ZeroMemory</span><span class=p>(</span><span class=o>&amp;</span><span class=n>present_param</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>present_param</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>BackBufferWidth</span>      <span class=o>=</span> <span class=n>WINDOW_WIDTH</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>BackBufferHeight</span>     <span class=o>=</span> <span class=n>WINDOW_HEIGHT</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>BackBufferFormat</span>     <span class=o>=</span> <span class=n>display_mode</span><span class=p>.</span><span class=n>Format</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>BackBufferCount</span>      <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>hDeviceWindow</span>        <span class=o>=</span> <span class=n>hwnd</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>Windowed</span>             <span class=o>=</span> <span class=o>!</span><span class=n>full_screen</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>SwapEffect</span>           <span class=o>=</span> <span class=n>D3DSWAPEFFECT_FLIP</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>present_param</span><span class=p>.</span><span class=n>PresentationInterval</span> <span class=o>=</span> <span class=n>D3DPRESENT_INTERVAL_DEFAULT</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Creates a device to represent the display adapter.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>DWORD</span> <span class=n>behavior_flags</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>behavior_flags</span> <span class=o>=</span> <span class=n>hardware_process_enable</span> <span class=o>?</span> <span class=nl>D3DCREATE_HARDWARE_VERTEXPROCESSING</span> <span class=p>:</span> <span class=n>D3DCREATE_SOFTWARE_VERTEXPROCESSING</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=n>_d3d</span><span class=o>-&gt;</span><span class=nf>CreateDevice</span><span class=p>(</span><span class=n>D3DADAPTER_DEFAULT</span><span class=p>,</span> <span class=n>D3DDEVTYPE_HAL</span><span class=p>,</span> <span class=n>hwnd</span><span class=p>,</span> <span class=n>behavior_flags</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                                 <span class=o>&amp;</span><span class=n>present_param</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>_d3d_device</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// create successfully
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Creates two sprite objects which is associated with a particular device. 
</span></span></span><span class=line><span class=cl><span class=c1>// Sprite objects are used to draw 2D images to the screen.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>bool</span> <span class=n>SHOOT</span><span class=o>::</span><span class=nf>Create_Sprite</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create sprite for image tiger
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=nf>D3DXCreateSprite</span><span class=p>(</span><span class=n>_d3d_device</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>_sprite_tiger</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Create sprite tiger failed!&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create sprite for image gun
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=nf>D3DXCreateSprite</span><span class=p>(</span><span class=n>_d3d_device</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>_sprite_gun</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Create sprite gun failed!&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create texture for tiger sprite
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span> <span class=nf>Create_Sprite_Texture</span><span class=p>(</span><span class=o>&amp;</span><span class=n>_texture_tiger</span><span class=p>,</span> <span class=s>&#34;tiger.jpg&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Create texture interface for sprite tiger failed.&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create texture for gun sprite
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span> <span class=nf>Create_Sprite_Texture</span><span class=p>(</span><span class=o>&amp;</span><span class=n>_texture_gun</span><span class=p>,</span> <span class=s>&#34;gun.dds&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Create texture interface for sprite gun failed.&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Creates a texture from image file.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>bool</span> <span class=n>SHOOT</span><span class=o>::</span><span class=nf>Create_Sprite_Texture</span><span class=p>(</span><span class=n>IDirect3DTexture9</span><span class=o>**</span> <span class=n>texture</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span><span class=o>*</span> <span class=n>image_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=nf>D3DXCreateTextureFromFile</span><span class=p>(</span><span class=n>_d3d_device</span><span class=p>,</span> <span class=n>image_file</span><span class=p>,</span> <span class=n>texture</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span><span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Draw alpha blend image.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>SHOOT</span><span class=o>::</span><span class=nf>Render</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>_d3d_device</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// clear surface with black
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_d3d_device</span><span class=o>-&gt;</span><span class=nf>Clear</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=n>D3DCLEAR_TARGET</span><span class=p>,</span> <span class=nf>D3DCOLOR_XRGB</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 1) draw tiger
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// begin scene
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>_d3d_device</span><span class=o>-&gt;</span><span class=nf>BeginScene</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Prepares a device for drawing sprites.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_sprite_tiger</span><span class=o>-&gt;</span><span class=nf>Begin</span><span class=p>(</span><span class=n>D3DXSPRITE_ALPHABLEND</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Adds a sprite to the list of batched sprites.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=n>_sprite_tiger</span><span class=o>-&gt;</span><span class=nf>Draw</span><span class=p>(</span><span class=n>_texture_tiger</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=mh>0xFFFFFFFF</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Draw image tiger failed.&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// restores the device state to how it was before ID3DXSprite::Begin was called.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_sprite_tiger</span><span class=o>-&gt;</span><span class=nf>End</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 2) draw gun
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// prepare for begin draw     _sprite_gun-&gt;Begin(D3DXSPRITE_ALPHABLEND);
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>D3DXVECTOR3</span> <span class=nf>pos</span><span class=p>(</span><span class=n>m_gun_pos_x</span><span class=p>,</span> <span class=n>m_gun_pos_y</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// draw gun now
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>FAILED</span><span class=p>(</span><span class=n>_sprite_gun</span><span class=o>-&gt;</span><span class=nf>Draw</span><span class=p>(</span><span class=n>_texture_gun</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>pos</span><span class=p>,</span> <span class=mh>0xFFFFFFFF</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>MessageBox</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;Draw gun failed.&#34;</span><span class=p>,</span> <span class=s>&#34;ERROR&#34;</span><span class=p>,</span> <span class=n>MB_OK</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// indicate end draw for sprite gun
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_sprite_gun</span><span class=o>-&gt;</span><span class=nf>End</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// end scene
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_d3d_device</span><span class=o>-&gt;</span><span class=nf>EndScene</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Presents the contents of the next buffer in the sequence of back buffers owned by the device.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>_d3d_device</span><span class=o>-&gt;</span><span class=nf>Present</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1>// Release all COM object.
</span></span></span><span class=line><span class=cl><span class=c1>//------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>SHOOT</span><span class=o>::</span><span class=nf>Release_COM_Object</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_texture_tiger</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_texture_gun</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_sprite_tiger</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_sprite_gun</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_d3d_device</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>Safe_Release</span><span class=p>(</span><span class=n>_d3d</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>Create_Sprite方法用来创建背景图和瞄准镜的ID3DXSprite精灵接口对象和纹理接口对象， Create_Sprite_Texture方法根据图象文件创建精灵的纹理对象，这里使用DDS格式的文件创建出一个背景透明的瞄准器精灵对象。 Render方法调用ID3DXSprite接口的Begin，Draw，End方法绘制出背景图和背景透明的瞄准镜图象。</p><p>再来看看测试代码main.cpp：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26>26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27>27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28>28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29>29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30>30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31>31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32>32</a>
</span><span class=lnt id=hl-7-33><a class=lnlinks href=#hl-7-33>33</a>
</span><span class=lnt id=hl-7-34><a class=lnlinks href=#hl-7-34>34</a>
</span><span class=lnt id=hl-7-35><a class=lnlinks href=#hl-7-35>35</a>
</span><span class=lnt id=hl-7-36><a class=lnlinks href=#hl-7-36>36</a>
</span><span class=lnt id=hl-7-37><a class=lnlinks href=#hl-7-37>37</a>
</span><span class=lnt id=hl-7-38><a class=lnlinks href=#hl-7-38>38</a>
</span><span class=lnt id=hl-7-39><a class=lnlinks href=#hl-7-39>39</a>
</span><span class=lnt id=hl-7-40><a class=lnlinks href=#hl-7-40>40</a>
</span><span class=lnt id=hl-7-41><a class=lnlinks href=#hl-7-41>41</a>
</span><span class=lnt id=hl-7-42><a class=lnlinks href=#hl-7-42>42</a>
</span><span class=lnt id=hl-7-43><a class=lnlinks href=#hl-7-43>43</a>
</span><span class=lnt id=hl-7-44><a class=lnlinks href=#hl-7-44>44</a>
</span><span class=lnt id=hl-7-45><a class=lnlinks href=#hl-7-45>45</a>
</span><span class=lnt id=hl-7-46><a class=lnlinks href=#hl-7-46>46</a>
</span><span class=lnt id=hl-7-47><a class=lnlinks href=#hl-7-47>47</a>
</span><span class=lnt id=hl-7-48><a class=lnlinks href=#hl-7-48>48</a>
</span><span class=lnt id=hl-7-49><a class=lnlinks href=#hl-7-49>49</a>
</span><span class=lnt id=hl-7-50><a class=lnlinks href=#hl-7-50>50</a>
</span><span class=lnt id=hl-7-51><a class=lnlinks href=#hl-7-51>51</a>
</span><span class=lnt id=hl-7-52><a class=lnlinks href=#hl-7-52>52</a>
</span><span class=lnt id=hl-7-53><a class=lnlinks href=#hl-7-53>53</a>
</span><span class=lnt id=hl-7-54><a class=lnlinks href=#hl-7-54>54</a>
</span><span class=lnt id=hl-7-55><a class=lnlinks href=#hl-7-55>55</a>
</span><span class=lnt id=hl-7-56><a class=lnlinks href=#hl-7-56>56</a>
</span><span class=lnt id=hl-7-57><a class=lnlinks href=#hl-7-57>57</a>
</span><span class=lnt id=hl-7-58><a class=lnlinks href=#hl-7-58>58</a>
</span><span class=lnt id=hl-7-59><a class=lnlinks href=#hl-7-59>59</a>
</span><span class=lnt id=hl-7-60><a class=lnlinks href=#hl-7-60>60</a>
</span><span class=lnt id=hl-7-61><a class=lnlinks href=#hl-7-61>61</a>
</span><span class=lnt id=hl-7-62><a class=lnlinks href=#hl-7-62>62</a>
</span><span class=lnt id=hl-7-63><a class=lnlinks href=#hl-7-63>63</a>
</span><span class=lnt id=hl-7-64><a class=lnlinks href=#hl-7-64>64</a>
</span><span class=lnt id=hl-7-65><a class=lnlinks href=#hl-7-65>65</a>
</span><span class=lnt id=hl-7-66><a class=lnlinks href=#hl-7-66>66</a>
</span><span class=lnt id=hl-7-67><a class=lnlinks href=#hl-7-67>67</a>
</span><span class=lnt id=hl-7-68><a class=lnlinks href=#hl-7-68>68</a>
</span><span class=lnt id=hl-7-69><a class=lnlinks href=#hl-7-69>69</a>
</span><span class=lnt id=hl-7-70><a class=lnlinks href=#hl-7-70>70</a>
</span><span class=lnt id=hl-7-71><a class=lnlinks href=#hl-7-71>71</a>
</span><span class=lnt id=hl-7-72><a class=lnlinks href=#hl-7-72>72</a>
</span><span class=lnt id=hl-7-73><a class=lnlinks href=#hl-7-73>73</a>
</span><span class=lnt id=hl-7-74><a class=lnlinks href=#hl-7-74>74</a>
</span><span class=lnt id=hl-7-75><a class=lnlinks href=#hl-7-75>75</a>
</span><span class=lnt id=hl-7-76><a class=lnlinks href=#hl-7-76>76</a>
</span><span class=lnt id=hl-7-77><a class=lnlinks href=#hl-7-77>77</a>
</span><span class=lnt id=hl-7-78><a class=lnlinks href=#hl-7-78>78</a>
</span><span class=lnt id=hl-7-79><a class=lnlinks href=#hl-7-79>79</a>
</span><span class=lnt id=hl-7-80><a class=lnlinks href=#hl-7-80>80</a>
</span><span class=lnt id=hl-7-81><a class=lnlinks href=#hl-7-81>81</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*************************************************************************************
</span></span></span><span class=line><span class=cl><span class=cm> [Implement File]
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm> PURPOSE: 
</span></span></span><span class=line><span class=cl><span class=cm>    Test for sprite draw with alpha blending.
</span></span></span><span class=line><span class=cl><span class=cm>*************************************************************************************/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#define DIRECTINPUT_VERSION 0x0800
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;GE_COMMON.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;GE_APP.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;GE_INPUT.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;shoot.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#pragma warning(disable : 4305 4996)int WINAPI WinMain(HINSTANCE instance, HINSTANCE, LPSTR cmd_line, int cmd_show)
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>GE_APP</span> <span class=n>ge_app</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>GE_INPUT</span> <span class=n>ge_input</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SHOOT</span> <span class=n>shoot</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>MSG</span> <span class=n>msg</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create window
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span> <span class=n>ge_app</span><span class=p>.</span><span class=nf>Create_Window</span><span class=p>(</span><span class=s>&#34;Sprite draw test with Alpha blending&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=p>,</span> <span class=n>cmd_show</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>HWND</span> <span class=n>hwnd</span> <span class=o>=</span> <span class=n>ge_app</span><span class=p>.</span><span class=nf>Get_Window_Handle</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>SetWindowPos</span><span class=p>(</span><span class=n>hwnd</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span> <span class=n>SWP_NOSIZE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>SetCursorPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create direct input
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ge_input</span><span class=p>.</span><span class=nf>Create_Input</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>hwnd</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create direct3D interface and direct3D device.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span> <span class=n>shoot</span><span class=p>.</span><span class=nf>Create_D3D_Device</span><span class=p>(</span><span class=n>hwnd</span><span class=p>,</span> <span class=nb>false</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create all sprites
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span> <span class=n>shoot</span><span class=p>.</span><span class=nf>Create_Sprite</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Draw all cones
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>shoot</span><span class=p>.</span><span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=p>(</span><span class=n>msg</span><span class=p>.</span><span class=n>message</span> <span class=o>!=</span> <span class=n>WM_QUIT</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nf>PeekMessage</span><span class=p>(</span><span class=o>&amp;</span><span class=n>msg</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span> <span class=p>,</span> <span class=n>PM_REMOVE</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nf>TranslateMessage</span><span class=p>(</span><span class=o>&amp;</span><span class=n>msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nf>DispatchMessage</span><span class=p>(</span><span class=o>&amp;</span><span class=n>msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// get keyboard input
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Read_Keyboard</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Is_Key_Pressed</span><span class=p>(</span><span class=n>DIK_ESCAPE</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                    <span class=nf>PostQuitMessage</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Is_Key_Pressed</span><span class=p>(</span><span class=n>DIK_RIGHT</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=n>m_gun_pos_x</span> <span class=o>+=</span> <span class=mf>5.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Is_Key_Pressed</span><span class=p>(</span><span class=n>DIK_LEFT</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=n>m_gun_pos_x</span> <span class=o>-=</span> <span class=mf>5.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Is_Key_Pressed</span><span class=p>(</span><span class=n>DIK_UP</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=n>m_gun_pos_y</span> <span class=o>-=</span> <span class=mf>5.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>ge_input</span><span class=p>.</span><span class=nf>Is_Key_Pressed</span><span class=p>(</span><span class=n>DIK_DOWN</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=n>m_gun_pos_y</span> <span class=o>+=</span> <span class=mf>5.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>shoot</span><span class=p>.</span><span class=nf>Render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>UnregisterClass</span><span class=p>(</span><span class=n>WINDOW_CLASS_NAME</span><span class=p>,</span> <span class=n>instance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/direct3d/>direct3d
</a><a href=/tags/graphics/>graphics</a></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
D3D中的Alpha颜色混合（2）</li><li class=post-copyright-author><strong>本文作者： </strong>Rise</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blogs.qipai360.cn/post/alpha-color-blending-in-d3d-2/ title=D3D中的Alpha颜色混合（2）>https://blogs.qipai360.cn/post/alpha-color-blending-in-d3d-2/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/black.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://www.zhihu.com/people/rise-worlds><span class=icon><i class="fa fa-book"></i>
</span><span class=label>知乎</span></a></div><div class=social-item><a target=_blank class=social-link href=https://twitter.com/riseworlds><span class=icon><i class="fab fa-twitter"></i>
</span><span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=https://www.facebook.com/rise.worlds><span class=icon><i class="fab fa-facebook"></i>
</span><span class=label>facebook</span></a></div><div class=social-item><a target=_blank class=social-link href=https://youtube.com/@YiXuan><span class=icon><i class="fab fa-youtube"></i>
</span><span class=label>YouTube</span></a></div><div class=social-item><a target=_blank class=social-link href=https://instagram.com/rise.worlds><span class=icon><i class="fab fa-instagram"></i>
</span><span class=label>Instagram</span></a></div><div class=social-item><a target=_blank class=social-link href=https://t.me/riseworlds><span class=icon><i class="fab fa-telegram"></i>
</span><span class=label>Telegram</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/alpha-color-blending-in-d3d-3/ rel=next title=D3D中的Alpha颜色混合（3）><i class="fa fa-chevron-left"></i> D3D中的Alpha颜色混合（3）</a></div><div class="post-nav-prev post-nav-item"><a href=/post/alpha-color-blending-in-d3d-1/ rel=prev title=D3D中的Alpha颜色混合（1）>D3D中的Alpha颜色混合（1）
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2004 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rise</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.152.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>豫ICP备2021009490号</a>
<img src=/imgs/gongan.png alt=豫公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162302000074" target=_blank>豫公网安备 41162302000074 号</a></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":true,"expired":false,"isHome":false,"isPage":true,"path":"alpha-color-blending-in-d3d-2","permalink":"https://blogs.qipai360.cn/post/alpha-color-blending-in-d3d-2/","title":"D3D中的Alpha颜色混合（2）","toc":false,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.5.7"}}}</script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://blogs.qipai360.cn/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOA6L0YM4CiXf9","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"rise-worlds/rise-worlds.github.io","repoid":"MDEwOlJlcG9zaXRvcnk2MTAxMTA0MA==","theme":"transparent_dark"},"js":"https://giscus.app/client.js"},"hostname":"https://blogs.qipai360.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://blogs.qipai360.cn/js/3rd"}},"version":"4.8.3","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.5.7"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.5.7"}}}</script><script type=text/javascript src="/js/main.min.js?=1761990624" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1761990626" defer></script></body></html>